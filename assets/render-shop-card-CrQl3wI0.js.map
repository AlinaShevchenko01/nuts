{"version":3,"file":"render-shop-card-CrQl3wI0.js","sources":["../../src/js/partials/render-shop-card.js","../../src/js/firebase/get-products.js","../../src/js/partials/custom-swiper.js"],"sourcesContent":["import { getProducts } from \"@/js/firebase/get-products.js\";\nimport { lazyLoad } from \"@/js/partials/lazy-loading.js\";\nimport { initCustomCardSwiper } from \"@/js/partials/custom-swiper.js\";\nimport cardPartial from \"@/html/partials/card-shop.html\";\nimport imgManager from \"@/html/templates/img-manager.html\";\nimport itemCharacteristics from \"@/html/partials/card-characteristics.html\";\n\nexport async function renderShopCard() {\n  const shopContainer = document.querySelector(\".shop\");\n  const btnMore = document.querySelector('[data-move=\"more\"]');\n  shopContainer.innerHTML = \"\";\n  const products = await getProducts();\n  const groupSize = 6;\n  let renderedCards = 0;\n\n  function createCard(product) {\n    const imagesHtml = product.photo\n      .map((img) =>\n        imgManager({\n          \"picture-class\": \"shop-card__item-picture\",\n          \"img-srcset\": img.imgSrcSet,\n          \"img-src\": img.imgSrc,\n          \"img-alt\": product.name,\n          \"img-class\": \"shop-card__img\",\n        }).toString(),\n      )\n      .join(\"\");\n\n    const characteristicsHtml = product.characteristics\n      .map((char) =>\n        itemCharacteristics({\n          \"characteristic-text\": char,\n        }).toString(),\n      )\n      .join(\",\");\n\n    const cardShop = cardPartial({\n      images: imagesHtml,\n      \"card-title\": product.name,\n      characteristics: characteristicsHtml,\n      \"card-article\": product.id,\n      weight: 40,\n      \"pack-type\": product.packType,\n      \"full-price\": Math.round(product.price * product.salePercent),\n      \"sale-percent\": product.salePercent,\n      \"sale-price\": product.price,\n      \"class-card\": product.itemFlag,\n      flag: product.itemFlag,\n    });\n\n    return cardShop;\n  }\n\n  function renderGroup() {\n    const productGroup = products.slice(\n      renderedCards,\n      renderedCards + groupSize,\n    );\n\n    productGroup.forEach((product) => {\n      const cardShop = createCard(product);\n      cardShop.render(shopContainer);\n      initCustomCardSwiper(cardShop);\n    });\n\n    renderedCards += productGroup.length;\n\n    if (renderedCards >= products.length) {\n      btnMore.classList.add(\"hidden\");\n    }\n    lazyLoad();\n  }\n  renderGroup();\n\n  if (btnMore) {\n    btnMore.addEventListener(\"click\", () => {\n      renderGroup();\n    });\n  }\n}\n","import { collection, getDocs } from \"firebase/firestore\";\nimport { db } from \"@/js/firebase/firebase.js\";\n\nexport async function getProducts() {\n  try {\n    const queryProducts = await getDocs(collection(db, \"products\"));\n    return queryProducts.docs.map((doc) => doc.data());\n  } catch (err) {\n    console.log(err);\n    return [];\n  }\n}\n","export function initCustomCardSwiper(card) {\n  const slides = card.querySelectorAll(\".shop-card__item-picture\");\n  const btnNext = card.querySelector(\".shop-card__item-btn_next\");\n  const btnPrev = card.querySelector(\".shop-card__item-btn_prev\");\n\n  let index = 0;\n  slides[index].classList.add(\"active\");\n\n  function showSlide(i) {\n    slides.forEach((slide) => {\n      slide.classList.remove(\"active\");\n    });\n    if (i < 0) {\n      index = slides.length - 1;\n    } else if (i >= slides.length) {\n      index = 0;\n    } else index = i;\n\n    slides[index].classList.add(\"active\");\n  }\n\n  btnNext.addEventListener(\"click\", () => {\n    showSlide(index + 1);\n  });\n\n  btnPrev.addEventListener(\"click\", () => {\n    showSlide(index - 1);\n  });\n}\n"],"names":["async","renderShopCard","shopContainer","document","querySelector","btnMore","innerHTML","products","getDocs","collection","db","docs","map","doc","data","err","console","log","getProducts","renderedCards","renderGroup","productGroup","slice","forEach","product","cardShop","imagesHtml","photo","img","imgManager","imgSrcSet","imgSrc","name","toString","join","characteristicsHtml","characteristics","char","itemCharacteristics","cardPartial","images","id","weight","packType","Math","round","price","salePercent","itemFlag","flag","createCard","render","card","slides","querySelectorAll","btnNext","btnPrev","index","showSlide","i","slide","classList","remove","length","add","addEventListener","initCustomCardSwiper","lazyLoad"],"mappings":"s4QAOOA,eAAeC,IACpB,MAAMC,EAAgBC,SAASC,cAAc,SACvCC,EAAUF,SAASC,cAAc,sBACvCF,EAAcI,UAAY,GAC1B,MAAMC,QCRDP,iBACL,IAEE,aAD4BQ,EAAQC,EAAWC,EAAI,cAC9BC,KAAKC,IAAKC,GAAQA,EAAIC,OAC7C,OAASC,GAEP,OADAC,QAAQC,IAAIF,GACL,EACT,CACF,CDAyBG,GAEvB,IAAIC,EAAgB,EAwCpB,SAASC,IACP,MAAMC,EAAed,EAASe,MAC5BH,EACAA,EA5Cc,GA+ChBE,EAAaE,QAASC,IACpB,MAAMC,EA7CV,SAAoBD,GAClB,MAAME,EAAaF,EAAQG,MACxBf,IAAKgB,GACJC,EAAW,CACT,gBAAiB,0BACjB,aAAcD,EAAIE,UAClB,UAAWF,EAAIG,OACf,UAAWP,EAAQQ,KACnB,YAAa,mBACZC,YAEJC,KAAK,IAEFC,EAAsBX,EAAQY,gBACjCxB,IAAKyB,GACJC,EAAoB,CAClB,sBAAuBD,IACtBJ,YAEJC,KAAK,KAgBR,OAdiBK,EAAY,CAC3BC,OAAQd,EACR,aAAcF,EAAQQ,KACtBI,gBAAiBD,EACjB,eAAgBX,EAAQiB,GACxBC,OAAQ,GACR,YAAalB,EAAQmB,SACrB,aAAcC,KAAKC,MAAMrB,EAAQsB,MAAQtB,EAAQuB,aACjD,eAAgBvB,EAAQuB,YACxB,aAAcvB,EAAQsB,MACtB,aAActB,EAAQwB,SACtBC,KAAMzB,EAAQwB,UAIlB,CASqBE,CAAW1B,GAC5BC,EAAS0B,OAAOjD,GE7Df,SAA8BkD,GACnC,MAAMC,EAASD,EAAKE,iBAAiB,4BAC/BC,EAAUH,EAAKhD,cAAc,6BAC7BoD,EAAUJ,EAAKhD,cAAc,6BAEnC,IAAIqD,EAAQ,EAGZ,SAASC,EAAUC,GACjBN,EAAO9B,QAASqC,IACdA,EAAMC,UAAUC,OAAO,YAGvBL,EADEE,EAAI,EACEN,EAAOU,OAAS,EACfJ,GAAKN,EAAOU,OACb,EACKJ,EAEfN,EAAOI,GAAOI,UAAUG,IAAI,SAC9B,CAbAX,EAAOI,GAAOI,UAAUG,IAAI,UAe5BT,EAAQU,iBAAiB,QAAS,KAChCP,EAAUD,EAAQ,KAGpBD,EAAQS,iBAAiB,QAAS,KAChCP,EAAUD,EAAQ,IAEtB,CFkCMS,CAAqBzC,KAGvBN,GAAiBE,EAAa0C,OAE1B5C,GAAiBZ,EAASwD,QAC5B1D,EAAQwD,UAAUG,IAAI,UAExBG,GACF,CACA/C,IAEIf,GACFA,EAAQ4D,iBAAiB,QAAS,KAChC7C,KAGN"}