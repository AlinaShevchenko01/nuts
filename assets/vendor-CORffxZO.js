var e,t={exports:{}};var n=e?t.exports:(e=1,t.exports=function(e){var t={};function n(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(s,r,function(t){return e[t]}.bind(null,r));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){n.r(t);var s=function(e){return Array.isArray(e)?e:[e]},r=function(e){return e instanceof Node},i=function(e,t){if(e&&t){e=function(e){return e instanceof NodeList}(e)?e:[e];for(var n=0;n<e.length&&!0!==t(e[n],n,e.length);n++);}},o=function(e){return console.error("[scroll-lock] ".concat(e))},a=function(e){if(Array.isArray(e))return e.join(", ")},l=function(e){var t=[];return i(e,function(e){return t.push(e)}),t},c=function(e,t){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:document;if((!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&-1!==l(n.querySelectorAll(t)).indexOf(e))return e;for(;(e=e.parentElement)&&-1===l(n.querySelectorAll(t)).indexOf(e););return e},u=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;return-1!==l(n.querySelectorAll(t)).indexOf(e)},h=function(e){if(e)return"hidden"===getComputedStyle(e).overflow},d=function(e){if(e)return!!h(e)||e.scrollTop<=0},f=function(e){if(e){if(h(e))return!0;var t=e.scrollTop,n=e.scrollHeight;return t+e.offsetHeight>=n}},p=function(e){if(e)return!!h(e)||e.scrollLeft<=0},m=function(e){if(e){if(h(e))return!0;var t=e.scrollLeft,n=e.scrollWidth;return t+e.offsetWidth>=n}};function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"disablePageScroll",function(){return w}),n.d(t,"enablePageScroll",function(){return b}),n.d(t,"getScrollState",function(){return S}),n.d(t,"clearQueueScrollLocks",function(){return T}),n.d(t,"getTargetScrollBarWidth",function(){return E}),n.d(t,"getCurrentTargetScrollBarWidth",function(){return _}),n.d(t,"getPageScrollBarWidth",function(){return C}),n.d(t,"getCurrentPageScrollBarWidth",function(){return I}),n.d(t,"addScrollableTarget",function(){return A}),n.d(t,"removeScrollableTarget",function(){return x}),n.d(t,"addScrollableSelector",function(){return k}),n.d(t,"removeScrollableSelector",function(){return D}),n.d(t,"addLockableTarget",function(){return N}),n.d(t,"addLockableSelector",function(){return M}),n.d(t,"setFillGapMethod",function(){return L}),n.d(t,"addFillGapTarget",function(){return P}),n.d(t,"removeFillGapTarget",function(){return O}),n.d(t,"addFillGapSelector",function(){return R}),n.d(t,"removeFillGapSelector",function(){return V}),n.d(t,"refillGaps",function(){return F});var y=["padding","margin","width","max-width","none"],v={scroll:!0,queue:0,scrollableSelectors:["[data-scroll-lock-scrollable]"],lockableSelectors:["body","[data-scroll-lock-lockable]"],fillGapSelectors:["body","[data-scroll-lock-fill-gap]","[data-scroll-lock-lockable]"],fillGapMethod:y[0],startTouchY:0,startTouchX:0},w=function(e){v.queue<=0&&(v.scroll=!1,B(),$()),A(e),v.queue++},b=function(e){v.queue>0&&v.queue--,v.queue<=0&&(v.scroll=!0,U(),H()),x(e)},S=function(){return v.scroll},T=function(){v.queue=0},E=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(r(e)){var n=e.style.overflowY;t?S()||(e.style.overflowY=e.getAttribute("data-scroll-lock-saved-overflow-y-property")):e.style.overflowY="scroll";var s=_(e);return e.style.overflowY=n,s}return 0},_=function(e){if(r(e)){if(e===document.body){var t=document.documentElement.clientWidth;return window.innerWidth-t}var n=e.style.borderLeftWidth,s=e.style.borderRightWidth;e.style.borderLeftWidth="0px",e.style.borderRightWidth="0px";var i=e.offsetWidth-e.clientWidth;return e.style.borderLeftWidth=n,e.style.borderRightWidth=s,i}return 0},C=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return E(document.body,e)},I=function(){return _(document.body)},A=function(e){e&&s(e).map(function(e){i(e,function(e){r(e)?e.setAttribute("data-scroll-lock-scrollable",""):o('"'.concat(e,'" is not a Element.'))})})},x=function(e){e&&s(e).map(function(e){i(e,function(e){r(e)?e.removeAttribute("data-scroll-lock-scrollable"):o('"'.concat(e,'" is not a Element.'))})})},k=function(e){e&&s(e).map(function(e){v.scrollableSelectors.push(e)})},D=function(e){e&&s(e).map(function(e){v.scrollableSelectors=v.scrollableSelectors.filter(function(t){return t!==e})})},N=function(e){e&&(s(e).map(function(e){i(e,function(e){r(e)?e.setAttribute("data-scroll-lock-lockable",""):o('"'.concat(e,'" is not a Element.'))})}),S()||B())},M=function(e){e&&(s(e).map(function(e){v.lockableSelectors.push(e)}),S()||B(),R(e))},L=function(e){if(e)if(-1!==y.indexOf(e))v.fillGapMethod=e,F();else{var t=y.join(", ");o('"'.concat(e,'" method is not available!\nAvailable fill gap methods: ').concat(t,"."))}},P=function(e){e&&s(e).map(function(e){i(e,function(e){r(e)?(e.setAttribute("data-scroll-lock-fill-gap",""),v.scroll||W(e)):o('"'.concat(e,'" is not a Element.'))})})},O=function(e){e&&s(e).map(function(e){i(e,function(e){r(e)?(e.removeAttribute("data-scroll-lock-fill-gap"),v.scroll||Y(e)):o('"'.concat(e,'" is not a Element.'))})})},R=function(e){e&&s(e).map(function(e){-1===v.fillGapSelectors.indexOf(e)&&(v.fillGapSelectors.push(e),v.scroll||K(e))})},V=function(e){e&&s(e).map(function(e){v.fillGapSelectors=v.fillGapSelectors.filter(function(t){return t!==e}),v.scroll||Q(e)})},F=function(){v.scroll||$()},B=function(){var e=a(v.lockableSelectors);j(e)},U=function(){var e=a(v.lockableSelectors);z(e)},j=function(e){var t=document.querySelectorAll(e);i(t,function(e){G(e)})},z=function(e){var t=document.querySelectorAll(e);i(t,function(e){q(e)})},G=function(e){if(r(e)&&"true"!==e.getAttribute("data-scroll-lock-locked")){var t=window.getComputedStyle(e);e.setAttribute("data-scroll-lock-saved-overflow-y-property",t.overflowY),e.setAttribute("data-scroll-lock-saved-inline-overflow-property",e.style.overflow),e.setAttribute("data-scroll-lock-saved-inline-overflow-y-property",e.style.overflowY),e.style.overflow="hidden",e.setAttribute("data-scroll-lock-locked","true")}},q=function(e){r(e)&&"true"===e.getAttribute("data-scroll-lock-locked")&&(e.style.overflow=e.getAttribute("data-scroll-lock-saved-inline-overflow-property"),e.style.overflowY=e.getAttribute("data-scroll-lock-saved-inline-overflow-y-property"),e.removeAttribute("data-scroll-lock-saved-overflow-property"),e.removeAttribute("data-scroll-lock-saved-inline-overflow-property"),e.removeAttribute("data-scroll-lock-saved-inline-overflow-y-property"),e.removeAttribute("data-scroll-lock-locked"))},$=function(){v.fillGapSelectors.map(function(e){K(e)})},H=function(){v.fillGapSelectors.map(function(e){Q(e)})},K=function(e){var t=document.querySelectorAll(e),n=-1!==v.lockableSelectors.indexOf(e);i(t,function(e){W(e,n)})},W=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(r(e)){var n;if(""===e.getAttribute("data-scroll-lock-lockable")||t)n=E(e,!0);else{var s=c(e,a(v.lockableSelectors));n=E(s,!0)}"true"===e.getAttribute("data-scroll-lock-filled-gap")&&Y(e);var i=window.getComputedStyle(e);if(e.setAttribute("data-scroll-lock-filled-gap","true"),e.setAttribute("data-scroll-lock-current-fill-gap-method",v.fillGapMethod),"margin"===v.fillGapMethod){var o=parseFloat(i.marginRight);e.style.marginRight="".concat(o+n,"px")}else if("width"===v.fillGapMethod)e.style.width="calc(100% - ".concat(n,"px)");else if("max-width"===v.fillGapMethod)e.style.maxWidth="calc(100% - ".concat(n,"px)");else if("padding"===v.fillGapMethod){var l=parseFloat(i.paddingRight);e.style.paddingRight="".concat(l+n,"px")}}},Q=function(e){var t=document.querySelectorAll(e);i(t,function(e){Y(e)})},Y=function(e){if(r(e)&&"true"===e.getAttribute("data-scroll-lock-filled-gap")){var t=e.getAttribute("data-scroll-lock-current-fill-gap-method");e.removeAttribute("data-scroll-lock-filled-gap"),e.removeAttribute("data-scroll-lock-current-fill-gap-method"),"margin"===t?e.style.marginRight="":"width"===t?e.style.width="":"max-width"===t?e.style.maxWidth="":"padding"===t&&(e.style.paddingRight="")}};"undefined"!=typeof window&&window.addEventListener("resize",function(e){F()}),"undefined"!=typeof document&&(document.addEventListener("touchstart",function(e){v.scroll||(v.startTouchY=e.touches[0].clientY,v.startTouchX=e.touches[0].clientX)}),document.addEventListener("touchmove",function(e){if(!v.scroll){var t=v.startTouchY,n=v.startTouchX,s=e.touches[0].clientY,r=e.touches[0].clientX;if(e.touches.length<2){var i=a(v.scrollableSelectors),o={up:t<s,down:t>s,left:n<r,right:n>r},l={up:t+3<s,down:t-3>s,left:n+3<r,right:n-3>r};!function t(n){var s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n){var r=c(n,i,!1);if(function(e){return u(e,'input[type="range"]')}(n))return!1;if(s||function(e){return u(e,'textarea, [contenteditable="true"]')}(n)&&c(n,i)||u(n,i)){var a=!1;p(n)&&m(n)?(o.up&&d(n)||o.down&&f(n))&&(a=!0):d(n)&&f(n)?(o.left&&p(n)||o.right&&m(n))&&(a=!0):(l.up&&d(n)||l.down&&f(n)||l.left&&p(n)||l.right&&m(n))&&(a=!0),a&&(r?t(r,!0):e.cancelable&&e.preventDefault())}else t(r)}else e.cancelable&&e.preventDefault()}(e.target)}}},{passive:!1}),document.addEventListener("touchend",function(e){v.scroll||(v.startTouchY=0,v.startTouchX=0)}));var X={hide:function(e){o('"hide" is deprecated! Use "disablePageScroll" instead. \n https://github.com/FL3NKEY/scroll-lock#disablepagescrollscrollabletarget'),w(e)},show:function(e){o('"show" is deprecated! Use "enablePageScroll" instead. \n https://github.com/FL3NKEY/scroll-lock#enablepagescrollscrollabletarget'),b(e)},toggle:function(e){o('"toggle" is deprecated! Do not use it.'),S()?w():b(e)},getState:function(){return o('"getState" is deprecated! Use "getScrollState" instead. \n https://github.com/FL3NKEY/scroll-lock#getscrollstate'),S()},getWidth:function(){return o('"getWidth" is deprecated! Use "getPageScrollBarWidth" instead. \n https://github.com/FL3NKEY/scroll-lock#getpagescrollbarwidth'),C()},getCurrentWidth:function(){return o('"getCurrentWidth" is deprecated! Use "getCurrentPageScrollBarWidth" instead. \n https://github.com/FL3NKEY/scroll-lock#getcurrentpagescrollbarwidth'),I()},setScrollableTargets:function(e){o('"setScrollableTargets" is deprecated! Use "addScrollableTarget" instead. \n https://github.com/FL3NKEY/scroll-lock#addscrollabletargetscrollabletarget'),A(e)},setFillGapSelectors:function(e){o('"setFillGapSelectors" is deprecated! Use "addFillGapSelector" instead. \n https://github.com/FL3NKEY/scroll-lock#addfillgapselectorfillgapselector'),R(e)},setFillGapTargets:function(e){o('"setFillGapTargets" is deprecated! Use "addFillGapTarget" instead. \n https://github.com/FL3NKEY/scroll-lock#addfillgaptargetfillgaptarget'),P(e)},clearQueue:function(){o('"clearQueue" is deprecated! Use "clearQueueScrollLocks" instead. \n https://github.com/FL3NKEY/scroll-lock#clearqueuescrolllocks'),T()}},J=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},s=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),s.forEach(function(t){g(e,t,n[t])})}return e}({disablePageScroll:w,enablePageScroll:b,getScrollState:S,clearQueueScrollLocks:T,getTargetScrollBarWidth:E,getCurrentTargetScrollBarWidth:_,getPageScrollBarWidth:C,getCurrentPageScrollBarWidth:I,addScrollableSelector:k,removeScrollableSelector:D,addScrollableTarget:A,removeScrollableTarget:x,addLockableSelector:M,addLockableTarget:N,addFillGapSelector:R,removeFillGapSelector:V,addFillGapTarget:P,removeFillGapTarget:O,setFillGapMethod:L,refillGaps:F,_state:v},X);t.default=J}]).default);var s={};const r=function(e){const t=[];let n=0;for(let s=0;s<e.length;s++){let r=e.charCodeAt(s);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&s+1<e.length&&56320==(64512&e.charCodeAt(s+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++s)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<e.length;r+=3){const t=e[r],i=r+1<e.length,o=i?e[r+1]:0,a=r+2<e.length,l=a?e[r+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,i||(h=64)),s.push(n[c],n[u],n[h],n[d])}return s.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(r(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,s=0;for(;n<e.length;){const r=e[n++];if(r<128)t[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=e[n++];t[s++]=String.fromCharCode((31&r)<<6|63&i)}else if(r>239&&r<365){const i=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[s++]=String.fromCharCode(55296+(i>>10)),t[s++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],o=e[n++];t[s++]=String.fromCharCode((15&r)<<12|(63&i)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<e.length;){const t=n[e.charAt(r++)],i=r<e.length?n[e.charAt(r)]:0;++r;const a=r<e.length?n[e.charAt(r)]:64;++r;const l=r<e.length?n[e.charAt(r)]:64;if(++r,null==t||null==i||null==a||null==l)throw new o;const c=t<<2|i>>4;if(s.push(c),64!==a){const e=i<<4&240|a>>2;if(s.push(e),64!==l){const e=a<<6&192|l;s.push(e)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class o extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const a=function(e){return function(e){const t=r(e);return i.encodeByteArray(t,!0)}(e).replace(/\./g,"")};const l=()=>function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,c=()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&function(e){try{return i.decodeString(e,!0)}catch(n){console.error("base64Decode failed: ",n)}return null}(e[1]);return t&&JSON.parse(t)},u=()=>{try{return l()||(()=>{if("undefined"==typeof process)return;const e=s.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||c()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},h=e=>{const t=(e=>u()?.emulatorHosts?.[e])(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),s]:[t.substring(0,n),s]},d=()=>u()?.config;class f{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function p(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}const m={};let g=!1;function y(e,t){if("undefined"==typeof window||"undefined"==typeof document||!p(window.location.host)||m[e]===t||m[e]||g)return;function n(e){return`__firebase__banner__${e}`}m[e]=t;const s="__firebase__banner",r=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(m))m[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function i(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{g=!0,function(){const e=document.getElementById(s);e&&e.remove()}()},e}function o(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(s),t=n("text"),o=document.getElementById(t)||document.createElement("span"),a=n("learnmore"),l=document.getElementById(a)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,a);const n=i();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,o,l,n),document.body.appendChild(t)}r?(o.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',o.innerText="Preview backend running in this workspace."),o.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",o):o()}function v(){return!function(){const e=u()?.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}class w extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,w.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,b.prototype.create)}}class b{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},s=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(S,(e,n)=>{const s=t[n];return null!=s?String(s):`<${n}?>`})}(r,n):"Error",o=`${this.serviceName}: ${i} (${s}).`;return new w(s,o,n)}}const S=/\{\$([^}]+)}/g;function T(e,t){if(e===t)return!0;const n=Object.keys(e),s=Object.keys(t);for(const r of n){if(!s.includes(r))return!1;const n=e[r],i=t[r];if(E(n)&&E(i)){if(!T(n,i))return!1}else if(n!==i)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function E(e){return null!==e&&"object"==typeof e}function _(e){return e&&e._delegate?e._delegate:e}class C{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const I="[DEFAULT]";class A{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new f;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(!this.isInitialized(t)&&!this.shouldAutoInitialize()){if(n)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(n)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:I})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:s});n.resolve(e)}catch(t){}}}}clearInstance(e=I){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=I){return this.instances.has(e)}getOptions(e=I){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[r,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(r)&&i.resolve(s)}return s}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(n)??new Set;s.add(e),this.onInitCallbacks.set(n,s);const r=this.instances.get(n);return r&&e(r,n),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(s=e,s===I?void 0:s),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}var s;return n||null}normalizeInstanceIdentifier(e=I){return this.component?this.component.multipleInstances?e:I:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class x{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new A(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var k,D;(D=k||(k={}))[D.DEBUG=0]="DEBUG",D[D.VERBOSE=1]="VERBOSE",D[D.INFO=2]="INFO",D[D.WARN=3]="WARN",D[D.ERROR=4]="ERROR",D[D.SILENT=5]="SILENT";const N={debug:k.DEBUG,verbose:k.VERBOSE,info:k.INFO,warn:k.WARN,error:k.ERROR,silent:k.SILENT},M=k.INFO,L={[k.DEBUG]:"log",[k.VERBOSE]:"log",[k.INFO]:"info",[k.WARN]:"warn",[k.ERROR]:"error"},P=(e,t,...n)=>{if(t<e.logLevel)return;const s=(new Date).toISOString(),r=L[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[r](`[${s}]  ${e.name}:`,...n)};class O{constructor(e){this.name=e,this._logLevel=M,this._logHandler=P,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in k))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?N[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,k.DEBUG,...e),this._logHandler(this,k.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,k.VERBOSE,...e),this._logHandler(this,k.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,k.INFO,...e),this._logHandler(this,k.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,k.WARN,...e),this._logHandler(this,k.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,k.ERROR,...e),this._logHandler(this,k.ERROR,...e)}}let R,V;const F=new WeakMap,B=new WeakMap,U=new WeakMap,j=new WeakMap,z=new WeakMap;let G={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return B.get(e);if("objectStoreNames"===t)return e.objectStoreNames||U.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return H(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function q(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(V||(V=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(K(this),t),H(F.get(this))}:function(...t){return H(e.apply(K(this),t))}:function(t,...n){const s=e.call(K(this),t,...n);return U.set(s,t.sort?t.sort():[t]),H(s)}}function $(e){return"function"==typeof e?q(e):(e instanceof IDBTransaction&&function(e){if(B.has(e))return;const t=new Promise((t,n)=>{const s=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",i),e.removeEventListener("abort",i)},r=()=>{t(),s()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",r),e.addEventListener("error",i),e.addEventListener("abort",i)});B.set(e,t)}(e),t=e,(R||(R=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,G):e);var t}function H(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const s=()=>{e.removeEventListener("success",r),e.removeEventListener("error",i)},r=()=>{t(H(e.result)),s()},i=()=>{n(e.error),s()};e.addEventListener("success",r),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&F.set(t,e)}).catch(()=>{}),z.set(t,e),t}(e);if(j.has(e))return j.get(e);const t=$(e);return t!==e&&(j.set(e,t),z.set(t,e)),t}const K=e=>z.get(e);const W=["get","getKey","getAll","getAllKeys","count"],Q=["put","add","delete","clear"],Y=new Map;function X(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Y.get(t))return Y.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,r=Q.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!r&&!W.includes(n))return;const i=async function(e,...t){const i=this.transaction(e,r?"readwrite":"readonly");let o=i.store;return s&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),r&&i.done]))[0]};return Y.set(t,i),i}G=(e=>({...e,get:(t,n,s)=>X(t,n)||e.get(t,n,s),has:(t,n)=>!!X(t,n)||e.has(t,n)}))(G);class J{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===t?.type}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const Z="@firebase/app",ee="0.14.5",te=new O("@firebase/app"),ne="@firebase/app-compat",se="@firebase/analytics-compat",re="@firebase/analytics",ie="@firebase/app-check-compat",oe="@firebase/app-check",ae="@firebase/auth",le="@firebase/auth-compat",ce="@firebase/database",ue="@firebase/data-connect",he="@firebase/database-compat",de="@firebase/functions",fe="@firebase/functions-compat",pe="@firebase/installations",me="@firebase/installations-compat",ge="@firebase/messaging",ye="@firebase/messaging-compat",ve="@firebase/performance",we="@firebase/performance-compat",be="@firebase/remote-config",Se="@firebase/remote-config-compat",Te="@firebase/storage",Ee="@firebase/storage-compat",_e="@firebase/firestore",Ce="@firebase/ai",Ie="@firebase/firestore-compat",Ae="firebase",xe="[DEFAULT]",ke={[Z]:"fire-core",[ne]:"fire-core-compat",[re]:"fire-analytics",[se]:"fire-analytics-compat",[oe]:"fire-app-check",[ie]:"fire-app-check-compat",[ae]:"fire-auth",[le]:"fire-auth-compat",[ce]:"fire-rtdb",[ue]:"fire-data-connect",[he]:"fire-rtdb-compat",[de]:"fire-fn",[fe]:"fire-fn-compat",[pe]:"fire-iid",[me]:"fire-iid-compat",[ge]:"fire-fcm",[ye]:"fire-fcm-compat",[ve]:"fire-perf",[we]:"fire-perf-compat",[be]:"fire-rc",[Se]:"fire-rc-compat",[Te]:"fire-gcs",[Ee]:"fire-gcs-compat",[_e]:"fire-fst",[Ie]:"fire-fst-compat",[Ce]:"fire-vertex","fire-js":"fire-js",[Ae]:"fire-js-all"},De=new Map,Ne=new Map,Me=new Map;function Le(e,t){try{e.container.addComponent(t)}catch(n){te.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Pe(e){const t=e.name;if(Me.has(t))return te.debug(`There were multiple attempts to register component ${t}.`),!1;Me.set(t,e);for(const n of De.values())Le(n,e);for(const n of Ne.values())Le(n,e);return!0}const Oe=new b("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Re{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new C("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Oe.create("app-deleted",{appName:this._name})}}function Ve(e,t={}){let n=e;if("object"!=typeof t){t={name:t}}const s={name:xe,automaticDataCollectionEnabled:!0,...t},r=s.name;if("string"!=typeof r||!r)throw Oe.create("bad-app-name",{appName:String(r)});if(n||(n=d()),!n)throw Oe.create("no-options");const i=De.get(r);if(i){if(T(n,i.options)&&T(s,i.config))return i;throw Oe.create("duplicate-app",{appName:r})}const o=new x(r);for(const l of Me.values())o.addComponent(l);const a=new Re(n,s,o);return De.set(r,a),a}function Fe(e,t,n){let s=ke[e]??e;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=t.match(/\s|\//);if(r||i){const e=[`Unable to register library "${s}" with version "${t}":`];return r&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&e.push("and"),i&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void te.warn(e.join(" "))}Pe(new C(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}const Be="firebase-heartbeat-store";let Ue=null;function je(){return Ue||(Ue=function(e,t,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(e,t),a=H(o);return s&&o.addEventListener("upgradeneeded",e=>{s(H(o.result),e.oldVersion,e.newVersion,H(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{i&&e.addEventListener("close",()=>i()),r&&e.addEventListener("versionchange",e=>r(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Be)}catch(n){console.warn(n)}}}).catch(e=>{throw Oe.create("idb-open",{originalErrorMessage:e.message})})),Ue}async function ze(e,t){try{const n=(await je()).transaction(Be,"readwrite"),s=n.objectStore(Be);await s.put(t,Ge(e)),await n.done}catch(n){if(n instanceof w)te.warn(n.message);else{const e=Oe.create("idb-set",{originalErrorMessage:n?.message});te.warn(e.message)}}}function Ge(e){return`${e.name}!${e.options.appId}`}class qe{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new He(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=$e();if(null==this._heartbeatsCache?.heartbeats&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==this._heartbeatsCache?.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===t||this._heartbeatsCache.heartbeats.some(e=>e.date===t))return;if(this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let s=1;s<e.length;s++)e[s].date<n&&(n=e[s].date,t=s);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){te.warn(e)}}async getHeartbeatsHeader(){try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==this._heartbeatsCache?.heartbeats||0===this._heartbeatsCache.heartbeats.length)return"";const e=$e(),{heartbeatsToSend:t,unsentEntries:n}=function(e,t=1024){const n=[];let s=e.slice();for(const r of e){const e=n.find(e=>e.agent===r.agent);if(e){if(e.dates.push(r.date),Ke(n)>t){e.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Ke(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}(this._heartbeatsCache.heartbeats),s=a(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return te.warn(e),""}}}function $e(){return(new Date).toISOString().substring(0,10)}class He{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(e){return!1}}()&&new Promise((e,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{t(r.error?.message||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await je()).transaction(Be),n=await t.objectStore(Be).get(Ge(e));return await t.done,n}catch(t){if(t instanceof w)te.warn(t.message);else{const e=Oe.create("idb-get",{originalErrorMessage:t?.message});te.warn(e.message)}}}(this.app);return e?.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return ze(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return ze(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}}}function Ke(e){return a(JSON.stringify({version:2,heartbeats:e})).length}var We;We="",Pe(new C("platform-logger",e=>new J(e),"PRIVATE")),Pe(new C("heartbeat",e=>new qe(e),"PRIVATE")),Fe(Z,ee,We),Fe(Z,ee,"esm2020"),Fe("fire-js","");var Qe,Ye,Xe="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function n(e,t,n){n||(n=0);const s=Array(16);if("string"==typeof t)for(var r=0;r<16;++r)s[r]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(r=0;r<16;++r)s[r]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],r=e.g[2];let i,o=e.g[3];i=t+(o^n&(r^o))+s[0]+3614090360&4294967295,i=o+(r^(t=n+(i<<7&4294967295|i>>>25))&(n^r))+s[1]+3905402710&4294967295,o=t+(i<<12&4294967295|i>>>20),i=r+(n^o&(t^n))+s[2]+606105819&4294967295,i=n+(t^(r=o+(i<<17&4294967295|i>>>15))&(o^t))+s[3]+3250441966&4294967295,i=t+(o^(n=r+(i<<22&4294967295|i>>>10))&(r^o))+s[4]+4118548399&4294967295,i=o+(r^(t=n+(i<<7&4294967295|i>>>25))&(n^r))+s[5]+1200080426&4294967295,o=t+(i<<12&4294967295|i>>>20),i=r+(n^o&(t^n))+s[6]+2821735955&4294967295,i=n+(t^(r=o+(i<<17&4294967295|i>>>15))&(o^t))+s[7]+4249261313&4294967295,i=t+(o^(n=r+(i<<22&4294967295|i>>>10))&(r^o))+s[8]+1770035416&4294967295,i=o+(r^(t=n+(i<<7&4294967295|i>>>25))&(n^r))+s[9]+2336552879&4294967295,o=t+(i<<12&4294967295|i>>>20),i=r+(n^o&(t^n))+s[10]+4294925233&4294967295,i=n+(t^(r=o+(i<<17&4294967295|i>>>15))&(o^t))+s[11]+2304563134&4294967295,i=t+(o^(n=r+(i<<22&4294967295|i>>>10))&(r^o))+s[12]+1804603682&4294967295,i=o+(r^(t=n+(i<<7&4294967295|i>>>25))&(n^r))+s[13]+4254626195&4294967295,o=t+(i<<12&4294967295|i>>>20),i=r+(n^o&(t^n))+s[14]+2792965006&4294967295,i=n+(t^(r=o+(i<<17&4294967295|i>>>15))&(o^t))+s[15]+1236535329&4294967295,i=t+(r^o&((n=r+(i<<22&4294967295|i>>>10))^r))+s[1]+4129170786&4294967295,i=o+(n^r&((t=n+(i<<5&4294967295|i>>>27))^n))+s[6]+3225465664&4294967295,o=t+(i<<9&4294967295|i>>>23),i=r+(t^n&(o^t))+s[11]+643717713&4294967295,i=n+(o^t&((r=o+(i<<14&4294967295|i>>>18))^o))+s[0]+3921069994&4294967295,i=t+(r^o&((n=r+(i<<20&4294967295|i>>>12))^r))+s[5]+3593408605&4294967295,i=o+(n^r&((t=n+(i<<5&4294967295|i>>>27))^n))+s[10]+38016083&4294967295,o=t+(i<<9&4294967295|i>>>23),i=r+(t^n&(o^t))+s[15]+3634488961&4294967295,i=n+(o^t&((r=o+(i<<14&4294967295|i>>>18))^o))+s[4]+3889429448&4294967295,i=t+(r^o&((n=r+(i<<20&4294967295|i>>>12))^r))+s[9]+568446438&4294967295,i=o+(n^r&((t=n+(i<<5&4294967295|i>>>27))^n))+s[14]+3275163606&4294967295,o=t+(i<<9&4294967295|i>>>23),i=r+(t^n&(o^t))+s[3]+4107603335&4294967295,i=n+(o^t&((r=o+(i<<14&4294967295|i>>>18))^o))+s[8]+1163531501&4294967295,i=t+(r^o&((n=r+(i<<20&4294967295|i>>>12))^r))+s[13]+2850285829&4294967295,i=o+(n^r&((t=n+(i<<5&4294967295|i>>>27))^n))+s[2]+4243563512&4294967295,o=t+(i<<9&4294967295|i>>>23),i=r+(t^n&(o^t))+s[7]+1735328473&4294967295,i=n+(o^t&((r=o+(i<<14&4294967295|i>>>18))^o))+s[12]+2368359562&4294967295,i=t+((n=r+(i<<20&4294967295|i>>>12))^r^o)+s[5]+4294588738&4294967295,i=o+((t=n+(i<<4&4294967295|i>>>28))^n^r)+s[8]+2272392833&4294967295,o=t+(i<<11&4294967295|i>>>21),i=r+(o^t^n)+s[11]+1839030562&4294967295,i=n+((r=o+(i<<16&4294967295|i>>>16))^o^t)+s[14]+4259657740&4294967295,i=t+((n=r+(i<<23&4294967295|i>>>9))^r^o)+s[1]+2763975236&4294967295,i=o+((t=n+(i<<4&4294967295|i>>>28))^n^r)+s[4]+1272893353&4294967295,o=t+(i<<11&4294967295|i>>>21),i=r+(o^t^n)+s[7]+4139469664&4294967295,i=n+((r=o+(i<<16&4294967295|i>>>16))^o^t)+s[10]+3200236656&4294967295,i=t+((n=r+(i<<23&4294967295|i>>>9))^r^o)+s[13]+681279174&4294967295,i=o+((t=n+(i<<4&4294967295|i>>>28))^n^r)+s[0]+3936430074&4294967295,o=t+(i<<11&4294967295|i>>>21),i=r+(o^t^n)+s[3]+3572445317&4294967295,i=n+((r=o+(i<<16&4294967295|i>>>16))^o^t)+s[6]+76029189&4294967295,i=t+((n=r+(i<<23&4294967295|i>>>9))^r^o)+s[9]+3654602809&4294967295,i=o+((t=n+(i<<4&4294967295|i>>>28))^n^r)+s[12]+3873151461&4294967295,o=t+(i<<11&4294967295|i>>>21),i=r+(o^t^n)+s[15]+530742520&4294967295,i=n+((r=o+(i<<16&4294967295|i>>>16))^o^t)+s[2]+3299628645&4294967295,i=t+(r^((n=r+(i<<23&4294967295|i>>>9))|~o))+s[0]+4096336452&4294967295,i=o+(n^((t=n+(i<<6&4294967295|i>>>26))|~r))+s[7]+1126891415&4294967295,o=t+(i<<10&4294967295|i>>>22),i=r+(t^(o|~n))+s[14]+2878612391&4294967295,i=n+(o^((r=o+(i<<15&4294967295|i>>>17))|~t))+s[5]+4237533241&4294967295,i=t+(r^((n=r+(i<<21&4294967295|i>>>11))|~o))+s[12]+1700485571&4294967295,i=o+(n^((t=n+(i<<6&4294967295|i>>>26))|~r))+s[3]+2399980690&4294967295,o=t+(i<<10&4294967295|i>>>22),i=r+(t^(o|~n))+s[10]+4293915773&4294967295,i=n+(o^((r=o+(i<<15&4294967295|i>>>17))|~t))+s[1]+2240044497&4294967295,i=t+(r^((n=r+(i<<21&4294967295|i>>>11))|~o))+s[8]+1873313359&4294967295,i=o+(n^((t=n+(i<<6&4294967295|i>>>26))|~r))+s[15]+4264355552&4294967295,o=t+(i<<10&4294967295|i>>>22),i=r+(t^(o|~n))+s[6]+2734768916&4294967295,i=n+(o^((r=o+(i<<15&4294967295|i>>>17))|~t))+s[13]+1309151649&4294967295,i=t+(r^((n=r+(i<<21&4294967295|i>>>11))|~o))+s[4]+4149444226&4294967295,i=o+(n^((t=n+(i<<6&4294967295|i>>>26))|~r))+s[11]+3174756917&4294967295,o=t+(i<<10&4294967295|i>>>22),i=r+(t^(o|~n))+s[2]+718787259&4294967295,i=n+(o^((r=o+(i<<15&4294967295|i>>>17))|~t))+s[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(r+(i<<21&4294967295|i>>>11))&4294967295,e.g[2]=e.g[2]+r&4294967295,e.g[3]=e.g[3]+o&4294967295}function s(e,t){this.h=t;const n=[];let s=!0;for(let r=e.length-1;r>=0;r--){const i=0|e[r];s&&i==t||(n[r]=i,s=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,s){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return t.prototype[n].apply(e,r)}}(t,function(){this.blockSize=-1}),t.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.v=function(e,t){void 0===t&&(t=e.length);const s=t-this.blockSize,r=this.C;let i=this.h,o=0;for(;o<t;){if(0==i)for(;o<=s;)n(this,e,o),o+=this.blockSize;if("string"==typeof e){for(;o<t;)if(r[i++]=e.charCodeAt(o++),i==this.blockSize){n(this,r),i=0;break}}else for(;o<t;)if(r[i++]=e[o++],i==this.blockSize){n(this,r),i=0;break}}this.h=i,this.o+=t},t.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var n=e.length-8;n<e.length;++n)e[n]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let s=0;s<32;s+=8)e[t++]=this.g[n]>>>s&255;return e};var r={};function i(e){return-128<=e&&e<128?function(e,t){var n=r;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new s([0|e],e<0?-1:0)}):new s([0|e],e<0?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(e<0)return d(o(-e));const t=[];let n=1;for(let s=0;e>=n;s++)t[s]=e/n|0,n*=4294967296;return new s(t,0)}var a=i(0),l=i(1),c=i(16777216);function u(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){const t=e.g.length,n=[];for(let s=0;s<t;s++)n[s]=~e.g[s];return new s(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(a,a);if(h(e))return t=g(d(e),t),new m(d(t.g),d(t.h));if(h(t))return t=g(e,d(t)),new m(d(t.g),t.h);if(e.g.length>30){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,s=t;s.l(e)<=0;)n=y(n),s=y(s);var r=v(n,1),i=v(s,1);for(s=v(s,2),n=v(n,2);!u(s);){var c=i.add(s);c.l(e)<=0&&(r=r.add(n),i=c),s=v(s,1),n=v(n,1)}return t=f(e,r.j(t)),new m(r,t)}for(r=a;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),s=(s=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,s-48),c=(i=o(n)).j(t);h(c)||c.l(e)>0;)c=(i=o(n-=s)).j(t);u(i)&&(i=l),r=r.add(i),e=f(e,c)}return new m(r,e)}function y(e){const t=e.g.length+1,n=[];for(let s=0;s<t;s++)n[s]=e.i(s)<<1|e.i(s-1)>>>31;return new s(n,e.h)}function v(e,t){const n=t>>5;t%=32;const r=e.g.length-n,i=[];for(let s=0;s<r;s++)i[s]=t>0?e.i(s+n)>>>t|e.i(s+n+1)<<32-t:e.i(s+n);return new s(i,e.h)}(e=s.prototype).m=function(){if(h(this))return-d(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){const s=this.i(n);e+=(s>=0?s:4294967296+s)*t,t*=4294967296}return e},e.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);const t=o(Math.pow(e,6));var n=this;let s="";for(;;){const r=g(n,t).g;let i=(((n=f(n,r.j(t))).g.length>0?n.g[0]:n.h)>>>0).toString(e);if(u(n=r))return i+s;for(;i.length<6;)i="0"+i;s=i+s}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){const t=Math.max(this.g.length,e.g.length),n=[];let r=0;for(let s=0;s<=t;s++){let t=r+(65535&this.i(s))+(65535&e.i(s)),i=(t>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);r=i>>>16,t&=65535,i&=65535,n[s]=i<<16|t}return new s(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(this.l(c)<0&&e.l(c)<0)return o(this.m()*e.m());const t=this.g.length+e.g.length,n=[];for(var r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(let t=0;t<e.g.length;t++){const s=this.i(r)>>>16,i=65535&this.i(r),o=e.i(t)>>>16,a=65535&e.i(t);n[2*r+2*t]+=i*a,p(n,2*r+2*t),n[2*r+2*t+1]+=s*a,p(n,2*r+2*t+1),n[2*r+2*t+1]+=i*o,p(n,2*r+2*t+1),n[2*r+2*t+2]+=s*o,p(n,2*r+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new s(n,0)},e.B=function(e){return g(this,e).h},e.and=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let s=0;s<t;s++)n[s]=this.i(s)&e.i(s);return new s(n,this.h&e.h)},e.or=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let s=0;s<t;s++)n[s]=this.i(s)|e.i(s);return new s(n,this.h|e.h)},e.xor=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let s=0;s<t;s++)n[s]=this.i(s)^e.i(s);return new s(n,this.h^e.h)},t.prototype.digest=t.prototype.A,t.prototype.reset=t.prototype.u,t.prototype.update=t.prototype.v,Ye=t,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=o,s.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');const s=o(Math.pow(n,8));let r=a;for(let a=0;a<t.length;a+=8){var i=Math.min(8,t.length-a);const e=parseInt(t.substring(a,a+i),n);i<8?(i=o(Math.pow(n,i)),r=r.j(i).add(o(e))):(r=r.j(s),r=r.add(o(e)))}return r},Qe=s}).apply(void 0!==Xe?Xe:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Je,Ze,et,tt,nt,st,rt,it,ot="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};(function(){var e,t=Object.defineProperty;var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof ot&&ot];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function s(e,s){if(s)e:{var r=n;e=e.split(".");for(var i=0;i<e.length-1;i++){var o=e[i];if(!(o in r))break e;r=r[o]}(s=s(i=r[e=e[e.length-1]]))!=i&&null!=s&&t(r,e,{configurable:!0,writable:!0,value:s})}}s("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push([t,e[t]]);return n}});var r=r||{},i=this||self;function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return(l=a).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,s){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return t.prototype[n].apply(e,r)}}var h="undefined"!=typeof AsyncContext&&"function"==typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function d(e){const t=e.length;if(t>0){const n=Array(t);for(let s=0;s<t;s++)n[s]=e[s];return n}return[]}function f(e,t){for(let s=1;s<arguments.length;s++){const t=arguments[s];var n=typeof t;if("array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length){n=e.length||0;const s=t.length||0;e.length=n+s;for(let r=0;r<s;r++)e[n+r]=t[r]}else e.push(t)}}function p(e){i.setTimeout(()=>{throw e},0)}function m(){var e=b;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var g=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new y,e=>e.reset());class y{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let v,w=!1,b=new class{constructor(){this.h=this.g=null}add(e,t){const n=g.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},S=()=>{const e=Promise.resolve(void 0);v=()=>{e.then(T)}};function T(){for(var e;e=m();){try{e.h.call(e.g)}catch(n){p(n)}var t=g;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}w=!1}function E(){this.u=this.u,this.C=this.C}function _(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}E.prototype.u=!1,E.prototype.dispose=function(){this.u||(this.u=!0,this.N())},E.prototype[Symbol.dispose]=function(){this.dispose()},E.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},_.prototype.h=function(){this.defaultPrevented=!0};var C=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function I(e){return/^[\s\xa0]*$/.test(e)}function A(e,t){_.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}u(A,_),A.prototype.init=function(e,t){const n=this.type=e.type,s=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement)),this.relatedTarget=t,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&A.Z.h.call(this)},A.prototype.h=function(){A.Z.h.call(this);const e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var x="closure_listenable_"+(1e6*Math.random()|0),k=0;function D(e,t,n,s,r){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!s,this.ha=r,this.key=++k,this.da=this.fa=!1}function N(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function M(e,t,n){for(const s in e)t.call(n,e[s],s,e)}function L(e){const t={};for(const n in e)t[n]=e[n];return t}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(e,t){let n,s;for(let r=1;r<arguments.length;r++){for(n in s=arguments[r],s)e[n]=s[n];for(let t=0;t<P.length;t++)n=P[t],Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}}function R(e){this.src=e,this.g={},this.h=0}function V(e,t){const n=t.type;if(n in e.g){var s,r=e.g[n],i=Array.prototype.indexOf.call(r,t,void 0);(s=i>=0)&&Array.prototype.splice.call(r,i,1),s&&(N(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function F(e,t,n,s){for(let r=0;r<e.length;++r){const i=e[r];if(!i.da&&i.listener==t&&i.capture==!!n&&i.ha==s)return r}return-1}R.prototype.add=function(e,t,n,s,r){const i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);const o=F(e,t,s,r);return o>-1?(t=e[o],n||(t.fa=!1)):((t=new D(t,this.src,i,!!s,r)).fa=n,e.push(t)),t};var B="closure_lm_"+(1e6*Math.random()|0),U={};function j(e,t,n,s,r){if(Array.isArray(t)){for(let i=0;i<t.length;i++)j(e,t[i],n,s,r);return null}return n=W(n),e&&e[x]?e.J(t,n,!!o(s)&&!!s.capture,r):function(e,t,n,s,r,i){if(!t)throw Error("Invalid event type");const a=o(r)?!!r.capture:!!r;let l=H(e);if(l||(e[B]=l=new R(e)),n=l.add(t,n,s,a,i),n.proxy)return n;if(s=function(){function e(n){return t.call(e.src,e.listener,n)}const t=$;return e}(),n.proxy=s,s.src=e,s.listener=n,e.addEventListener)C||(r=a),void 0===r&&(r=!1),e.addEventListener(t.toString(),s,r);else if(e.attachEvent)e.attachEvent(q(t.toString()),s);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(s)}return n}(e,t,n,!1,s,r)}function z(e,t,n,s,r){if(Array.isArray(t))for(var i=0;i<t.length;i++)z(e,t[i],n,s,r);else s=o(s)?!!s.capture:!!s,n=W(n),e&&e[x]?(e=e.i,(i=String(t).toString())in e.g&&((n=F(t=e.g[i],n,s,r))>-1&&(N(t[n]),Array.prototype.splice.call(t,n,1),0==t.length&&(delete e.g[i],e.h--)))):e&&(e=H(e))&&(t=e.g[t.toString()],e=-1,t&&(e=F(t,n,s,r)),(n=e>-1?t[e]:null)&&G(n))}function G(e){if("number"!=typeof e&&e&&!e.da){var t=e.src;if(t&&t[x])V(t.i,e);else{var n=e.type,s=e.proxy;t.removeEventListener?t.removeEventListener(n,s,e.capture):t.detachEvent?t.detachEvent(q(n),s):t.addListener&&t.removeListener&&t.removeListener(s),(n=H(t))?(V(n,e),0==n.h&&(n.src=null,t[B]=null)):N(e)}}}function q(e){return e in U?U[e]:U[e]="on"+e}function $(e,t){if(e.da)e=!0;else{t=new A(t,this);const n=e.listener,s=e.ha||e.src;e.fa&&G(e),e=n.call(s,t)}return e}function H(e){return(e=e[B])instanceof R?e:null}var K="__closure_events_fn_"+(1e9*Math.random()>>>0);function W(e){return"function"==typeof e?e:(e[K]||(e[K]=function(t){return e.handleEvent(t)}),e[K])}function Q(){E.call(this),this.i=new R(this),this.M=this,this.G=null}function Y(e,t){var n,s=e.G;if(s)for(n=[];s;s=s.G)n.push(s);if(e=e.M,s=t.type||t,"string"==typeof t)t=new _(t,e);else if(t instanceof _)t.target=t.target||e;else{var r=t;O(t=new _(s,e),r)}let i,o;if(r=!0,n)for(o=n.length-1;o>=0;o--)i=t.g=n[o],r=X(i,s,!0,t)&&r;if(i=t.g=e,r=X(i,s,!0,t)&&r,r=X(i,s,!1,t)&&r,n)for(o=0;o<n.length;o++)i=t.g=n[o],r=X(i,s,!1,t)&&r}function X(e,t,n,s){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let r=!0;for(let i=0;i<t.length;++i){const o=t[i];if(o&&!o.da&&o.capture==n){const t=o.listener,n=o.ha||o.src;o.fa&&V(e.i,o),r=!1!==t.call(n,s)&&r}}return r&&!s.defaultPrevented}function J(e){e.g=function(e,t){if("function"!=typeof e){if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return Number(t)>2147483647?-1:i.setTimeout(e,t||0)}(()=>{e.g=null,e.i&&(e.i=!1,J(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u(Q,E),Q.prototype[x]=!0,Q.prototype.removeEventListener=function(e,t,n,s){z(this,e,t,n,s)},Q.prototype.N=function(){if(Q.Z.N.call(this),this.i){var e=this.i;for(const t in e.g){const n=e.g[t];for(let e=0;e<n.length;e++)N(n[e]);delete e.g[t],e.h--}}this.G=null},Q.prototype.J=function(e,t,n,s){return this.i.add(String(e),t,!1,n,s)},Q.prototype.K=function(e,t,n,s){return this.i.add(String(e),t,!0,n,s)};class Z extends E{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:J(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ee(e){E.call(this),this.h=e,this.g={}}u(ee,E);var te=[];function ne(e){M(e.g,function(e,t){this.g.hasOwnProperty(t)&&G(e)},e),e.g={}}ee.prototype.N=function(){ee.Z.N.call(this),ne(this)},ee.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var se=i.JSON.stringify,re=i.JSON.parse,ie=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function oe(){}function ae(){}var le={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ce(){_.call(this,"d")}function ue(){_.call(this,"c")}u(ce,_),u(ue,_);var he={},de=null;function fe(){return de=de||new Q}function pe(e){_.call(this,he.Ia,e)}function me(e){const t=fe();Y(t,new pe(t))}function ge(e,t){_.call(this,he.STAT_EVENT,e),this.stat=t}function ye(e){const t=fe();Y(t,new ge(t,e))}function ve(e,t){_.call(this,he.Ja,e),this.size=t}function we(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){e()},t)}function be(){this.g=!0}function Se(e,t,n,s){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{const i=JSON.parse(t);if(i)for(e=0;e<i.length;e++)if(Array.isArray(i[e])){var n=i[e];if(!(n.length<2)){var s=n[1];if(Array.isArray(s)&&!(s.length<1)){var r=s[0];if("noop"!=r&&"stop"!=r&&"close"!=r)for(let e=1;e<s.length;e++)s[e]=""}}}return se(i)}catch(i){return t}}(e,n)+(s?" "+s:"")})}he.Ia="serverreachability",u(pe,_),he.STAT_EVENT="statevent",u(ge,_),he.Ja="timingevent",u(ve,_),be.prototype.ua=function(){this.g=!1},be.prototype.info=function(){};var Te,Ee={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},_e={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function Ce(){}function Ie(e){return encodeURIComponent(String(e))}function Ae(e){var t=1;e=e.split(":");const n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function xe(e,t,n,s){this.j=e,this.i=t,this.l=n,this.S=s||1,this.V=new ee(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ke}function ke(){this.i=null,this.g="",this.h=!1}u(Ce,oe),Ce.prototype.g=function(){return new XMLHttpRequest},Te=new Ce;var De={},Ne={};function Me(e,t,n){e.M=1,e.A=dt(at(t)),e.u=n,e.R=!0,Le(e,null)}function Le(e,t){e.F=Date.now(),Re(e),e.B=at(e.A);var n=e.B,s=e.S;Array.isArray(s)||(s=[String(s)]),It(n.i,"t",s),e.C=0,n=e.j.L,e.h=new ke,e.g=fn(e.j,n?t:null,!e.u),e.P>0&&(e.O=new Z(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,s=e.ba;var r="readystatechange";Array.isArray(r)||(r&&(te[0]=r.toString()),r=te);for(let i=0;i<r.length;i++){const e=j(n,r[i],s||t.handleEvent,!1,t.h||t);if(!e)break;t.g[e.key]=e}t=e.J?L(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),me(),function(e,t,n,s,r,i){e.info(function(){if(e.g)if(i){var o="",a=i.split("&");for(let e=0;e<a.length;e++){var l=a[e].split("=");if(l.length>1){const e=l[0];l=l[1];const t=e.split("_");o=t.length>=2&&"type"==t[1]?o+(e+"=")+l+"&":o+(e+"=redacted&")}}}else o=null;else o=i;return"XMLHTTP REQ ("+s+") [attempt "+r+"]: "+t+"\n"+n+"\n"+o})}(e.i,e.v,e.B,e.l,e.S,e.u)}function Pe(e){return!!e.g&&("GET"==e.v&&2!=e.M&&e.j.Aa)}function Oe(e,t){var n=e.C,s=t.indexOf("\n",n);return-1==s?Ne:(n=Number(t.substring(n,s)),isNaN(n)?De:(s+=1)+n>t.length?Ne:(t=t.slice(s,s+n),e.C=s+n,t))}function Re(e){e.T=Date.now()+e.H,Ve(e,e.H)}function Ve(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=we(l(e.aa,e),t)}function Fe(e){e.D&&(i.clearTimeout(e.D),e.D=null)}function Be(e){0==e.j.I||e.K||ln(e.j,e)}function Ue(e){Fe(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,ne(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function je(e,t){try{var n=e.j;if(0!=n.I&&(n.g==e||He(n.h,e)))if(!e.L&&He(n.h,e)&&3==n.I){try{var s=n.Ba.g.parse(t)}catch(u){s=null}if(Array.isArray(s)&&3==s.length){var r=s;if(0==r[0]){e:if(!n.v){if(n.g){if(!(n.g.F+3e3<e.F))break e;an(n),Yt(n)}sn(n),ye(18)}}else n.xa=r[1],0<n.xa-n.K&&r[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=we(l(n.Va,n),6e3));$e(n.h)<=1&&n.ta&&(n.ta=void 0)}else un(n,11)}else if((e.L||n.g==e)&&an(n),!I(t))for(r=n.Ba.g.parse(t),t=0;t<r.length;t++){let l=r[t];const u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],2==n.I)if("c"==l[0]){n.M=l[1],n.ba=l[2];const t=l[3];null!=t&&(n.ka=t,n.j.info("VER="+n.ka));const r=l[4];null!=r&&(n.za=r,n.j.info("SVER="+n.za));const u=l[5];null!=u&&"number"==typeof u&&u>0&&(s=1.5*u,n.O=s,n.j.info("backChannelRequestTimeoutMs_="+s)),s=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=s.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(Ke(i,i.h),i.h=null))}if(s.G){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(s.wa=e,ht(s.J,s.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info("Handshake RTT: "+n.T+"ms"));var o=e;if((s=n).na=dn(s,s.L?s.ba:null,s.W),o.L){We(s.h,o);var a=o,c=s.O;c&&(a.H=c),a.D&&(Fe(a),Re(a)),s.g=o}else nn(s);n.i.length>0&&Jt(n)}else"stop"!=l[0]&&"close"!=l[0]||un(n,7);else 3==n.I&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?un(n,7):Qt(n):"noop"!=l[0]&&n.l&&n.l.qa(l),n.A=0)}me()}catch(u){}}xe.prototype.ba=function(e){e=e.target;const t=this.O;t&&3==$t(e)?t.j():this.Y(e)},xe.prototype.Y=function(e){try{if(e==this.g)e:{const l=$t(this.g),c=this.g.ya();this.g.ca();if(!(l<3)&&(3!=l||this.g&&(this.h.h||this.g.la()||Ht(this.g)))){this.K||4!=l||7==c||me(),Fe(this);var t=this.g.ca();this.X=t;var n=function(e){if(!Pe(e))return e.g.la();const t=Ht(e.g);if(""===t)return"";let n="";const s=t.length,r=4==$t(e.g);if(!e.h.i){if("undefined"==typeof TextDecoder)return Ue(e),Be(e),"";e.h.i=new i.TextDecoder}for(let i=0;i<s;i++)e.h.h=!0,n+=e.h.i.decode(t[i],{stream:!(r&&i==s-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}(this);if(this.o=200==t,function(e,t,n,s,r,i,o){e.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+r+"]: "+t+"\n"+n+"\n"+i+" "+o})}(this.i,this.v,this.B,this.l,this.S,l,t),this.o){if(this.U&&!this.L){t:{if(this.g){var s,r=this.g;if((s=r.g?r.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(s)){var o=s;break t}}o=null}if(!(e=o)){this.o=!1,this.m=3,ye(12),Ue(this),Be(this);break e}Se(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,je(this,e)}if(this.R){let t;for(e=!0;!this.K&&this.C<n.length;){if(t=Oe(this,n),t==Ne){4==l&&(this.m=4,ye(14),e=!1),Se(this.i,this.l,null,"[Incomplete Response]");break}if(t==De){this.m=4,ye(15),Se(this.i,this.l,n,"[Invalid Chunk]"),e=!1;break}Se(this.i,this.l,t,null),je(this,t)}if(Pe(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=l||0!=n.length||this.h.h||(this.m=1,ye(16),e=!1),this.o=this.o&&e,e){if(n.length>0&&!this.W){this.W=!0;var a=this.j;a.g==this&&a.aa&&!a.P&&(a.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),rn(a),a.P=!0,ye(11))}}else Se(this.i,this.l,n,"[Invalid Chunked Response]"),Ue(this),Be(this)}else Se(this.i,this.l,n,null),je(this,n);4==l&&Ue(this),this.o&&!this.K&&(4==l?ln(this.j,this):(this.o=!1,Re(this)))}else(function(e){const t={};e=(e.g&&$t(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let s=0;s<e.length;s++){if(I(e[s]))continue;var n=Ae(e[s]);const r=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const i=t[r]||[];t[r]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==t&&n.indexOf("Unknown SID")>0?(this.m=3,ye(12)):(this.m=0,ye(13)),Ue(this),Be(this)}}}catch(l){}},xe.prototype.cancel=function(){this.K=!0,Ue(this)},xe.prototype.aa=function(){this.D=null;const e=Date.now();e-this.T>=0?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.B),2!=this.M&&(me(),ye(17)),Ue(this),this.m=2,Be(this)):Ve(this,this.T-e)};var ze=class{constructor(e,t){this.g=e,this.map=t}};function Ge(e){this.l=e||10,i.PerformanceNavigationTiming?e=(e=i.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function qe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function $e(e){return e.h?1:e.g?e.g.size:0}function He(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ke(e,t){e.g?e.g.add(t):e.h=t}function We(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Qe(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.G);return t}return d(e.i)}Ge.prototype.cancel=function(){if(this.i=Qe(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Ye=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xe(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof Xe?(this.l=e.l,lt(this,e.j),this.o=e.o,this.g=e.g,ct(this,e.u),this.h=e.h,ut(this,At(e.i)),this.m=e.m):e&&(t=String(e).match(Ye))?(this.l=!1,lt(this,t[1]||"",!0),this.o=ft(t[2]||""),this.g=ft(t[3]||"",!0),ct(this,t[4]),this.h=ft(t[5]||"",!0),ut(this,t[6]||"",!0),this.m=ft(t[7]||"")):(this.l=!1,this.i=new St(null,this.l))}function at(e){return new Xe(e)}function lt(e,t,n){e.j=n?ft(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ct(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function ut(e,t,n){t instanceof St?(e.i=t,function(e,t){t&&!e.j&&(Tt(e),e.i=null,e.g.forEach(function(e,t){const n=t.toLowerCase();t!=n&&(Et(this,t),It(this,n,e))},e)),e.j=t}(e.i,e.l)):(n||(t=pt(t,wt)),e.i=new St(t,e.l))}function ht(e,t,n){e.i.set(t,n)}function dt(e){return ht(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ft(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function pt(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,mt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function mt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Xe.prototype.toString=function(){const e=[];var t=this.j;t&&e.push(pt(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(pt(t,gt,!0),"@"),e.push(Ie(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(pt(n,"/"==n.charAt(0)?vt:yt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",pt(n,bt)),e.join("")},Xe.prototype.resolve=function(e){const t=at(this);let n=!!e.j;n?lt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=null!=e.u;var s=e.h;if(n)ct(t,e.u);else if(n=!!e.h){if("/"!=s.charAt(0))if(this.g&&!this.h)s="/"+s;else{var r=t.h.lastIndexOf("/");-1!=r&&(s=t.h.slice(0,r+1)+s)}if(".."==(r=s)||"."==r)s="";else if(-1!=r.indexOf("./")||-1!=r.indexOf("/.")){s=0==r.lastIndexOf("/",0),r=r.split("/");const e=[];for(let t=0;t<r.length;){const n=r[t++];"."==n?s&&t==r.length&&e.push(""):".."==n?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),s&&t==r.length&&e.push("")):(e.push(n),s=!0)}s=e.join("/")}else s=r}return n?t.h=s:n=""!==e.i.toString(),n?ut(t,At(e.i)):n=!!e.m,n&&(t.m=e.m),t};var gt=/[#\/\?@]/g,yt=/[#\?:]/g,vt=/[#\?]/g,wt=/[#\?@]/g,bt=/#/g;function St(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Tt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let n=0;n<e.length;n++){const s=e[n].indexOf("=");let r,i=null;s>=0?(r=e[n].substring(0,s),i=e[n].substring(s+1)):r=e[n],t(r,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Et(e,t){Tt(e),t=xt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function _t(e,t){return Tt(e),t=xt(e,t),e.g.has(t)}function Ct(e,t){Tt(e);let n=[];if("string"==typeof t)_t(e,t)&&(n=n.concat(e.g.get(xt(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}function It(e,t,n){Et(e,t),n.length>0&&(e.i=null,e.g.set(xt(e,t),d(n)),e.h+=n.length)}function At(e){const t=new St;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function xt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function kt(e,t,n,s,r){try{r&&(r.onload=null,r.onerror=null,r.onabort=null,r.ontimeout=null),s(n)}catch(i){}}function Dt(){this.g=new ie}function Nt(e){this.i=e.Sb||null,this.h=e.ab||!1}function Mt(e,t){Q.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function Lt(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function Pt(e){e.readyState=4,e.l=null,e.j=null,e.B=null,Ot(e)}function Ot(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Rt(e){let t="";return M(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Vt(e,t,n){e:{for(s in n){var s=!1;break e}s=!0}s||(n=Rt(n),"string"==typeof e?null!=n&&Ie(n):ht(e,t,n))}function Ft(e){Q.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(e=St.prototype).add=function(e,t){Tt(this),this.i=null,e=xt(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Tt(this),this.g.forEach(function(n,s){n.forEach(function(n){e.call(t,n,s,this)},this)},this)},e.set=function(e,t){return Tt(this),this.i=null,_t(this,e=xt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&(e=Ct(this,e)).length>0?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(let s=0;s<t.length;s++){var n=t[s];const r=Ie(n);n=Ct(this,n);for(let t=0;t<n.length;t++){let s=r;""!==n[t]&&(s+="="+Ie(n[t])),e.push(s)}}return this.i=e.join("&")},u(Nt,oe),Nt.prototype.g=function(){return new Mt(this.i,this.h)},u(Mt,Q),(e=Mt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,Ot(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||i).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,Pt(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ot(this)),this.g&&(this.readyState=3,Ot(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(void 0!==i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Lt(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Pt(this):Ot(this),3==this.readyState&&Lt(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,Pt(this))},e.Na=function(e){this.g&&(this.response=e,Pt(this))},e.ga=function(){this.g&&Pt(this)},e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Mt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(Ft,Q);var Bt=/^https?$/i,Ut=["POST","PUT"];function jt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,zt(e),qt(e)}function zt(e){e.A||(e.A=!0,Y(e,"complete"),Y(e,"error"))}function Gt(e){if(e.h&&void 0!==r)if(e.v&&4==$t(e))setTimeout(e.Ca.bind(e),0);else if(Y(e,"readystatechange"),4==$t(e)){e.h=!1;try{const r=e.ca();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){let t=String(e.D).match(Ye)[1]||null;!t&&i.self&&i.self.location&&(t=i.self.location.protocol.slice(0,-1)),s=!Bt.test(t?t.toLowerCase():"")}n=s}if(n)Y(e,"complete"),Y(e,"success");else{e.o=6;try{var o=$t(e)>2?e.g.statusText:""}catch(a){o=""}e.l=o+" ["+e.ca()+"]",zt(e)}}finally{qt(e)}}}function qt(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);const s=e.g;e.g=null,t||Y(e,"ready");try{s.onreadystatechange=null}catch(n){}}}function $t(e){return e.g?e.g.readyState:0}function Ht(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Kt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Wt(e){this.za=0,this.i=[],this.j=new be,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Kt("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Kt("baseRetryDelayMs",5e3,e),this.Za=Kt("retryDelaySeedMs",1e4,e),this.Ta=Kt("forwardChannelMaxRetries",2,e),this.va=Kt("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new Ge(e&&e.concurrentRequestLimit),this.Ba=new Dt,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function Qt(e){if(Xt(e),3==e.I){var t=e.V++,n=at(e.J);if(ht(n,"SID",e.M),ht(n,"RID",t),ht(n,"TYPE","terminate"),en(e,n),(t=new xe(e,e.j,t)).M=2,t.A=dt(at(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.A.toString(),"")}catch(s){}!n&&i.Image&&((new Image).src=t.A,n=!0),n||(t.g=fn(t.j,null),t.g.ea(t.A)),t.F=Date.now(),Re(t)}hn(e)}function Yt(e){e.g&&(rn(e),e.g.cancel(),e.g=null)}function Xt(e){Yt(e),e.v&&(i.clearTimeout(e.v),e.v=null),an(e),e.h.cancel(),e.m&&("number"==typeof e.m&&i.clearTimeout(e.m),e.m=null)}function Jt(e){if(!qe(e.h)&&!e.m){e.m=!0;var t=e.Ea;v||S(),w||(v(),w=!0),b.add(t,e),e.D=0}}function Zt(e,t){var n;n=t?t.l:e.V++;const s=at(e.J);ht(s,"SID",e.M),ht(s,"RID",n),ht(s,"AID",e.K),en(e,s),e.u&&e.o&&Vt(s,e.u,e.o),n=new xe(e,e.j,n,e.D+1),null===e.u&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=tn(e,n,1e3),n.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),Ke(e.h,n),Me(n,s,t)}function en(e,t){e.H&&M(e.H,function(e,n){ht(t,n,e)}),e.l&&M({},function(e,n){ht(t,n,e)})}function tn(e,t,n){n=Math.min(e.i.length,n);const s=e.l?l(e.l.Ka,e.l,e):null;e:{var r=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?n>0?(t=r[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let l=!0;for(let u=0;u<n;u++){var i=r[u].g;const n=r[u].map;if((i-=t)<0)t=Math.max(0,r[u].g-100),l=!1;else try{i="req"+i+"_"||"";try{var a=n instanceof Map?n:Object.entries(n);for(const[t,n]of a){let s=n;o(n)&&(s=se(n)),e.push(i+t+"="+encodeURIComponent(s))}}catch(c){throw e.push(i+"type="+encodeURIComponent("_badmap")),c}}catch(c){s&&s(n)}}if(l){a=e.join("&");break e}}a=void 0}return e=e.i.splice(0,n),t.G=e,a}function nn(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;v||S(),w||(v(),w=!0),b.add(t,e),e.A=0}}function sn(e){return!(e.g||e.v||e.A>=3)&&(e.Y++,e.v=we(l(e.Da,e),cn(e,e.A)),e.A++,!0)}function rn(e){null!=e.B&&(i.clearTimeout(e.B),e.B=null)}function on(e){e.g=new xe(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=at(e.na);ht(t,"RID","rpc"),ht(t,"SID",e.M),ht(t,"AID",e.K),ht(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&ht(t,"TO",e.ia),ht(t,"TYPE","xmlhttp"),en(e,t),e.u&&e.o&&Vt(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=dt(at(t)),n.u=null,n.R=!0,Le(n,e)}function an(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){an(e),rn(e),e.g=null;var s=2}else{if(!He(e.h,t))return;n=t.G,We(e.h,t),s=1}if(0!=e.I)if(t.o)if(1==s){n=t.u?t.u.length:0,t=Date.now()-t.F;var r=e.D;Y(s=fe(),new ve(s,n)),Jt(e)}else nn(e);else if(3==(r=t.m)||0==r&&t.X>0||!(1==s&&function(e,t){return!($e(e.h)>=e.h.j-(e.m?1:0)||(e.m?(e.i=t.G.concat(e.i),0):1==e.I||2==e.I||e.D>=(e.Sa?0:e.Ta)||(e.m=we(l(e.Ea,e,t),cn(e,e.D)),e.D++,0)))}(e,t)||2==s&&sn(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),r){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}function cn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.bb,e),s=e.Ua;const t=!s;s=new Xe(s||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||lt(s,"https"),dt(s),t?function(e,t){const n=new be;if(i.Image){const s=new Image;s.onload=c(kt,n,"TestLoadImage: loaded",!0,t,s),s.onerror=c(kt,n,"TestLoadImage: error",!1,t,s),s.onabort=c(kt,n,"TestLoadImage: abort",!1,t,s),s.ontimeout=c(kt,n,"TestLoadImage: timeout",!1,t,s),i.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=e}else t(!1)}(s.toString(),n):function(e,t){new be;const n=new AbortController,s=setTimeout(()=>{n.abort(),kt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(s),e.ok?kt(0,0,!0,t):kt(0,0,!1,t)}).catch(()=>{clearTimeout(s),kt(0,0,!1,t)})}(s.toString(),n)}else ye(2);e.I=0,e.l&&e.l.pa(t),hn(e),Xt(e)}function hn(e){if(e.I=0,e.ja=[],e.l){const t=Qe(e.h);0==t.length&&0==e.i.length||(f(e.ja,t),f(e.ja,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.oa()}}function dn(e,t,n){var s=n instanceof Xe?at(n):new Xe(n);if(""!=s.g)t&&(s.g=t+"."+s.g),ct(s,s.u);else{var r=i.location;s=r.protocol,t=t?t+"."+r.hostname:r.hostname,r=+r.port;const e=new Xe(null);s&&lt(e,s),t&&(e.g=t),r&&ct(e,r),n&&(e.h=n),s=e}return n=e.G,t=e.wa,n&&t&&ht(s,n,t),ht(s,"VER",e.ka),en(e,s),s}function fn(e,t,n){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Aa&&!e.ma?new Ft(new Nt({ab:n})):new Ft(e.ma)).Fa(e.L),t}function pn(){}function mn(){}function gn(e,t){Q.call(this),this.g=new Wt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!I(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!I(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new wn(this)}function yn(e){ce.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function vn(){ue.call(this),this.status=1}function wn(e){this.g=e}(e=Ft.prototype).Fa=function(e){this.H=e},e.ea=function(e,t,n,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Te.g(),this.g.onreadystatechange=h(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void jt(this,o)}if(e=n||"",n=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var r in s)n.set(r,s[r]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const e of s.keys())n.set(e,s.get(e))}s=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),r=i.FormData&&e instanceof i.FormData,!(Array.prototype.indexOf.call(Ut,t,void 0)>=0)||s||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(e),this.v=!1}catch(o){jt(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,Y(this,"complete"),Y(this,"abort"),qt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qt(this,!0)),Ft.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Gt(this):this.Xa())},e.Xa=function(){Gt(this)},e.isActive=function(){return!!this.g},e.ca=function(){try{return $t(this)>2?this.g.status:-1}catch(e){return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),re(t)}},e.ya=function(){return this.o},e.Ha=function(){return"string"==typeof this.l?this.l:String(this.l)},(e=Wt.prototype).ka=8,e.I=1,e.connect=function(e,t,n,s){ye(0),this.W=e,this.H=t||{},n&&void 0!==s&&(this.H.OSID=n,this.H.OAID=s),this.F=this.X,this.J=dn(this,null,this.W),Jt(this)},e.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const r=new xe(this,this.j,e);let i=this.o;if(this.U&&(i?(i=L(i),O(i,this.U)):i=this.U),null!==this.u||this.R||(r.J=i,i=null),this.S)e:{for(var t=0,n=0;n<this.i.length;n++){var s=this.i[n];if(void 0===(s="__data__"in s.map&&"string"==typeof(s=s.map.__data__)?s.length:void 0))break;if((t+=s)>4096){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,r,t),ht(n=at(this.J),"RID",e),ht(n,"CVER",22),this.G&&ht(n,"X-HTTP-Session-Id",this.G),en(this,n),i&&(this.R?t="headers="+Ie(Rt(i))+"&"+t:this.u&&Vt(n,this.u,i)),Ke(this.h,r),this.Ra&&ht(n,"TYPE","init"),this.S?(ht(n,"$req",t),ht(n,"SID","null"),r.U=!0,Me(r,n,null)):Me(r,n,t),this.I=2}}else 3==this.I&&(e?Zt(this,e):0==this.i.length||qe(this.h)||Zt(this))},e.Da=function(){if(this.v=null,on(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=we(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ye(10),Yt(this),on(this))},e.Va=function(){null!=this.C&&(this.C=null,Yt(this),sn(this),ye(19))},e.bb=function(e){e?(this.j.info("Successfully pinged google.com"),ye(2)):(this.j.info("Failed to ping google.com"),ye(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=pn.prototype).ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){},mn.prototype.g=function(e,t){return new gn(e,t)},u(gn,Q),gn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Qt(this.g)},gn.prototype.o=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=se(e),e=n);t.i.push(new ze(t.Ya++,e)),3==t.I&&Jt(t)},gn.prototype.N=function(){this.g.l=null,delete this.j,Qt(this.g),delete this.g,gn.Z.N.call(this)},u(yn,ce),u(vn,ue),u(wn,pn),wn.prototype.ra=function(){Y(this.g,"a")},wn.prototype.qa=function(e){Y(this.g,new yn(e))},wn.prototype.pa=function(e){Y(this.g,new vn)},wn.prototype.oa=function(){Y(this.g,"b")},mn.prototype.createWebChannel=mn.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,it=function(){return new mn},rt=function(){return fe()},st=he,nt={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ee.NO_ERROR=0,Ee.TIMEOUT=8,Ee.HTTP_ERROR=6,tt=Ee,_e.COMPLETE="complete",et=_e,ae.EventType=le,le.OPEN="a",le.CLOSE="b",le.ERROR="c",le.MESSAGE="d",Q.prototype.listen=Q.prototype.J,Ze=ae,Ft.prototype.listenOnce=Ft.prototype.K,Ft.prototype.getLastError=Ft.prototype.Ha,Ft.prototype.getLastErrorCode=Ft.prototype.ya,Ft.prototype.getStatus=Ft.prototype.ca,Ft.prototype.getResponseJson=Ft.prototype.La,Ft.prototype.getResponseText=Ft.prototype.la,Ft.prototype.send=Ft.prototype.ea,Ft.prototype.setWithCredentials=Ft.prototype.Fa,Je=Ft}).apply(void 0!==ot?ot:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});const at="@firebase/firestore",lt="4.9.2";class ct{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ct.UNAUTHENTICATED=new ct(null),ct.GOOGLE_CREDENTIALS=new ct("google-credentials-uid"),ct.FIRST_PARTY=new ct("first-party-uid"),ct.MOCK_USER=new ct("mock-user");let ut="12.3.0";const ht=new O("@firebase/firestore");function dt(){return ht.logLevel}function ft(e,...t){if(ht.logLevel<=k.DEBUG){const n=t.map(gt);ht.debug(`Firestore (${ut}): ${e}`,...n)}}function pt(e,...t){if(ht.logLevel<=k.ERROR){const n=t.map(gt);ht.error(`Firestore (${ut}): ${e}`,...n)}}function mt(e,...t){if(ht.logLevel<=k.WARN){const n=t.map(gt);ht.warn(`Firestore (${ut}): ${e}`,...n)}}function gt(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(n){return e}var t}function yt(e,t,n){let s="Unexpected state";"string"==typeof t?s=t:n=t,vt(e,s,n)}function vt(e,t,n){let s=`FIRESTORE (${ut}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(void 0!==n)try{s+=" CONTEXT: "+JSON.stringify(n)}catch(r){s+=" CONTEXT: "+n}throw pt(s),new Error(s)}function wt(e,t,n,s){let r="Unexpected state";"string"==typeof n?r=n:s=n,e||vt(t,r,s)}function bt(e,t){return e}const St={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Tt extends w{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Et{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class _t{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ct{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ct.UNAUTHENTICATED))}shutdown(){}}class It{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class At{constructor(e){this.t=e,this.currentUser=ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){wt(void 0===this.o,42304);let n=this.i;const s=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let r=new Et;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Et,e.enqueueRetryable(()=>s(this.currentUser))};const i=()=>{const t=r;e.enqueueRetryable(async()=>{await t.promise,await s(this.currentUser)})},o=e=>{ft("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(ft("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Et)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(ft("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(wt("string"==typeof t.accessToken,31837,{l:t}),new _t(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return wt(null===e||"string"==typeof e,2055,{h:e}),new ct(e)}}class xt{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=ct.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class kt{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new xt(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Dt{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Nt{constructor(e,t){var n;this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,null!=(n=e)&&void 0!==n.settings&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){wt(void 0===this.o,3512);const n=e=>{null!=e.error&&ft("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.m;return this.m=e.token,ft("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const s=e=>{ft("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>s(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?s(e):ft("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Dt(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(wt("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new Dt(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Mt(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let s=0;s<e;s++)n[s]=Math.floor(256*Math.random());return n}class Lt{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Mt(40);for(let s=0;s<n.length;++s)t.length<20&&n[s]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[s]%62))}return t}}function Pt(e,t){return e<t?-1:e>t?1:0}function Ot(e,t){const n=Math.min(e.length,t.length);for(let s=0;s<n;s++){const n=e.charAt(s),r=t.charAt(s);if(n!==r)return Ft(n)===Ft(r)?Pt(n,r):Ft(n)?1:-1}return Pt(e.length,t.length)}const Rt=55296,Vt=57343;function Ft(e){const t=e.charCodeAt(0);return t>=Rt&&t<=Vt}function Bt(e,t,n){return e.length===t.length&&e.every((e,s)=>n(e,t[s]))}const Ut="__name__";class jt{constructor(e,t,n){void 0===t?t=0:t>e.length&&yt(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&yt(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===jt.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof jt?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let s=0;s<n;s++){const n=jt.compareSegments(e.get(s),t.get(s));if(0!==n)return n}return Pt(e.length,t.length)}static compareSegments(e,t){const n=jt.isNumericId(e),s=jt.isNumericId(t);return n&&!s?-1:!n&&s?1:n&&s?jt.extractNumericId(e).compare(jt.extractNumericId(t)):Ot(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Qe.fromString(e.substring(4,e.length-2))}}class zt extends jt{construct(e,t,n){return new zt(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Tt(St.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(e=>e.length>0))}return new zt(t)}static emptyPath(){return new zt([])}}const Gt=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qt extends jt{construct(e,t,n){return new qt(e,t,n)}static isValidIdentifier(e){return Gt.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Ut}static keyField(){return new qt([Ut])}static fromServerFormat(e){const t=[];let n="",s=0;const r=()=>{if(0===n.length)throw new Tt(St.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let i=!1;for(;s<e.length;){const t=e[s];if("\\"===t){if(s+1===e.length)throw new Tt(St.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[s+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Tt(St.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,s+=2}else"`"===t?(i=!i,s++):"."!==t||i?(n+=t,s++):(r(),s++)}if(r(),i)throw new Tt(St.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qt(t)}static emptyPath(){return new qt([])}}class $t{constructor(e){this.path=e}static fromPath(e){return new $t(zt.fromString(e))}static fromName(e){return new $t(zt.fromString(e).popFirst(5))}static empty(){return new $t(zt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===zt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return zt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $t(new zt(e.slice()))}}function Ht(e,t,n){if(!n)throw new Tt(St.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Kt(e){if(!$t.isDocumentKey(e))throw new Tt(St.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Wt(e){if($t.isDocumentKey(e))throw new Tt(St.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Qt(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function Yt(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const n=(t=e).constructor?t.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var t;return"function"==typeof e?"a function":yt(12329,{type:typeof e})}function Xt(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Tt(St.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Yt(e);throw new Tt(St.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function Jt(e,t){const n={typeString:e};return t&&(n.value=t),n}function Zt(e,t){if(!Qt(e))throw new Tt(St.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in t)if(t[s]){const r=t[s].typeString,i="value"in t[s]?{value:t[s].value}:void 0;if(!(s in e)){n=`JSON missing required field: '${s}'`;break}const o=e[s];if(r&&typeof o!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(void 0!==i&&o!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new Tt(St.INVALID_ARGUMENT,n);return!0}const en=-62135596800,tn=1e6;class nn{static now(){return nn.fromMillis(Date.now())}static fromDate(e){return nn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*tn);return new nn(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Tt(St.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Tt(St.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<en)throw new Tt(St.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Tt(St.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/tn}_compareTo(e){return this.seconds===e.seconds?Pt(this.nanoseconds,e.nanoseconds):Pt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:nn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Zt(e,nn._jsonSchema))return new nn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-en;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}nn._jsonSchemaVersion="firestore/timestamp/1.0",nn._jsonSchema={type:Jt("string",nn._jsonSchemaVersion),seconds:Jt("number"),nanoseconds:Jt("number")};class sn{static fromTimestamp(e){return new sn(e)}static min(){return new sn(new nn(0,0))}static max(){return new sn(new nn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function rn(e){return new on(e.readTime,e.key,-1)}class on{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new on(sn.min(),$t.empty(),-1)}static max(){return new on(sn.max(),$t.empty(),-1)}}function an(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=$t.comparator(e.documentKey,t.documentKey),0!==n?n:Pt(e.largestBatchId,t.largestBatchId))}class ln{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function cn(e){if(e.code!==St.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==e.message)throw e;ft("LocalStore","Unexpectedly lost primary lease")}class un{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&yt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new un((n,s)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,s)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof un?t:un.resolve(t)}catch(t){return un.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):un.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):un.reject(t)}static resolve(e){return new un((t,n)=>{t(e)})}static reject(e){return new un((t,n)=>{n(e)})}static waitFor(e){return new un((t,n)=>{let s=0,r=0,i=!1;e.forEach(e=>{++s,e.next(()=>{++r,i&&r===s&&t()},e=>n(e))}),i=!0,r===s&&t()})}static or(e){let t=un.resolve(!1);for(const n of e)t=t.next(e=>e?un.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,s)=>{n.push(t.call(this,e,s))}),this.waitFor(n)}static mapArray(e,t){return new un((n,s)=>{const r=e.length,i=new Array(r);let o=0;for(let a=0;a<r;a++){const l=a;t(e[l]).next(e=>{i[l]=e,++o,o===r&&n(i)},e=>s(e))}})}static doWhile(e,t){return new un((n,s)=>{const r=()=>{!0===e()?t().next(()=>{r()},s):n()};r()})}}function hn(e){return"IndexedDbTransactionError"===e.name}class dn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}dn.ce=-1;function fn(e){return null==e}function pn(e){return 0===e&&1/e==-1/0}function mn(e,t){let n=t;const s=e.length;for(let r=0;r<s;r++){const t=e.charAt(r);switch(t){case"\0":n+="";break;case"":n+="";break;default:n+=t}}return n}function gn(e){return e+""}function yn(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function vn(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function wn(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class bn{constructor(e,t){this.comparator=e,this.root=t||Tn.EMPTY}insert(e,t){return new bn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Tn.BLACK,null,null))}remove(e){return new bn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Tn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(0===s)return t+n.left.size;s<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sn(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sn(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sn(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sn(this.root,e,this.comparator,!0)}}class Sn{constructor(e,t,n,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?n(e.key,t):1,t&&s&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(0===r){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Tn{constructor(e,t,n,s,r){this.key=e,this.value=t,this.color=null!=n?n:Tn.RED,this.left=null!=s?s:Tn.EMPTY,this.right=null!=r?r:Tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,s,r){return new Tn(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=s?s:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let s=this;const r=n(e,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(e,t,n),null):0===r?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Tn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return Tn.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw yt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw yt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw yt(27949);return e+(this.isRed()?0:1)}}Tn.EMPTY=null,Tn.RED=!0,Tn.BLACK=!1,Tn.EMPTY=new class{constructor(){this.size=0}get key(){throw yt(57766)}get value(){throw yt(16141)}get color(){throw yt(16727)}get left(){throw yt(29726)}get right(){throw yt(36894)}copy(e,t,n,s,r){return this}insert(e,t,n){return new Tn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class En{constructor(e){this.comparator=e,this.data=new bn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new _n(this.data.getIterator())}getIteratorFrom(e){return new _n(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof En))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,s=n.getNext().key;if(0!==this.comparator(e,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new En(this.comparator);return t.data=e,t}}class _n{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Cn{constructor(e){this.fields=e,e.sort(qt.comparator)}static empty(){return new Cn([])}unionWith(e){let t=new En(qt.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Cn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Bt(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class In extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class An{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new In("Invalid base64 string: "+t):t}}(e);return new An(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new An(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}An.EMPTY_BYTE_STRING=new An("");const xn=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function kn(e){if(wt(!!e,39018),"string"==typeof e){let t=0;const n=xn.exec(e);if(wt(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const s=new Date(e);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:Dn(e.seconds),nanos:Dn(e.nanos)}}function Dn(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Nn(e){return"string"==typeof e?An.fromBase64String(e):An.fromUint8Array(e)}const Mn="server_timestamp",Ln="__type__",Pn="__previous_value__",On="__local_write_time__";function Rn(e){const t=(e?.mapValue?.fields||{})[Ln]?.stringValue;return t===Mn}function Vn(e){const t=e.mapValue.fields[Pn];return Rn(t)?Vn(t):t}function Fn(e){const t=kn(e.mapValue.fields[On].timestampValue);return new nn(t.seconds,t.nanos)}class Bn{constructor(e,t,n,s,r,i,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=s,this.ssl=r,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l,this.isUsingEmulator=c}}const Un="(default)";class jn{constructor(e,t){this.projectId=e,this.database=t||Un}static empty(){return new jn("","")}get isDefaultDatabase(){return this.database===Un}isEqual(e){return e instanceof jn&&e.projectId===this.projectId&&e.database===this.database}}const zn="__type__",Gn="__max__",qn={},$n="__vector__",Hn="value";function Kn(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Rn(e)?4:function(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Gn}(e)?9007199254740991:function(e){const t=(e?.mapValue?.fields||{})[zn]?.stringValue;return t===$n}(e)?10:11:yt(28295,{value:e})}function Wn(e,t){if(e===t)return!0;const n=Kn(e);if(n!==Kn(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Fn(e).isEqual(Fn(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=kn(e.timestampValue),s=kn(t.timestampValue);return n.seconds===s.seconds&&n.nanos===s.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return s=t,Nn(e.bytesValue).isEqual(Nn(s.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Dn(e.geoPointValue.latitude)===Dn(t.geoPointValue.latitude)&&Dn(e.geoPointValue.longitude)===Dn(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Dn(e.integerValue)===Dn(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Dn(e.doubleValue),s=Dn(t.doubleValue);return n===s?pn(n)===pn(s):isNaN(n)&&isNaN(s)}return!1}(e,t);case 9:return Bt(e.arrayValue.values||[],t.arrayValue.values||[],Wn);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},s=t.mapValue.fields||{};if(yn(n)!==yn(s))return!1;for(const r in n)if(n.hasOwnProperty(r)&&(void 0===s[r]||!Wn(n[r],s[r])))return!1;return!0}(e,t);default:return yt(52216,{left:e})}var s}function Qn(e,t){return void 0!==(e.values||[]).find(e=>Wn(e,t))}function Yn(e,t){if(e===t)return 0;const n=Kn(e),s=Kn(t);if(n!==s)return Pt(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Pt(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Dn(e.integerValue||e.doubleValue),s=Dn(t.integerValue||t.doubleValue);return n<s?-1:n>s?1:n===s?0:isNaN(n)?isNaN(s)?0:-1:1}(e,t);case 3:return Xn(e.timestampValue,t.timestampValue);case 4:return Xn(Fn(e),Fn(t));case 5:return Ot(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Nn(e),s=Nn(t);return n.compareTo(s)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),s=t.split("/");for(let r=0;r<n.length&&r<s.length;r++){const e=Pt(n[r],s[r]);if(0!==e)return e}return Pt(n.length,s.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Pt(Dn(e.latitude),Dn(t.latitude));return 0!==n?n:Pt(Dn(e.longitude),Dn(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Jn(e.arrayValue,t.arrayValue);case 10:return function(e,t){const n=e.fields||{},s=t.fields||{},r=n[Hn]?.arrayValue,i=s[Hn]?.arrayValue,o=Pt(r?.values?.length||0,i?.values?.length||0);return 0!==o?o:Jn(r,i)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===qn&&t===qn)return 0;if(e===qn)return 1;if(t===qn)return-1;const n=e.fields||{},s=Object.keys(n),r=t.fields||{},i=Object.keys(r);s.sort(),i.sort();for(let o=0;o<s.length&&o<i.length;++o){const e=Ot(s[o],i[o]);if(0!==e)return e;const t=Yn(n[s[o]],r[i[o]]);if(0!==t)return t}return Pt(s.length,i.length)}(e.mapValue,t.mapValue);default:throw yt(23264,{he:n})}}function Xn(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Pt(e,t);const n=kn(e),s=kn(t),r=Pt(n.seconds,s.seconds);return 0!==r?r:Pt(n.nanos,s.nanos)}function Jn(e,t){const n=e.values||[],s=t.values||[];for(let r=0;r<n.length&&r<s.length;++r){const e=Yn(n[r],s[r]);if(e)return e}return Pt(n.length,s.length)}function Zn(e){return es(e)}function es(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=kn(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Nn(e.bytesValue).toBase64():"referenceValue"in e?function(e){return $t.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const s of e.values||[])n?n=!1:t+=",",t+=es(s);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",s=!0;for(const r of t)s?s=!1:n+=",",n+=`${r}:${es(e.fields[r])}`;return n+"}"}(e.mapValue):yt(61005,{value:e})}function ts(e){switch(Kn(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Vn(e);return t?16+ts(t):16;case 5:return 2*e.stringValue.length;case 6:return Nn(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return(e.arrayValue.values||[]).reduce((e,t)=>e+ts(t),0);case 10:case 11:return function(e){let t=0;return vn(e.fields,(e,n)=>{t+=e.length+ts(n)}),t}(e.mapValue);default:throw yt(13486,{value:e})}}function ns(e){return!!e&&"integerValue"in e}function ss(e){return!!e&&"arrayValue"in e}function rs(e){return!!e&&"nullValue"in e}function is(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function os(e){return!!e&&"mapValue"in e}function as(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return vn(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=as(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=as(e.arrayValue.values[n]);return t}return{...e}}class ls{constructor(e){this.value=e}static empty(){return new ls({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!os(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=as(t)}setAll(e){let t=qt.emptyPath(),n={},s=[];e.forEach((e,r)=>{if(!t.isImmediateParentOf(r)){const e=this.getFieldsMap(t);this.applyChanges(e,n,s),n={},s=[],t=r.popLast()}e?n[r.lastSegment()]=as(e):s.push(r.lastSegment())});const r=this.getFieldsMap(t);this.applyChanges(r,n,s)}delete(e){const t=this.field(e.popLast());os(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=t.mapValue.fields[e.get(n)];os(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,n){vn(t,(t,n)=>e[t]=n);for(const s of n)delete e[s]}clone(){return new ls(as(this.value))}}function cs(e){const t=[];return vn(e.fields,(e,n)=>{const s=new qt([e]);if(os(n)){const e=cs(n.mapValue).fields;if(0===e.length)t.push(s);else for(const n of e)t.push(s.child(n))}else t.push(s)}),new Cn(t)}class us{constructor(e,t,n,s,r,i,o){this.key=e,this.documentType=t,this.version=n,this.readTime=s,this.createTime=r,this.data=i,this.documentState=o}static newInvalidDocument(e){return new us(e,0,sn.min(),sn.min(),sn.min(),ls.empty(),0)}static newFoundDocument(e,t,n,s){return new us(e,1,t,sn.min(),n,s,0)}static newNoDocument(e,t){return new us(e,2,t,sn.min(),sn.min(),ls.empty(),0)}static newUnknownDocument(e,t){return new us(e,3,t,sn.min(),sn.min(),ls.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(sn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ls.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ls.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=sn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof us&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new us(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class hs{constructor(e,t){this.position=e,this.inclusive=t}}function ds(e,t,n){let s=0;for(let r=0;r<e.position.length;r++){const i=t[r],o=e.position[r];if(s=i.field.isKeyField()?$t.comparator($t.fromName(o.referenceValue),n.key):Yn(o,n.data.field(i.field)),"desc"===i.dir&&(s*=-1),0!==s)break}return s}function fs(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Wn(e.position[n],t.position[n]))return!1;return!0}class ps{constructor(e,t="asc"){this.field=e,this.dir=t}}function ms(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class gs{}class ys extends gs{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new _s(e,t,n):"array-contains"===t?new xs(e,n):"in"===t?new ks(e,n):"not-in"===t?new Ds(e,n):"array-contains-any"===t?new Ns(e,n):new ys(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Cs(e,n):new Is(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Yn(t,this.value)):null!==t&&Kn(this.value)===Kn(t)&&this.matchesComparison(Yn(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return yt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vs extends gs{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new vs(e,t)}matches(e){return ws(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ws(e){return"and"===e.op}function bs(e){return function(e){for(const t of e.filters)if(t instanceof vs)return!1;return!0}(e)&&ws(e)}function Ss(e){if(e instanceof ys)return e.field.canonicalString()+e.op.toString()+Zn(e.value);if(bs(e))return e.filters.map(e=>Ss(e)).join(",");{const t=e.filters.map(e=>Ss(e)).join(",");return`${e.op}(${t})`}}function Ts(e,t){return e instanceof ys?(n=e,(s=t)instanceof ys&&n.op===s.op&&n.field.isEqual(s.field)&&Wn(n.value,s.value)):e instanceof vs?function(e,t){return t instanceof vs&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,s)=>e&&Ts(n,t.filters[s]),!0)}(e,t):void yt(19439);var n,s}function Es(e){return e instanceof ys?`${(t=e).field.canonicalString()} ${t.op} ${Zn(t.value)}`:e instanceof vs?function(e){return e.op.toString()+" {"+e.getFilters().map(Es).join(" ,")+"}"}(e):"Filter";var t}class _s extends ys{constructor(e,t,n){super(e,t,n),this.key=$t.fromName(n.referenceValue)}matches(e){const t=$t.comparator(e.key,this.key);return this.matchesComparison(t)}}class Cs extends ys{constructor(e,t){super(e,"in",t),this.keys=As("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Is extends ys{constructor(e,t){super(e,"not-in",t),this.keys=As("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function As(e,t){return(t.arrayValue?.values||[]).map(e=>$t.fromName(e.referenceValue))}class xs extends ys{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ss(t)&&Qn(t.arrayValue,this.value)}}class ks extends ys{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Qn(this.value.arrayValue,t)}}class Ds extends ys{constructor(e,t){super(e,"not-in",t)}matches(e){if(Qn(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Qn(this.value.arrayValue,t)}}class Ns extends ys{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ss(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Qn(this.value.arrayValue,e))}}class Ms{constructor(e,t=null,n=[],s=[],r=null,i=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=s,this.limit=r,this.startAt=i,this.endAt=o,this.Te=null}}function Ls(e,t=null,n=[],s=[],r=null,i=null,o=null){return new Ms(e,t,n,s,r,i,o)}function Ps(e){const t=bt(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Ss(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>{return(t=e).field.canonicalString()+t.dir;var t}).join(","),fn(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Zn(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Zn(e)).join(",")),t.Te=e}return t.Te}function Os(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!ms(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Ts(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!fs(e.startAt,t.startAt)&&fs(e.endAt,t.endAt)}function Rs(e){return $t.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Vs{constructor(e,t=null,n=[],s=[],r=null,i="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=s,this.limit=r,this.limitType=i,this.startAt=o,this.endAt=a,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Fs(e){return new Vs(e)}function Bs(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Us(e){const t=bt(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(e){let t=new En(qt.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t})(t).forEach(s=>{e.has(s.canonicalString())||s.isKeyField()||t.Ie.push(new ps(s,n))}),e.has(qt.keyField().canonicalString())||t.Ie.push(new ps(qt.keyField(),n))}return t.Ie}function js(e){const t=bt(e);return t.Ee||(t.Ee=function(e,t){if("F"===e.limitType)return Ls(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new ps(e.field,t)});const n=e.endAt?new hs(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new hs(e.startAt.position,e.startAt.inclusive):null;return Ls(e.path,e.collectionGroup,t,e.filters,e.limit,n,s)}}(t,Us(e))),t.Ee}function zs(e,t,n){return new Vs(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Gs(e,t){return Os(js(e),js(t))&&e.limitType===t.limitType}function qs(e){return`${Ps(js(e))}|lt:${e.limitType}`}function $s(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>Es(e)).join(", ")}]`),fn(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>{return`${(t=e).field.canonicalString()} (${t.dir})`;var t}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Zn(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Zn(e)).join(",")),`Target(${t})`}(js(e))}; limitType=${e.limitType})`}function Hs(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):$t.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Us(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&(s=t,!((n=e).startAt&&!function(e,t,n){const s=ds(e,t,n);return e.inclusive?s<=0:s<0}(n.startAt,Us(n),s)||n.endAt&&!function(e,t,n){const s=ds(e,t,n);return e.inclusive?s>=0:s>0}(n.endAt,Us(n),s)));var n,s}function Ks(e){return(t,n)=>{let s=!1;for(const r of Us(e)){const e=Ws(r,t,n);if(0!==e)return e;s=s||r.field.isKeyField()}return 0}}function Ws(e,t,n){const s=e.field.isKeyField()?$t.comparator(t.key,n.key):function(e,t,n){const s=t.data.field(e),r=n.data.field(e);return null!==s&&null!==r?Yn(s,r):yt(42886)}(e.field,t,n);switch(e.dir){case"asc":return s;case"desc":return-1*s;default:return yt(19790,{direction:e.dir})}}class Qs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[s,r]of n)if(this.equalsFn(s,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),s=this.inner[n];if(void 0===s)return this.inner[n]=[[e,t]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return void(s[r]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return 1===n.length?delete this.inner[t]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){vn(this.inner,(t,n)=>{for(const[s,r]of n)e(s,r)})}isEmpty(){return wn(this.inner)}size(){return this.innerSize}}const Ys=new bn($t.comparator);function Xs(){return Ys}const Js=new bn($t.comparator);function Zs(...e){let t=Js;for(const n of e)t=t.insert(n.key,n);return t}function er(e){let t=Js;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function tr(){return sr()}function nr(){return sr()}function sr(){return new Qs(e=>e.toString(),(e,t)=>e.isEqual(t))}const rr=new bn($t.comparator),ir=new En($t.comparator);function or(...e){let t=ir;for(const n of e)t=t.add(n);return t}const ar=new En(Pt);function lr(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pn(t)?"-0":t}}function cr(e){return{integerValue:""+e}}function ur(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!pn(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}(t)?cr(t):lr(e,t)}class hr{constructor(){this._=void 0}}function dr(e,t,n){return e instanceof mr?function(e,t){const n={fields:{[Ln]:{stringValue:Mn},[On]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Rn(t)&&(t=Vn(t)),t&&(n.fields[Pn]=t),{mapValue:n}}(n,t):e instanceof gr?yr(e,t):e instanceof vr?wr(e,t):function(e,t){const n=pr(e,t),s=Sr(n)+Sr(e.Ae);return ns(n)&&ns(e.Ae)?cr(s):lr(e.serializer,s)}(e,t)}function fr(e,t,n){return e instanceof gr?yr(e,t):e instanceof vr?wr(e,t):n}function pr(e,t){return e instanceof br?ns(n=t)||(s=n)&&"doubleValue"in s?t:{integerValue:0}:null;var n,s}class mr extends hr{}class gr extends hr{constructor(e){super(),this.elements=e}}function yr(e,t){const n=Tr(t);for(const s of e.elements)n.some(e=>Wn(e,s))||n.push(s);return{arrayValue:{values:n}}}class vr extends hr{constructor(e){super(),this.elements=e}}function wr(e,t){let n=Tr(t);for(const s of e.elements)n=n.filter(e=>!Wn(e,s));return{arrayValue:{values:n}}}class br extends hr{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Sr(e){return Dn(e.integerValue||e.doubleValue)}function Tr(e){return ss(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Er{constructor(e,t){this.version=e,this.transformResults=t}}class _r{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _r}static exists(e){return new _r(void 0,e)}static updateTime(e){return new _r(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cr(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Ir{}function Ar(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Vr(e.key,_r.none()):new Mr(e.key,e.data,_r.none());{const n=e.data,s=ls.empty();let r=new En(qt.comparator);for(let e of t.fields)if(!r.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?s.delete(e):s.set(e,t),r=r.add(e)}return new Lr(e.key,s,new Cn(r.toArray()),_r.none())}}function xr(e,t,n){var s;e instanceof Mr?function(e,t,n){const s=e.value.clone(),r=Or(e.fieldTransforms,t,n.transformResults);s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):e instanceof Lr?function(e,t,n){if(!Cr(e.precondition,t))return void t.convertToUnknownDocument(n.version);const s=Or(e.fieldTransforms,t,n.transformResults),r=t.data;r.setAll(Pr(e)),r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):(s=n,t.convertToNoDocument(s.version).setHasCommittedMutations())}function kr(e,t,n,s){return e instanceof Mr?function(e,t,n,s){if(!Cr(e.precondition,t))return n;const r=e.value.clone(),i=Rr(e.fieldTransforms,s,t);return r.setAll(i),t.convertToFoundDocument(t.version,r).setHasLocalMutations(),null}(e,t,n,s):e instanceof Lr?function(e,t,n,s){if(!Cr(e.precondition,t))return n;const r=Rr(e.fieldTransforms,s,t),i=t.data;return i.setAll(Pr(e)),i.setAll(r),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,s):(r=t,i=n,Cr(e.precondition,r)?(r.convertToNoDocument(r.version).setHasLocalMutations(),null):i);var r,i}function Dr(e,t){let n=null;for(const s of e.fieldTransforms){const e=t.data.field(s.field),r=pr(s.transform,e||null);null!=r&&(null===n&&(n=ls.empty()),n.set(s.field,r))}return n||null}function Nr(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(n=e.fieldTransforms,s=t.fieldTransforms,!!(void 0===n&&void 0===s||n&&s&&Bt(n,s,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&(n=e.transform,s=t.transform,n instanceof gr&&s instanceof gr||n instanceof vr&&s instanceof vr?Bt(n.elements,s.elements,Wn):n instanceof br&&s instanceof br?Wn(n.Ae,s.Ae):n instanceof mr&&s instanceof mr);var n,s}(e,t)))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask)));var n,s}class Mr extends Ir{constructor(e,t,n,s=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Lr extends Ir{constructor(e,t,n,s,r=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function Pr(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=e.data.field(n);t.set(n,s)}}),t}function Or(e,t,n){const s=new Map;wt(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let r=0;r<n.length;r++){const i=e[r],o=i.transform,a=t.data.field(i.field);s.set(i.field,fr(o,a,n[r]))}return s}function Rr(e,t,n){const s=new Map;for(const r of e){const e=r.transform,i=n.data.field(r.field);s.set(r.field,dr(e,i,t))}return s}class Vr extends Ir{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Fr extends Ir{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Br{constructor(e,t,n,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const t=this.mutations[s];t.key.isEqual(e.key)&&xr(t,e,n[s])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=kr(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=kr(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=nr();return this.mutations.forEach(s=>{const r=e.get(s.key),i=r.overlayedDocument;let o=this.applyToLocalView(i,r.mutatedFields);o=t.has(s.key)?null:o;const a=Ar(i,o);null!==a&&n.set(s.key,a),i.isValidDocument()||i.convertToNoDocument(sn.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),or())}isEqual(e){return this.batchId===e.batchId&&Bt(this.mutations,e.mutations,(e,t)=>Nr(e,t))&&Bt(this.baseMutations,e.baseMutations,(e,t)=>Nr(e,t))}}class Ur{constructor(e,t,n,s){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=s}static from(e,t,n){wt(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let s=function(){return rr}();const r=e.mutations;for(let i=0;i<r.length;i++)s=s.insert(r[i].key,n[i].version);return new Ur(e,t,n,s)}}class jr{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class zr{constructor(e,t){this.count=e,this.unchangedNames=t}}var Gr,qr;function $r(e){if(void 0===e)return pt("GRPC error has no .code"),St.UNKNOWN;switch(e){case Gr.OK:return St.OK;case Gr.CANCELLED:return St.CANCELLED;case Gr.UNKNOWN:return St.UNKNOWN;case Gr.DEADLINE_EXCEEDED:return St.DEADLINE_EXCEEDED;case Gr.RESOURCE_EXHAUSTED:return St.RESOURCE_EXHAUSTED;case Gr.INTERNAL:return St.INTERNAL;case Gr.UNAVAILABLE:return St.UNAVAILABLE;case Gr.UNAUTHENTICATED:return St.UNAUTHENTICATED;case Gr.INVALID_ARGUMENT:return St.INVALID_ARGUMENT;case Gr.NOT_FOUND:return St.NOT_FOUND;case Gr.ALREADY_EXISTS:return St.ALREADY_EXISTS;case Gr.PERMISSION_DENIED:return St.PERMISSION_DENIED;case Gr.FAILED_PRECONDITION:return St.FAILED_PRECONDITION;case Gr.ABORTED:return St.ABORTED;case Gr.OUT_OF_RANGE:return St.OUT_OF_RANGE;case Gr.UNIMPLEMENTED:return St.UNIMPLEMENTED;case Gr.DATA_LOSS:return St.DATA_LOSS;default:return yt(39323,{code:e})}}(qr=Gr||(Gr={}))[qr.OK=0]="OK",qr[qr.CANCELLED=1]="CANCELLED",qr[qr.UNKNOWN=2]="UNKNOWN",qr[qr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qr[qr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qr[qr.NOT_FOUND=5]="NOT_FOUND",qr[qr.ALREADY_EXISTS=6]="ALREADY_EXISTS",qr[qr.PERMISSION_DENIED=7]="PERMISSION_DENIED",qr[qr.UNAUTHENTICATED=16]="UNAUTHENTICATED",qr[qr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qr[qr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qr[qr.ABORTED=10]="ABORTED",qr[qr.OUT_OF_RANGE=11]="OUT_OF_RANGE",qr[qr.UNIMPLEMENTED=12]="UNIMPLEMENTED",qr[qr.INTERNAL=13]="INTERNAL",qr[qr.UNAVAILABLE=14]="UNAVAILABLE",qr[qr.DATA_LOSS=15]="DATA_LOSS";const Hr=new Qe([4294967295,4294967295],0);function Kr(e){const t=(new TextEncoder).encode(e),n=new Ye;return n.update(t),new Uint8Array(n.digest())}function Wr(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),r=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new Qe([n,s],0),new Qe([r,i],0)]}class Qr{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Yr(`Invalid padding: ${t}`);if(n<0)throw new Yr(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new Yr(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new Yr(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Qe.fromNumber(this.ge)}ye(e,t,n){let s=e.add(t.multiply(Qe.fromNumber(n)));return 1===s.compare(Hr)&&(s=new Qe([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=Kr(e),[n,s]=Wr(t);for(let r=0;r<this.hashCount;r++){const e=this.ye(n,s,r);if(!this.we(e))return!1}return!0}static create(e,t,n){const s=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),i=new Qr(r,s,t);return n.forEach(e=>i.insert(e)),i}insert(e){if(0===this.ge)return;const t=Kr(e),[n,s]=Wr(t);for(let r=0;r<this.hashCount;r++){const e=this.ye(n,s,r);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Yr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Xr{constructor(e,t,n,s,r){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const s=new Map;return s.set(e,Jr.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Xr(sn.min(),s,new bn(Pt),Xs(),or())}}class Jr{constructor(e,t,n,s,r){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Jr(n,t,or(),or(),or())}}class Zr{constructor(e,t,n,s){this.be=e,this.removedTargetIds=t,this.key=n,this.De=s}}class ei{constructor(e,t){this.targetId=e,this.Ce=t}}class ti{constructor(e,t,n=An.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=s}}class ni{constructor(){this.ve=0,this.Fe=ii(),this.Me=An.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=or(),t=or(),n=or();return this.Fe.forEach((s,r)=>{switch(r){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:n=n.add(s);break;default:yt(38017,{changeType:r})}}),new Jr(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=ii()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,wt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class si{constructor(e){this.Ge=e,this.ze=new Map,this.je=Xs(),this.Je=ri(),this.He=ri(),this.Ye=new bn(Pt)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:yt(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,s=this.ot(t);if(s){const r=s.target;if(Rs(r))if(0===n){const e=new $t(r.path);this.et(t,e,us.newNoDocument(e,sn.min()))}else wt(1===n,20013,{expectedCount:n});else{const s=this._t(t);if(s!==n){const n=this.ut(e),r=n?this.ct(n,e,s):1;if(0!==r){this.it(t);const e=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:r=0}=t;let i,o;try{i=Nn(n).toUint8Array()}catch(a){if(a instanceof In)return mt("Decoding the base64 bloom filter in existence filter failed ("+a.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw a}try{o=new Qr(i,s,r)}catch(a){return mt(a instanceof Yr?"BloomFilter error: ":"Applying bloom filter failed: ",a),null}return 0===o.ge?null:o}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let s=0;return n.forEach(n=>{const r=this.Ge.ht(),i=`projects/${r.projectId}/databases/${r.database}/documents/${n.path.canonicalString()}`;e.mightContain(i)||(this.et(t,n,null),s++)}),s}Tt(e){const t=new Map;this.ze.forEach((n,s)=>{const r=this.ot(s);if(r){if(n.current&&Rs(r.target)){const t=new $t(r.target.path);this.It(t).has(s)||this.Et(s,t)||this.et(s,t,us.newNoDocument(t,e))}n.Be&&(t.set(s,n.ke()),n.qe())}});let n=or();this.He.forEach((e,t)=>{let s=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(s=!1,!1)}),s&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const s=new Xr(e,t,this.Ye,this.je,n);return this.je=Xs(),this.Je=ri(),this.He=ri(),this.Ye=new bn(Pt),s}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new ni,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new En(Pt),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new En(Pt),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||ft("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ni),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function ri(){return new bn($t.comparator)}function ii(){return new bn($t.comparator)}const oi=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),ai=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),li=(()=>({and:"AND",or:"OR"}))();class ci{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ui(e,t){return e.useProto3Json||fn(t)?t:{value:t}}function hi(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function di(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function fi(e,t){return hi(e,t.toTimestamp())}function pi(e){return wt(!!e,49232),sn.fromTimestamp(function(e){const t=kn(e);return new nn(t.seconds,t.nanos)}(e))}function mi(e,t){return gi(e,t).canonicalString()}function gi(e,t){const n=(s=e,new zt(["projects",s.projectId,"databases",s.database])).child("documents");var s;return void 0===t?n:n.child(t)}function yi(e){const t=zt.fromString(e);return wt(Oi(t),10190,{key:t.toString()}),t}function vi(e,t){return mi(e.databaseId,t.path)}function wi(e,t){const n=yi(t);if(n.get(1)!==e.databaseId.projectId)throw new Tt(St.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Tt(St.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new $t(Ti(n))}function bi(e,t){return mi(e.databaseId,t)}function Si(e){return new zt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ti(e){return wt(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Ei(e,t,n){return{name:vi(e,t),fields:n.value.mapValue.fields}}function _i(e,t){return{documents:[bi(e,t.path)]}}function Ci(e,t){const n={structuredQuery:{}},s=t.path;let r;null!==t.collectionGroup?(r=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=bi(e,r);const i=function(e){if(0!==e.length)return Li(vs.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const o=function(e){if(0!==e.length)return e.map(e=>{return{field:Ni((t=e).field),direction:xi(t.dir)};var t})}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=ui(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt={before:(l=t.startAt).inclusive,values:l.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:r};var l}function Ii(e){let t=function(e){const t=yi(e);return 4===t.length?zt.emptyPath():Ti(t)}(e.parent);const n=e.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){wt(1===s,65062);const e=n.from[0];e.allDescendants?r=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=Ai(e);return t instanceof vs&&bs(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(e=>{return new ps(Mi((t=e).field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction));var t}));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,fn(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new hs(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new hs(n,t)}(n.endAt)),function(e,t,n,s,r,i,o,a){return new Vs(e,t,n,s,r,i,o,a)}(t,r,o,i,a,"F",l,c)}function Ai(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Mi(e.unaryFilter.field);return ys.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Mi(e.unaryFilter.field);return ys.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Mi(e.unaryFilter.field);return ys.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Mi(e.unaryFilter.field);return ys.create(r,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return yt(61313);default:return yt(60726)}}(e):void 0!==e.fieldFilter?(t=e,ys.create(Mi(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return yt(58110);default:return yt(50506)}}(t.fieldFilter.op),t.fieldFilter.value)):void 0!==e.compositeFilter?function(e){return vs.create(e.compositeFilter.filters.map(e=>Ai(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return yt(1026)}}(e.compositeFilter.op))}(e):yt(30097,{filter:e});var t}function xi(e){return oi[e]}function ki(e){return ai[e]}function Di(e){return li[e]}function Ni(e){return{fieldPath:e.canonicalString()}}function Mi(e){return qt.fromServerFormat(e.fieldPath)}function Li(e){return e instanceof ys?function(e){if("=="===e.op){if(is(e.value))return{unaryFilter:{field:Ni(e.field),op:"IS_NAN"}};if(rs(e.value))return{unaryFilter:{field:Ni(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(is(e.value))return{unaryFilter:{field:Ni(e.field),op:"IS_NOT_NAN"}};if(rs(e.value))return{unaryFilter:{field:Ni(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ni(e.field),op:ki(e.op),value:e.value}}}(e):e instanceof vs?function(e){const t=e.getFilters().map(e=>Li(e));return 1===t.length?t[0]:{compositeFilter:{op:Di(e.op),filters:t}}}(e):yt(54877,{filter:e})}function Pi(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Oi(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Ri{constructor(e,t,n,s,r=sn.min(),i=sn.min(),o=An.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Ri(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ri(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ri(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ri(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Vi{constructor(e){this.yt=e}}function Fi(e){const t=Ii({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?zs(t,t.limit,"L"):t}class Bi{constructor(){this.Cn=new Ui}addToCollectionParentIndex(e,t){return this.Cn.add(t),un.resolve()}getCollectionParents(e,t){return un.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return un.resolve()}deleteFieldIndex(e,t){return un.resolve()}deleteAllFieldIndexes(e){return un.resolve()}createTargetIndexes(e,t){return un.resolve()}getDocumentsMatchingTarget(e,t){return un.resolve(null)}getIndexType(e,t){return un.resolve(0)}getFieldIndexes(e,t){return un.resolve([])}getNextCollectionGroupToUpdate(e){return un.resolve(null)}getMinOffset(e,t){return un.resolve(on.min())}getMinOffsetFromCollectionGroup(e,t){return un.resolve(on.min())}updateCollectionGroup(e,t,n){return un.resolve()}updateIndexEntries(e,t){return un.resolve()}}class Ui{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t]||new En(zt.comparator),r=!s.has(n);return this.index[t]=s.add(n),r}has(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t];return s&&s.has(n)}getEntries(e){return(this.index[e]||new En(zt.comparator)).toArray()}}const ji={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zi=41943040;class Gi{static withCacheSize(e){return new Gi(e,Gi.DEFAULT_COLLECTION_PERCENTILE,Gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}Gi.DEFAULT_COLLECTION_PERCENTILE=10,Gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gi.DEFAULT=new Gi(zi,Gi.DEFAULT_COLLECTION_PERCENTILE,Gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gi.DISABLED=new Gi(-1,0,0);class qi{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new qi(0)}static cr(){return new qi(-1)}}const $i="LruGarbageCollector";function Hi([e,t],[n,s]){const r=Pt(e,n);return 0===r?Pt(t,s):r}class Ki{constructor(e){this.Ir=e,this.buffer=new En(Hi),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Hi(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Wi{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){ft($i,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){hn(e)?ft($i,"Ignoring IndexedDB error during garbage collection: ",e):await cn(e)}await this.Vr(3e5)})}}class Qi{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return un.resolve(dn.ce);const n=new Ki(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ft("LruGarbageCollector","Garbage collection skipped; disabled"),un.resolve(ji)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(ft("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ji):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,s,r,i,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(ft("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),s=this.params.maximumSequenceNumbersToCollect):s=t,i=Date.now(),this.nthSequenceNumber(e,s))).next(s=>(n=s,o=Date.now(),this.removeTargets(e,n,t))).next(t=>(r=t,a=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),dt()<=k.DEBUG&&ft("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${i-c}ms\n\tDetermined least recently used ${s} in `+(o-i)+`ms\n\tRemoved ${r} targets in `+(a-o)+`ms\n\tRemoved ${e} documents in `+(l-a)+`ms\nTotal Duration: ${l-c}ms`),un.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:r,documentsRemoved:e})))}}class Yi{constructor(){this.changes=new Qs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,us.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?un.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Xi{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Ji{constructor(e,t,n,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&kr(n.mutation,e,Cn.empty(),nn.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,or()).next(()=>t))}getLocalViewOfDocuments(e,t,n=or()){const s=tr();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,n).next(e=>{let t=Zs();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=tr();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,or()))}populateOverlays(e,t,n){const s=[];return n.forEach(e=>{t.has(e)||s.push(e)}),this.documentOverlayCache.getOverlays(e,s).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,s){let r=Xs();const i=sr(),o=sr();return t.forEach((e,t)=>{const o=n.get(t.key);s.has(t.key)&&(void 0===o||o.mutation instanceof Lr)?r=r.insert(t.key,t):void 0!==o?(i.set(t.key,o.mutation.getFieldMask()),kr(o.mutation,t,o.mutation.getFieldMask(),nn.now())):i.set(t.key,Cn.empty())}),this.recalculateAndSaveOverlays(e,r).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>o.set(e,new Xi(t,i.get(e)??null))),o))}recalculateAndSaveOverlays(e,t){const n=sr();let s=new bn((e,t)=>e-t),r=or();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const r of e)r.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let o=n.get(e)||Cn.empty();o=r.applyToLocalView(i,o),n.set(e,o);const a=(s.get(r.batchId)||or()).add(e);s=s.insert(r.batchId,a)})}).next(()=>{const i=[],o=s.getReverseIterator();for(;o.hasNext();){const s=o.getNext(),a=s.key,l=s.value,c=nr();l.forEach(e=>{if(!r.has(e)){const s=Ar(t.get(e),n.get(e));null!==s&&c.set(e,s),r=r.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,a,c))}return un.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,s){return r=t,$t.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):function(e){return null!==e.collectionGroup}(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,s):this.getDocumentsMatchingCollectionQuery(e,t,n,s);var r}getNextDocuments(e,t,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,s).next(r=>{const i=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,s-r.size):un.resolve(tr());let o=-1,a=r;return i.next(t=>un.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),r.get(t)?un.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,r)).next(()=>this.computeViews(e,a,t,or())).next(e=>({batchId:o,changes:er(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $t(t)).next(e=>{let t=Zs();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,s){const r=t.collectionGroup;let i=Zs();return this.indexManager.getCollectionParents(e,r).next(o=>un.forEach(o,o=>{const a=(l=t,c=o.child(r),new Vs(c,null,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt));var l,c;return this.getDocumentsMatchingCollectionQuery(e,a,n,s).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n,s){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(r=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r,s))).next(e=>{r.forEach((t,n)=>{const s=n.getKey();null===e.get(s)&&(e=e.insert(s,us.newInvalidDocument(s)))});let n=Zs();return e.forEach((e,s)=>{const i=r.get(e);void 0!==i&&kr(i.mutation,s,Cn.empty(),nn.now()),Hs(t,s)&&(n=n.insert(e,s))}),n})}}class Zi{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return un.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,{id:(n=t).id,version:n.version,createTime:pi(n.createTime)}),un.resolve();var n}getNamedQuery(e,t){return un.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,{name:(n=t).name,query:Fi(n.bundledQuery),readTime:pi(n.readTime)}),un.resolve();var n}}class eo{constructor(){this.overlays=new bn($t.comparator),this.qr=new Map}getOverlay(e,t){return un.resolve(this.overlays.get(t))}getOverlays(e,t){const n=tr();return un.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,s)=>{this.St(e,t,s)}),un.resolve()}removeOverlaysForBatchId(e,t,n){const s=this.qr.get(n);return void 0!==s&&(s.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),un.resolve()}getOverlaysForCollection(e,t,n){const s=tr(),r=t.length+1,i=new $t(t.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const e=o.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===r&&e.largestBatchId>n&&s.set(e.getKey(),e)}return un.resolve(s)}getOverlaysForCollectionGroup(e,t,n,s){let r=new bn((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=r.get(e.largestBatchId);null===t&&(t=tr(),r=r.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=tr(),a=r.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=s)););return un.resolve(o)}St(e,t,n){const s=this.overlays.get(n.key);if(null!==s){const e=this.qr.get(s.largestBatchId).delete(n.key);this.qr.set(s.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new jr(t,n));let r=this.qr.get(t);void 0===r&&(r=or(),this.qr.set(t,r)),this.qr.set(t,r.add(n.key))}}class to{constructor(){this.sessionToken=An.EMPTY_BYTE_STRING}getSessionToken(e){return un.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,un.resolve()}}class no{constructor(){this.Qr=new En(so.$r),this.Ur=new En(so.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new so(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new so(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new $t(new zt([])),n=new so(t,e),s=new so(t,e+1),r=[];return this.Ur.forEachInRange([n,s],e=>{this.Gr(e),r.push(e.key)}),r}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new $t(new zt([])),n=new so(t,e),s=new so(t,e+1);let r=or();return this.Ur.forEachInRange([n,s],e=>{r=r.add(e.key)}),r}containsKey(e){const t=new so(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class so{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return $t.comparator(e.key,t.key)||Pt(e.Yr,t.Yr)}static Kr(e,t){return Pt(e.Yr,t.Yr)||$t.comparator(e.key,t.key)}}class ro{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new En(so.$r)}checkEmpty(e){return un.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,s){const r=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Br(r,t,n,s);this.mutationQueue.push(i);for(const o of s)this.Zr=this.Zr.add(new so(o.key,r)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return un.resolve(i)}lookupMutationBatch(e,t){return un.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,s=this.ei(n),r=s<0?0:s;return un.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return un.resolve(0===this.mutationQueue.length?-1:this.tr-1)}getAllMutationBatches(e){return un.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new so(t,0),s=new so(t,Number.POSITIVE_INFINITY),r=[];return this.Zr.forEachInRange([n,s],e=>{const t=this.Xr(e.Yr);r.push(t)}),un.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new En(Pt);return t.forEach(e=>{const t=new so(e,0),s=new so(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,s],e=>{n=n.add(e.Yr)})}),un.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,s=n.length+1;let r=n;$t.isDocumentKey(r)||(r=r.child(""));const i=new so(new $t(r),0);let o=new En(Pt);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===s&&(o=o.add(e.Yr)),!0)},i),un.resolve(this.ti(o))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){wt(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return un.forEach(t.mutations,s=>{const r=new so(s.key,t.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new so(t,0),s=this.Zr.firstAfterOrEqual(n);return un.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,un.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class io{constructor(e){this.ri=e,this.docs=new bn($t.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,s=this.docs.get(n),r=s?s.size:0,i=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-r,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return un.resolve(n?n.document.mutableCopy():us.newInvalidDocument(t))}getEntries(e,t){let n=Xs();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():us.newInvalidDocument(e))}),un.resolve(n)}getDocumentsMatchingQuery(e,t,n,s){let r=Xs();const i=t.path,o=new $t(i.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||an(rn(o),n)<=0||(s.has(o.key)||Hs(t,o))&&(r=r.insert(o.key,o.mutableCopy()))}return un.resolve(r)}getAllFromCollectionGroup(e,t,n,s){yt(9500)}ii(e,t){return un.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new oo(this)}getSize(e){return un.resolve(this.size)}}class oo extends Yi{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(n)}),un.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class ao{constructor(e){this.persistence=e,this.si=new Qs(e=>Ps(e),Os),this.lastRemoteSnapshotVersion=sn.min(),this.highestTargetId=0,this.oi=0,this._i=new no,this.targetCount=0,this.ai=qi.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),un.resolve()}getLastRemoteSnapshotVersion(e){return un.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return un.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),un.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),un.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new qi(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,un.resolve()}updateTargetData(e,t){return this.Pr(t),un.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,un.resolve()}removeTargets(e,t,n){let s=0;const r=[];return this.si.forEach((i,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.si.delete(i),r.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)}),un.waitFor(r).next(()=>s)}getTargetCount(e){return un.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return un.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),un.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const s=this.persistence.referenceDelegate,r=[];return s&&t.forEach(t=>{r.push(s.markPotentiallyOrphaned(e,t))}),un.waitFor(r)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),un.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return un.resolve(n)}containsKey(e,t){return un.resolve(this._i.containsKey(t))}}class lo{constructor(e,t){this.ui={},this.overlays={},this.ci=new dn(0),this.li=!1,this.li=!0,this.hi=new to,this.referenceDelegate=e(this),this.Pi=new ao(this),this.indexManager=new Bi,this.remoteDocumentCache=new io(e=>this.referenceDelegate.Ti(e)),this.serializer=new Vi(t),this.Ii=new Zi(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new eo,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new ro(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){ft("MemoryPersistence","Starting transaction:",e);const s=new co(this.ci.next());return this.referenceDelegate.Ei(),n(s).next(e=>this.referenceDelegate.di(s).next(()=>e)).toPromise().then(e=>(s.raiseOnCommittedEvent(),e))}Ai(e,t){return un.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class co extends ln{constructor(e){super(),this.currentSequenceNumber=e}}class uo{constructor(e){this.persistence=e,this.Ri=new no,this.Vi=null}static mi(e){return new uo(e)}get fi(){if(this.Vi)return this.Vi;throw yt(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),un.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),un.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),un.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return un.forEach(this.fi,n=>{const s=$t.fromPath(n);return this.gi(e,s).next(e=>{e||t.removeEntry(s,sn.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return un.or([()=>un.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class ho{constructor(e,t){this.persistence=e,this.pi=new Qs(e=>function(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=gn(t)),t=mn(e.get(n),t);return gn(t)}(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=function(e,t){return new Qi(e,t)}(this,t)}static mi(e,t){return new ho(e,t)}Ei(){}di(e){return un.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return un.forEach(this.pi,(n,s)=>this.br(e,n,s).next(e=>e?un.resolve():t(s)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const s=this.persistence.getRemoteDocumentCache(),r=s.newChangeBuffer();return s.ii(e,s=>this.br(e,s,t).next(e=>{e||(n++,r.removeEntry(s,sn.min()))})).next(()=>r.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),un.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),un.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),un.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),un.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ts(e.data.value)),t}br(e,t,n){return un.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return un.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class fo{constructor(e,t,n,s){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=s}static As(e,t){let n=or(),s=or();for(const r of t.docChanges)switch(r.type){case 0:n=n.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new fo(e,t.fromCache,n,s)}}class po{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class mo{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=v()?8:function(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:"")>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,s){const r={result:null};return this.ys(e,t).next(e=>{r.result=e}).next(()=>{if(!r.result)return this.ws(e,t,s,n).next(e=>{r.result=e})}).next(()=>{if(r.result)return;const n=new po;return this.Ss(e,t,n).next(s=>{if(r.result=s,this.Vs)return this.bs(e,t,n,s.size)})}).next(()=>r.result)}bs(e,t,n,s){return n.documentReadCount<this.fs?(dt()<=k.DEBUG&&ft("QueryEngine","SDK will not create cache indexes for query:",$s(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),un.resolve()):(dt()<=k.DEBUG&&ft("QueryEngine","Query:",$s(t),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.gs*s?(dt()<=k.DEBUG&&ft("QueryEngine","The SDK decides to create cache indexes for query:",$s(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,js(t))):un.resolve())}ys(e,t){if(Bs(t))return un.resolve(null);let n=js(t);return this.indexManager.getIndexType(e,n).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=zs(t,null,"F"),n=js(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{const r=or(...s);return this.ps.getDocuments(e,r).next(s=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.Ds(t,s);return this.Cs(t,i,r,n.readTime)?this.ys(e,zs(t,null,"F")):this.vs(e,i,t,n)}))})))}ws(e,t,n,s){return Bs(t)||s.isEqual(sn.min())?un.resolve(null):this.ps.getDocuments(e,n).next(r=>{const i=this.Ds(t,r);return this.Cs(t,i,n,s)?un.resolve(null):(dt()<=k.DEBUG&&ft("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),$s(t)),this.vs(e,i,t,function(e,t){const n=e.toTimestamp().seconds,s=e.toTimestamp().nanoseconds+1,r=sn.fromTimestamp(1e9===s?new nn(n+1,0):new nn(n,s));return new on(r,$t.empty(),t)}(s,-1)).next(e=>e))})}Ds(e,t){let n=new En(Ks(e));return t.forEach((t,s)=>{Hs(e,s)&&(n=n.add(s))}),n}Cs(e,t,n,s){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const r="F"===e.limitType?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Ss(e,t,n){return dt()<=k.DEBUG&&ft("QueryEngine","Using full collection scan to execute query:",$s(t)),this.ps.getDocumentsMatchingQuery(e,t,on.min(),n)}vs(e,t,n,s){return this.ps.getDocumentsMatchingQuery(e,n,s).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const go="LocalStore";class yo{constructor(e,t,n,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new bn(Pt),this.xs=new Qs(e=>Ps(e),Os),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ji(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}async function vo(e,t){const n=bt(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let s;return n.mutationQueue.getAllMutationBatches(e).next(r=>(s=r,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const r=[],i=[];let o=or();for(const e of s){r.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({Ls:e,removedBatchIds:r,addedBatchIds:i}))})})}function wo(e){const t=bt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function bo(e,t){const n=bt(e),s=t.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const o=[];t.targetChanges.forEach((i,a)=>{const l=r.get(a);if(!l)return;o.push(n.Pi.removeMatchingKeys(e,i.removedDocuments,a).next(()=>n.Pi.addMatchingKeys(e,i.addedDocuments,a)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(An.EMPTY_BYTE_STRING,sn.min()).withLastLimboFreeSnapshotVersion(sn.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,s)),r=r.insert(a,c),function(e,t,n){if(0===e.resumeToken.approximateByteSize())return!0;if(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8)return!0;return n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,i)&&o.push(n.Pi.updateTargetData(e,c))});let a=Xs(),l=or();if(t.documentUpdates.forEach(s=>{t.resolvedLimboDocuments.has(s)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,s))}),o.push(function(e,t,n){let s=or(),r=or();return n.forEach(e=>s=s.add(e)),t.getEntries(e,s).next(e=>{let s=Xs();return n.forEach((n,i)=>{const o=e.get(n);i.isFoundDocument()!==o.isFoundDocument()&&(r=r.add(n)),i.isNoDocument()&&i.version.isEqual(sn.min())?(t.removeEntry(n,i.readTime),s=s.insert(n,i)):!o.isValidDocument()||i.version.compareTo(o.version)>0||0===i.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(i),s=s.insert(n,i)):ft(go,"Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",i.version)}),{ks:s,qs:r}})}(e,i,t.documentUpdates).next(e=>{a=e.ks,l=e.qs})),!s.isEqual(sn.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,s));o.push(t)}return un.waitFor(o).next(()=>i.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,l)).next(()=>a)}).then(e=>(n.Ms=r,e))}function So(e,t){const n=bt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}async function To(e,t,n){const s=bt(e),r=s.Ms.get(t),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,e=>s.persistence.referenceDelegate.removeTarget(e,r))}catch(o){if(!hn(o))throw o;ft(go,`Failed to update sequence numbers for target ${t}: ${o}`)}s.Ms=s.Ms.remove(t),s.xs.delete(r.target)}function Eo(e,t,n){const s=bt(e);let r=sn.min(),i=or();return s.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const s=bt(e),r=s.xs.get(n);return void 0!==r?un.resolve(s.Ms.get(r)):s.Pi.getTargetData(t,n)}(s,e,js(t)).next(t=>{if(t)return r=t.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>s.Fs.getDocumentsMatchingQuery(e,t,n?r:sn.min(),n?i:or())).next(e=>(function(e,t,n){let s=e.Os.get(t)||sn.min();n.forEach((e,t)=>{t.readTime.compareTo(s)>0&&(s=t.readTime)}),e.Os.set(t,s)}(s,function(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}(t),e),{documents:e,Qs:i})))}class _o{constructor(){this.activeTargetIds=ar}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Co{constructor(){this.Mo=new _o,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new _o,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Io{Oo(e){}shutdown(){}}const Ao="ConnectivityMonitor";class xo{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ft(Ao,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ft(Ao,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let ko=null;function Do(){return null===ko?ko=268435456+Math.round(2147483648*Math.random()):ko++,"0x"+ko.toString(16)}const No="RestConnection",Mo={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Lo{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${s}`,this.Wo=this.databaseId.database===Un?`project_id=${n}`:`project_id=${n}&database_id=${s}`}Go(e,t,n,s,r){const i=Do(),o=this.zo(e,t.toUriEncodedString());ft(No,`Sending RPC '${e}' ${i}:`,o,n);const a={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(a,s,r);const{host:l}=new URL(o),c=p(l);return this.Jo(e,o,a,n,c).then(t=>(ft(No,`Received RPC '${e}' ${i}: `,t),t),t=>{throw mt(No,`RPC '${e}' ${i} failed with error: `,t,"url: ",o,"request:",n),t})}Ho(e,t,n,s,r,i){return this.Go(e,t,n,s,r)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+ut,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=Mo[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}class Po{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Oo="WebChannelConnection";class Ro extends Lo{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,s,r){const i=Do();return new Promise((r,o)=>{const a=new Je;a.setWithCredentials(!0),a.listenOnce(et.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case tt.NO_ERROR:const t=a.getResponseJson();ft(Oo,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),r(t);break;case tt.TIMEOUT:ft(Oo,`RPC '${e}' ${i} timed out`),o(new Tt(St.DEADLINE_EXCEEDED,"Request time out"));break;case tt.HTTP_ERROR:const n=a.getStatus();if(ft(Oo,`RPC '${e}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=e?.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(St).indexOf(t)>=0?t:St.UNKNOWN}(t.status);o(new Tt(e,t.message))}else o(new Tt(St.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Tt(St.UNAVAILABLE,"Connection failed."));break;default:yt(9055,{l_:e,streamId:i,h_:a.getLastErrorCode(),P_:a.getLastError()})}}finally{ft(Oo,`RPC '${e}' ${i} completed.`)}});const l=JSON.stringify(s);ft(Oo,`RPC '${e}' ${i} sending request:`,s),a.send(t,"POST",l,n,15)})}T_(e,t,n){const s=Do(),r=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=it(),o=rt(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.jo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=r.join("");ft(Oo,`Creating RPC '${e}' stream ${s}: ${c}`,a);const u=i.createWebChannel(c,a);this.I_(u);let h=!1,d=!1;const f=new Po({Yo:t=>{d?ft(Oo,`Not sending because RPC '${e}' stream ${s} is closed:`,t):(h||(ft(Oo,`Opening RPC '${e}' stream ${s} transport.`),u.open(),h=!0),ft(Oo,`RPC '${e}' stream ${s} sending:`,t),u.send(t))},Zo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(t){setTimeout(()=>{throw t},0)}})};return p(u,Ze.EventType.OPEN,()=>{d||(ft(Oo,`RPC '${e}' stream ${s} transport opened.`),f.o_())}),p(u,Ze.EventType.CLOSE,()=>{d||(d=!0,ft(Oo,`RPC '${e}' stream ${s} transport closed`),f.a_(),this.E_(u))}),p(u,Ze.EventType.ERROR,t=>{d||(d=!0,mt(Oo,`RPC '${e}' stream ${s} transport errored. Name:`,t.name,"Message:",t.message),f.a_(new Tt(St.UNAVAILABLE,"The operation could not be completed")))}),p(u,Ze.EventType.MESSAGE,t=>{if(!d){const n=t.data[0];wt(!!n,16349);const r=n,i=r?.error||r[0]?.error;if(i){ft(Oo,`RPC '${e}' stream ${s} received error:`,i);const t=i.status;let n=function(e){const t=Gr[e];if(void 0!==t)return $r(t)}(t),r=i.message;void 0===n&&(n=St.INTERNAL,r="Unknown error status: "+t+" with message "+i.message),d=!0,f.a_(new Tt(n,r)),u.close()}else ft(Oo,`RPC '${e}' stream ${s} received:`,n),f.u_(n)}}),p(o,st.STAT_EVENT,t=>{t.stat===nt.PROXY?ft(Oo,`RPC '${e}' stream ${s} detected buffering proxy`):t.stat===nt.NOPROXY&&ft(Oo,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{f.__()},0),f}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function Vo(){return"undefined"!=typeof document?document:null}function Fo(e){return new ci(e,!0)}class Bo{constructor(e,t,n=1e3,s=1.5,r=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=s,this.R_=r,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-n);s>0&&ft("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Uo="PersistentStream";class jo{constructor(e,t,n,s,r,i,o,a){this.Mi=e,this.S_=n,this.b_=s,this.connection=r,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Bo(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===St.RESOURCE_EXHAUSTED?(pt(t.toString()),pt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===St.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,n])=>{this.D_===t&&this.G_(e,n)},t=>{e(()=>{const e=new Tt(St.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ft(Uo,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(ft(Uo,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class zo extends jo{constructor(e,t,n,s,r,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,s,i),this.serializer=r}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r="NO_CHANGE"===(s=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===s?1:"REMOVE"===s?2:"CURRENT"===s?3:"RESET"===s?4:yt(39313,{state:s}),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(wt(void 0===t||"string"==typeof t,58123),An.fromBase64String(t||"")):(wt(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),An.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(e){const t=void 0===e.code?St.UNKNOWN:$r(e.code);return new Tt(t,e.message||"")}(a);n=new ti(r,i,o,l||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const r=wi(e,s.document.name),i=pi(s.document.updateTime),o=s.document.createTime?pi(s.document.createTime):sn.min(),a=new ls({mapValue:{fields:s.document.fields}}),l=us.newFoundDocument(r,i,o,a),c=s.targetIds||[],u=s.removedTargetIds||[];n=new Zr(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const r=wi(e,s.document),i=s.readTime?pi(s.readTime):sn.min(),o=us.newNoDocument(r,i),a=s.removedTargetIds||[];n=new Zr([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const r=wi(e,s.document),i=s.removedTargetIds||[];n=new Zr([],i,r,null)}else{if(!("filter"in t))return yt(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:s=0,unchangedNames:r}=e,i=new zr(s,r),o=e.targetId;n=new ei(o,i)}}var s;return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return sn.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?sn.min():t.readTime?pi(t.readTime):sn.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=Si(this.serializer),t.addTarget=function(e,t){let n;const s=t.target;if(n=Rs(s)?{documents:_i(e,s)}:{query:Ci(e,s).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=di(e,t.resumeToken);const s=ui(e,t.expectedCount);null!==s&&(n.expectedCount=s)}else if(t.snapshotVersion.compareTo(sn.min())>0){n.readTime=hi(e,t.snapshotVersion.toTimestamp());const s=ui(e,t.expectedCount);null!==s&&(n.expectedCount=s)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return yt(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=Si(this.serializer),t.removeTarget=e,this.q_(t)}}class Go extends jo{constructor(e,t,n,s,r,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,s,i),this.serializer=r}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return wt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,wt(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){wt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(wt(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?pi(e.updateTime):pi(t);return n.isEqual(sn.min())&&(n=pi(t)),new Er(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=pi(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=Si(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>function(e,t){let n;if(t instanceof Mr)n={update:Ei(e,t.key,t.value)};else if(t instanceof Vr)n={delete:vi(e,t.key)};else if(t instanceof Lr)n={update:Ei(e,t.key,t.data),updateMask:Pi(t.fieldMask)};else{if(!(t instanceof Fr))return yt(16599,{Vt:t.type});n={verify:vi(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof mr)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof gr)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof vr)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof br)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw yt(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=(s=e,void 0!==(r=t.precondition).updateTime?{updateTime:fi(s,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:yt(27497))),n;var s,r}(this.serializer,e))};this.q_(t)}}class qo{}class $o extends qo{constructor(e,t,n,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Tt(St.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,i])=>this.connection.Go(e,gi(t,n),s,r,i)).catch(e=>{throw"FirebaseError"===e.name?(e.code===St.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Tt(St.UNKNOWN,e.toString())})}Ho(e,t,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Ho(e,gi(t,n),s,i,o,r)).catch(e=>{throw"FirebaseError"===e.name?(e.code===St.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Tt(St.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Ho{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(pt(t),this.aa=!1):ft("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const Ko="RemoteStore";class Wo{constructor(e,t,n,s,r){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=r,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{sa(this)&&(ft(Ko,"Restarting streams for network reachability change."),await async function(e){const t=bt(e);t.Ea.add(4),await Yo(t),t.Ra.set("Unknown"),t.Ea.delete(4),await Qo(t)}(this))})}),this.Ra=new Ho(n,s)}}async function Qo(e){if(sa(e))for(const t of e.da)await t(!0)}async function Yo(e){for(const t of e.da)await t(!1)}function Xo(e,t){const n=bt(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),na(n)?ta(n):Sa(n).O_()&&Zo(n,t))}function Jo(e,t){const n=bt(e),s=Sa(n);n.Ia.delete(t),s.O_()&&ea(n,t),0===n.Ia.size&&(s.O_()?s.L_():sa(n)&&n.Ra.set("Unknown"))}function Zo(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(sn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Sa(e).Y_(t)}function ea(e,t){e.Va.Ue(t),Sa(e).Z_(t)}function ta(e){e.Va=new si({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Sa(e).start(),e.Ra.ua()}function na(e){return sa(e)&&!Sa(e).x_()&&e.Ia.size>0}function sa(e){return 0===bt(e).Ea.size}function ra(e){e.Va=void 0}async function ia(e){e.Ra.set("Online")}async function oa(e){e.Ia.forEach((t,n)=>{Zo(e,t)})}async function aa(e,t){ra(e),na(e)?(e.Ra.ha(t),ta(e)):e.Ra.set("Unknown")}async function la(e,t,n){if(e.Ra.set("Online"),t instanceof ti&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const s of t.targetIds)e.Ia.has(s)&&(await e.remoteSyncer.rejectListen(s,n),e.Ia.delete(s),e.Va.removeTarget(s))}(e,t)}catch(s){ft(Ko,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await ca(e,s)}else if(t instanceof Zr?e.Va.Ze(t):t instanceof ei?e.Va.st(t):e.Va.tt(t),!n.isEqual(sn.min()))try{const t=await wo(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,s)=>{if(n.resumeToken.approximateByteSize()>0){const r=e.Ia.get(s);r&&e.Ia.set(s,r.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const s=e.Ia.get(t);if(!s)return;e.Ia.set(t,s.withResumeToken(An.EMPTY_BYTE_STRING,s.snapshotVersion)),ea(e,t);const r=new Ri(s.target,t,n,s.sequenceNumber);Zo(e,r)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(r){ft(Ko,"Failed to raise snapshot:",r),await ca(e,r)}}async function ca(e,t,n){if(!hn(t))throw t;e.Ea.add(1),await Yo(e),e.Ra.set("Offline"),n||(n=()=>wo(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{ft(Ko,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await Qo(e)})}function ua(e,t){return t().catch(n=>ca(e,n,t))}async function ha(e){const t=bt(e),n=Ta(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:-1;for(;da(t);)try{const e=await So(t.localStore,s);if(null===e){0===t.Ta.length&&n.L_();break}s=e.batchId,fa(t,e)}catch(r){await ca(t,r)}pa(t)&&ma(t)}function da(e){return sa(e)&&e.Ta.length<10}function fa(e,t){e.Ta.push(t);const n=Ta(e);n.O_()&&n.X_&&n.ea(t.mutations)}function pa(e){return sa(e)&&!Ta(e).x_()&&e.Ta.length>0}function ma(e){Ta(e).start()}async function ga(e){Ta(e).ra()}async function ya(e){const t=Ta(e);for(const n of e.Ta)t.ea(n.mutations)}async function va(e,t,n){const s=e.Ta.shift(),r=Ur.from(s,t,n);await ua(e,()=>e.remoteSyncer.applySuccessfulWrite(r)),await ha(e)}async function wa(e,t){t&&Ta(e).X_&&await async function(e,t){if(function(e){switch(e){case St.OK:return yt(64938);case St.CANCELLED:case St.UNKNOWN:case St.DEADLINE_EXCEEDED:case St.RESOURCE_EXHAUSTED:case St.INTERNAL:case St.UNAVAILABLE:case St.UNAUTHENTICATED:return!1;case St.INVALID_ARGUMENT:case St.NOT_FOUND:case St.ALREADY_EXISTS:case St.PERMISSION_DENIED:case St.FAILED_PRECONDITION:case St.ABORTED:case St.OUT_OF_RANGE:case St.UNIMPLEMENTED:case St.DATA_LOSS:return!0;default:return yt(15467,{code:e})}}(n=t.code)&&n!==St.ABORTED){const n=e.Ta.shift();Ta(e).B_(),await ua(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await ha(e)}var n}(e,t),pa(e)&&ma(e)}async function ba(e,t){const n=bt(e);n.asyncQueue.verifyOperationInProgress(),ft(Ko,"RemoteStore received new credentials");const s=sa(n);n.Ea.add(3),await Yo(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Qo(n)}function Sa(e){return e.ma||(e.ma=function(e,t,n){const s=bt(e);return s.sa(),new zo(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,n)}(e.datastore,e.asyncQueue,{Xo:ia.bind(null,e),t_:oa.bind(null,e),r_:aa.bind(null,e),H_:la.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),na(e)?ta(e):e.Ra.set("Unknown")):(await e.ma.stop(),ra(e))})),e.ma}function Ta(e){return e.fa||(e.fa=function(e,t,n){const s=bt(e);return s.sa(),new Go(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:ga.bind(null,e),r_:wa.bind(null,e),ta:ya.bind(null,e),na:va.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await ha(e)):(await e.fa.stop(),e.Ta.length>0&&(ft(Ko,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}class Ea{constructor(e,t,n,s,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=s,this.removalCallback=r,this.deferred=new Et,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,s,r){const i=Date.now()+n,o=new Ea(e,t,i,s,r);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Tt(St.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _a(e,t){if(pt("AsyncQueue",`${t}: ${e}`),hn(e))return new Tt(St.UNAVAILABLE,`${t}: ${e}`);throw e}class Ca{static emptySet(e){return new Ca(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||$t.comparator(t.key,n.key):(e,t)=>$t.comparator(e.key,t.key),this.keyedMap=Zs(),this.sortedSet=new bn(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ca))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,s=n.getNext().key;if(!e.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Ca;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Ia{constructor(){this.ga=new bn($t.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):yt(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class Aa{constructor(e,t,n,s,r,i,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=r,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,s,r){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new Aa(e,t,Ca.emptySet(t),i,n,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gs(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==n[s].type||!t[s].doc.isEqual(n[s].doc))return!1;return!0}}class xa{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class ka{constructor(){this.queries=Da(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=bt(e),s=n.queries;n.queries=Da(),s.forEach((e,n)=>{for(const s of n.Sa)s.onError(t)})}(this,new Tt(St.ABORTED,"Firestore shutting down"))}}function Da(){return new Qs(e=>qs(e),Gs)}function Na(e,t){const n=bt(e);let s=!1;for(const r of t){const e=r.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(r)&&(s=!0);t.wa=r}}s&&La(n)}function Ma(e,t,n){const s=bt(e),r=s.queries.get(t);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(t)}function La(e){e.Ca.forEach(e=>{e.next()})}var Pa,Oa;(Oa=Pa||(Pa={})).Ma="default",Oa.Cache="cache";class Ra{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Aa(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=Aa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Pa.Cache}}class Va{constructor(e){this.key=e}}class Fa{constructor(e){this.key=e}}class Ba{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=or(),this.mutatedKeys=or(),this.eu=Ks(e),this.tu=new Ca(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new Ia,s=t?t.tu:this.tu;let r=t?t.mutatedKeys:this.mutatedKeys,i=s,o=!1;const a="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,l="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((e,t)=>{const c=s.get(e),u=Hs(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.su(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.eu(u,a)>0||l&&this.eu(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(i=i.add(u),r=d?r.add(e):r.delete(e)):(i=i.delete(e),r=r.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),r=r.delete(e.key),n.track({type:1,doc:e})}return{tu:i,iu:n,Cs:o,mutatedKeys:r}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,s){const r=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const i=e.iu.ya();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yt(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),s=s??!1;const o=t&&!s?this._u():[],a=0===this.Xa.size&&this.current&&!s?1:0,l=a!==this.Za;return this.Za=a,0!==i.length||l?{snapshot:new Aa(this.query,e.tu,r,i,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ia,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=or(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new Fa(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new Va(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=or();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Aa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const Ua="SyncEngine";class ja{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class za{constructor(e){this.key=e,this.hu=!1}}class Ga{constructor(e,t,n,s,r,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=i,this.Pu={},this.Tu=new Qs(e=>qs(e),Gs),this.Iu=new Map,this.Eu=new Set,this.du=new bn($t.comparator),this.Au=new Map,this.Ru=new no,this.Vu={},this.mu=new Map,this.fu=qi.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function qa(e,t,n=!0){const s=hl(e);let r;const i=s.Tu.get(t);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await Ha(s,t,n,!0),r}async function $a(e,t){const n=hl(e);await Ha(n,t,!0,!1)}async function Ha(e,t,n,s){const r=await function(e,t){const n=bt(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let s;return n.Pi.getTargetData(e,t).next(r=>r?(s=r,un.resolve(s)):n.Pi.allocateTargetId(e).next(r=>(s=new Ri(t,r,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,s).next(()=>s))))}).then(e=>{const s=n.Ms.get(e.targetId);return(null===s||e.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}(e.localStore,js(t)),i=r.targetId,o=e.sharedClientState.addLocalQueryTarget(i,n);let a;return s&&(a=await async function(e,t,n,s,r){e.pu=(t,n,s)=>async function(e,t,n,s){let r=t.view.ru(n);r.Cs&&(r=await Eo(e.localStore,t.query,!1).then(({documents:e})=>t.view.ru(e,r)));const i=s&&s.targetChanges.get(t.targetId),o=s&&null!=s.targetMismatches.get(t.targetId),a=t.view.applyChanges(r,e.isPrimaryClient,i,o);return il(e,t.targetId,a.au),a.snapshot}(e,t,n,s);const i=await Eo(e.localStore,t,!0),o=new Ba(t,i.Qs),a=o.ru(i.documents),l=Jr.createSynthesizedTargetChangeForCurrentChange(n,s&&"Offline"!==e.onlineState,r),c=o.applyChanges(a,e.isPrimaryClient,l);il(e,n,c.au);const u=new ja(t,n,o);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}(e,t,i,"current"===o,r.resumeToken)),e.isPrimaryClient&&n&&Xo(e.remoteStore,r),a}async function Ka(e,t,n){const s=bt(e),r=s.Tu.get(t),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter(e=>!Gs(e,t))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await To(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&Jo(s.remoteStore,r.targetId),sl(s,r.targetId)}).catch(cn)):(sl(s,r.targetId),await To(s.localStore,r.targetId,!0))}async function Wa(e,t){const n=bt(e),s=n.Tu.get(t),r=n.Iu.get(s.targetId);n.isPrimaryClient&&1===r.length&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Jo(n.remoteStore,s.targetId))}async function Qa(e,t,n){const s=function(e){const t=bt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Za.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=el.bind(null,t),t}(e);try{const e=await function(e,t){const n=bt(e),s=nn.now(),r=t.reduce((e,t)=>e.add(t.key),or());let i,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=Xs(),l=or();return n.Ns.getEntries(e,r).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(r=>{i=r;const o=[];for(const e of t){const t=Dr(e,i.get(e.key).overlayedDocument);null!=t&&o.push(new Lr(e.key,t,cs(t.value.mapValue),_r.exists(!0)))}return n.mutationQueue.addMutationBatch(e,s,o,t)}).next(t=>{o=t;const s=t.applyToLocalDocumentSet(i,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,s)})}).then(()=>({batchId:o.batchId,changes:er(i)}))}(s.localStore,t);s.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let s=e.Vu[e.currentUser.toKey()];s||(s=new bn(Pt)),s=s.insert(t,n),e.Vu[e.currentUser.toKey()]=s}(s,e.batchId,n),await ll(s,e.changes),await ha(s.remoteStore)}catch(r){const e=_a(r,"Failed to persist write");n.reject(e)}}async function Ya(e,t){const n=bt(e);try{const e=await bo(n.localStore,t);t.targetChanges.forEach((e,t)=>{const s=n.Au.get(t);s&&(wt(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?s.hu=!0:e.modifiedDocuments.size>0?wt(s.hu,14607):e.removedDocuments.size>0&&(wt(s.hu,42227),s.hu=!1))}),await ll(n,e,t)}catch(s){await cn(s)}}function Xa(e,t,n){const s=bt(e);if(s.isPrimaryClient&&0===n||!s.isPrimaryClient&&1===n){const e=[];s.Tu.forEach((n,s)=>{const r=s.view.va(t);r.snapshot&&e.push(r.snapshot)}),function(e,t){const n=bt(e);n.onlineState=t;let s=!1;n.queries.forEach((e,n)=>{for(const r of n.Sa)r.va(t)&&(s=!0)}),s&&La(n)}(s.eventManager,t),e.length&&s.Pu.H_(e),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function Ja(e,t,n){const s=bt(e);s.sharedClientState.updateQueryState(t,"rejected",n);const r=s.Au.get(t),i=r&&r.key;if(i){let e=new bn($t.comparator);e=e.insert(i,us.newNoDocument(i,sn.min()));const n=or().add(i),r=new Xr(sn.min(),new Map,new bn(Pt),e,n);await Ya(s,r),s.du=s.du.remove(i),s.Au.delete(t),al(s)}else await To(s.localStore,t,!1).then(()=>sl(s,t,n)).catch(cn)}async function Za(e,t){const n=bt(e),s=t.batch.batchId;try{const e=await function(e,t){const n=bt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const s=t.batch.keys(),r=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,s){const r=n.batch,i=r.keys();let o=un.resolve();return i.forEach(e=>{o=o.next(()=>s.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);wt(null!==i,48541),t.version.compareTo(i)<0&&(r.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),s.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,r))}(n,e,t,r).next(()=>r.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,s,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=or();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,s))})}(n.localStore,t);nl(n,s,null),tl(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await ll(n,e)}catch(r){await cn(r)}}async function el(e,t,n){const s=bt(e);try{const e=await function(e,t){const n=bt(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let s;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(wt(null!==t,37113),s=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,s,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,s)).next(()=>n.localDocuments.getDocuments(e,s))})}(s.localStore,t);nl(s,t,n),tl(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await ll(s,e)}catch(r){await cn(r)}}function tl(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function nl(e,t,n){const s=bt(e);let r=s.Vu[s.currentUser.toKey()];if(r){const e=r.get(t);e&&(n?e.reject(n):e.resolve(),r=r.remove(t)),s.Vu[s.currentUser.toKey()]=r}}function sl(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const s of e.Iu.get(t))e.Tu.delete(s),n&&e.Pu.yu(s,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||rl(e,t)})}function rl(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(Jo(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),al(e))}function il(e,t,n){for(const s of n)s instanceof Va?(e.Ru.addReference(s.key,t),ol(e,s)):s instanceof Fa?(ft(Ua,"Document no longer in limbo: "+s.key),e.Ru.removeReference(s.key,t),e.Ru.containsKey(s.key)||rl(e,s.key)):yt(19791,{wu:s})}function ol(e,t){const n=t.key,s=n.path.canonicalString();e.du.get(n)||e.Eu.has(s)||(ft(Ua,"New document in limbo: "+n),e.Eu.add(s),al(e))}function al(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new $t(zt.fromString(t)),s=e.fu.next();e.Au.set(s,new za(n)),e.du=e.du.insert(n,s),Xo(e.remoteStore,new Ri(js(Fs(n.path)),s,"TargetPurposeLimboResolution",dn.ce))}}async function ll(e,t,n){const s=bt(e),r=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach((e,a)=>{o.push(s.pu(a,t,n).then(e=>{if((e||n)&&s.isPrimaryClient){const t=e?!e.fromCache:n?.targetChanges.get(a.targetId)?.current;s.sharedClientState.updateQueryState(a.targetId,t?"current":"not-current")}if(e){r.push(e);const t=fo.As(a.targetId,e);i.push(t)}}))}),await Promise.all(o),s.Pu.H_(r),await async function(e,t){const n=bt(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>un.forEach(t,t=>un.forEach(t.Es,s=>n.persistence.referenceDelegate.addReference(e,t.targetId,s)).next(()=>un.forEach(t.ds,s=>n.persistence.referenceDelegate.removeReference(e,t.targetId,s)))))}catch(s){if(!hn(s))throw s;ft(go,"Failed to update sequence numbers: "+s)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),s=t.snapshotVersion,r=t.withLastLimboFreeSnapshotVersion(s);n.Ms=n.Ms.insert(e,r)}}}(s.localStore,i))}async function cl(e,t){const n=bt(e);if(!n.currentUser.isEqual(t)){ft(Ua,"User change. New user:",t.toKey());const e=await vo(n.localStore,t);n.currentUser=t,r="'waitForPendingWrites' promise is rejected due to a user change.",(s=n).mu.forEach(e=>{e.forEach(e=>{e.reject(new Tt(St.CANCELLED,r))})}),s.mu.clear(),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await ll(n,e.Ls)}var s,r}function ul(e,t){const n=bt(e),s=n.Au.get(t);if(s&&s.hu)return or().add(s.key);{let e=or();const s=n.Iu.get(t);if(!s)return e;for(const t of s){const s=n.Tu.get(t);e=e.unionWith(s.view.nu)}return e}}function hl(e){const t=bt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Ya.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ul.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Ja.bind(null,t),t.Pu.H_=Na.bind(null,t.eventManager),t.Pu.yu=Ma.bind(null,t.eventManager),t}class dl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Fo(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return function(e,t,n,s){return new yo(e,t,n,s)}(this.persistence,new mo,e.initialUser,this.serializer)}Cu(e){return new lo(uo.mi,this.serializer)}Du(e){return new Co}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}dl.provider={build:()=>new dl};class fl extends dl{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){wt(this.persistence.referenceDelegate instanceof ho,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Wi(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?Gi.withCacheSize(this.cacheSizeBytes):Gi.DEFAULT;return new lo(e=>ho.mi(e,t),this.serializer)}}class pl{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Xa(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=cl.bind(null,this.syncEngine),await async function(e,t){const n=bt(e);t?(n.Ea.delete(2),await Qo(n)):t||(n.Ea.add(2),await Yo(n),n.Ra.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new ka}createDatastore(e){const t=Fo(e.databaseInfo.databaseId),n=(s=e.databaseInfo,new Ro(s));var s;return function(e,t,n,s){return new $o(e,t,n,s)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,s=e.asyncQueue,r=e=>Xa(this.syncEngine,e,0),i=xo.v()?new xo:new Io,new Wo(t,n,s,r,i);var t,n,s,r,i}createSyncEngine(e,t){return function(e,t,n,s,r,i,o){const a=new Ga(e,t,n,s,r,i);return o&&(a.gu=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(e){const t=bt(e);ft(Ko,"RemoteStore shutting down."),t.Ea.add(5),await Yo(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}pl.provider={build:()=>new pl};class ml{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):pt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const gl="FirestoreClient";class yl{constructor(e,t,n,s,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=s,this.user=ct.UNAUTHENTICATED,this.clientId=Lt.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(n,async e=>{ft(gl,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(ft(gl,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Et;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=_a(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function vl(e,t){e.asyncQueue.verifyOperationInProgress(),ft(gl,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let s=n.initialUser;e.setCredentialChangeListener(async e=>{s.isEqual(e)||(await vo(t.localStore,e),s=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function wl(e,t){e.asyncQueue.verifyOperationInProgress();const n=await async function(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){ft(gl,"Using user provided OfflineComponentProvider");try{await vl(e,e._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!("FirebaseError"===(n=r).name?n.code===St.FAILED_PRECONDITION||n.code===St.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code))throw r;mt("Error using user provided cache. Falling back to memory cache: "+r),await vl(e,new dl)}}else ft(gl,"Using default OfflineComponentProvider"),await vl(e,new fl(void 0));var n;return e._offlineComponents}(e);ft(gl,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>ba(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>ba(t.remoteStore,n)),e._onlineComponents=t}async function bl(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(ft(gl,"Using user provided OnlineComponentProvider"),await wl(e,e._uninitializedComponentsProvider._online)):(ft(gl,"Using default OnlineComponentProvider"),await wl(e,new pl))),e._onlineComponents}async function Sl(e){const t=await bl(e),n=t.eventManager;return n.onListen=qa.bind(null,t.syncEngine),n.onUnlisten=Ka.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=$a.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Wa.bind(null,t.syncEngine),n}function Tl(e,t,n={}){const s=new Et;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,s,r){const i=new ml({next:n=>{i.Nu(),t.enqueueAndForget(()=>async function(e,t){const n=bt(e),s=t.query;let r=3;const i=n.queries.get(s);if(i){const e=i.Sa.indexOf(t);e>=0&&(i.Sa.splice(e,1),0===i.Sa.length?r=t.Da()?0:1:!i.ba()&&t.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}(e,o)),n.fromCache&&"server"===s.source?r.reject(new Tt(St.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(n)},error:e=>r.reject(e)}),o=new Ra(n,i,{includeMetadataChanges:!0,qa:!0});return async function(t,n){const s=bt(t);let r=3;const i=n.query;let o=s.queries.get(i);o?!o.ba()&&n.Da()&&(r=2):(o=new xa,r=n.Da()?0:1);try{switch(r){case 0:o.wa=await s.onListen(i,!0);break;case 1:o.wa=await s.onListen(i,!1);break;case 2:await s.onFirstRemoteStoreListen(i)}}catch(e){const s=_a(e,`Initialization of query '${$s(n.query)}' failed`);return void n.onError(s)}s.queries.set(i,o),o.Sa.push(n),n.va(s.onlineState),o.wa&&n.Fa(o.wa)&&La(s)}(e,o)}(await Sl(e),e.asyncQueue,t,n,s)),s.promise}function El(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const _l=new Map,Cl="firestore.googleapis.com",Il=!0;class Al{constructor(e){if(void 0===e.host){if(void 0!==e.ssl)throw new Tt(St.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Cl,this.ssl=Il}else this.host=e.host,this.ssl=e.ssl??Il;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=zi;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Tt(St.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,s){if(!0===t&&!0===s)throw new Tt(St.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=El(e.experimentalLongPollingOptions??{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Tt(St.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new Tt(St.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new Tt(St.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class xl{constructor(e,t,n,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Al({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Tt(St.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Tt(St.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Al(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Ct;switch(e.type){case"firstParty":return new kt(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Tt(St.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=_l.get(e);t&&(ft("ComponentProvider","Removing Datastore"),_l.delete(e),t.terminate())}(this),Promise.resolve()}}function kl(e,t,n,s={}){e=Xt(e,xl);const r=p(t),i=e._getSettings(),o={...i,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${n}`;r&&(async function(e){(await fetch(e,{credentials:"include"})).ok}(`https://${l}`),y("Firestore",!0)),i.host!==Cl&&i.host!==l&&mt("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:r,emulatorOptions:s};if(!T(c,o)&&(e._setSettings(c),s.mockUserToken)){let t,n;if("string"==typeof s.mockUserToken)t=s.mockUserToken,n=ct.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",s=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i={iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...e};return[a(JSON.stringify({alg:"none",type:"JWT"})),a(JSON.stringify(i)),""].join(".")}(s.mockUserToken,e._app?.options.projectId);const r=s.mockUserToken.sub||s.mockUserToken.user_id;if(!r)throw new Tt(St.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new ct(r)}e._authCredentials=new It(new _t(t,n))}}class Dl{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Dl(this.firestore,e,this._query)}}class Nl{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ml(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nl(this.firestore,e,this._key)}toJSON(){return{type:Nl._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Zt(t,Nl._jsonSchema))return new Nl(e,n||null,new $t(zt.fromString(t.referencePath)))}}Nl._jsonSchemaVersion="firestore/documentReference/1.0",Nl._jsonSchema={type:Jt("string",Nl._jsonSchemaVersion),referencePath:Jt("string")};class Ml extends Dl{constructor(e,t,n){super(e,t,Fs(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nl(this.firestore,null,new $t(e))}withConverter(e){return new Ml(this.firestore,e,this._path)}}function Ll(e,t,...n){if(e=_(e),Ht("collection","path",t),e instanceof xl){const s=zt.fromString(t,...n);return Wt(s),new Ml(e,null,s)}{if(!(e instanceof Nl||e instanceof Ml))throw new Tt(St.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child(zt.fromString(t,...n));return Wt(s),new Ml(e.firestore,null,s)}}function Pl(e,t,...n){if(e=_(e),1===arguments.length&&(t=Lt.newId()),Ht("doc","path",t),e instanceof xl){const s=zt.fromString(t,...n);return Kt(s),new Nl(e,null,new $t(s))}{if(!(e instanceof Nl||e instanceof Ml))throw new Tt(St.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child(zt.fromString(t,...n));return Kt(s),new Nl(e.firestore,e instanceof Ml?e.converter:null,new $t(s))}}const Ol="AsyncQueue";class Rl{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Bo(this,"async_queue_retry"),this._c=()=>{const e=Vo();e&&ft(Ol,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=Vo();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Vo();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new Et;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!hn(e))throw e;ft(Ol,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,pt("INTERNAL UNHANDLED ERROR: ",Vl(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=Ea.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(s),s}uc(){this.nc&&yt(47125,{Pc:Vl(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Vl(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class Fl extends xl{constructor(e,t,n,s){super(e,t,n,s),this.type="firestore",this._queue=new Rl,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Rl(e),this._firestoreClient=void 0,await e}}}function Bl(e,t){const n="object"==typeof e?e:function(e=xe){const t=De.get(e);if(!t&&e===xe&&d())return Ve();if(!t)throw Oe.create("no-app",{appName:e});return t}(),s="string"==typeof e?e:Un,r=function(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const e=h("firestore");e&&kl(r,...e)}return r}function Ul(e){if(e._terminated)throw new Tt(St.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||function(e){const t=e._freezeSettings(),n=(s=e._databaseId,r=e._app?.options.appId||"",i=e._persistenceKey,o=t,new Bn(s,r,i,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,El(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator));var s,r,i,o;e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new yl(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(e){const t=e?._online.build();return{_offline:e?._offline.build(t),_online:t}}(e._componentsProvider))}(e),e._firestoreClient}class jl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jl(An.fromBase64String(e))}catch(t){throw new Tt(St.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new jl(An.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:jl._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Zt(e,jl._jsonSchema))return jl.fromBase64String(e.bytes)}}jl._jsonSchemaVersion="firestore/bytes/1.0",jl._jsonSchema={type:Jt("string",jl._jsonSchemaVersion),bytes:Jt("string")};class zl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Tt(St.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Gl{constructor(e){this._methodName=e}}class ql{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Tt(St.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Tt(St.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Pt(this._lat,e._lat)||Pt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ql._jsonSchemaVersion}}static fromJSON(e){if(Zt(e,ql._jsonSchema))return new ql(e.latitude,e.longitude)}}ql._jsonSchemaVersion="firestore/geoPoint/1.0",ql._jsonSchema={type:Jt("string",ql._jsonSchemaVersion),latitude:Jt("number"),longitude:Jt("number")};class $l{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:$l._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Zt(e,$l._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new $l(e.vectorValues);throw new Tt(St.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}$l._jsonSchemaVersion="firestore/vectorValue/1.0",$l._jsonSchema={type:Jt("string",$l._jsonSchemaVersion),vectorValues:Jt("object")};const Hl=/^__.*__$/;class Kl{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Lr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Mr(e,this.data,t,this.fieldTransforms)}}function Wl(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yt(40011,{Ac:e})}}class Ql{constructor(e,t,n,s,r,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=s,void 0===r&&this.Rc(),this.fieldTransforms=r||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ql({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return oc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(Wl(this.Ac)&&Hl.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Yl{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Fo(e)}Cc(e,t,n,s=!1){return new Ql({Ac:e,methodName:t,Dc:n,path:qt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xl(e){const t=e._freezeSettings(),n=Fo(e._databaseId);return new Yl(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Jl(e,t,n,s,r,i={}){const o=e.Cc(i.merge||i.mergeFields?2:0,t,n,r);nc("Data must be an object, but it was:",o,s);const a=ec(s,o);let l,c;if(i.merge)l=new Cn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const e=[];for(const s of i.mergeFields){const r=sc(t,s,n);if(!o.contains(r))throw new Tt(St.INVALID_ARGUMENT,`Field '${r}' is specified in your field mask but missing from your input data.`);ac(e,r)||e.push(r)}l=new Cn(e),c=o.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=o.fieldTransforms;return new Kl(new ls(a),l,c)}function Zl(e,t){if(tc(e=_(e)))return nc("Unsupported field value:",t,e),ec(e,t);if(e instanceof Gl)return function(e,t){if(!Wl(t.Ac))throw t.Sc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Sc(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let s=0;for(const r of e){let e=Zl(r,t.wc(s));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),s++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=_(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ur(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=nn.fromDate(e);return{timestampValue:hi(t.serializer,n)}}if(e instanceof nn){const n=new nn(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:hi(t.serializer,n)}}if(e instanceof ql)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof jl)return{bytesValue:di(t.serializer,e._byteString)};if(e instanceof Nl){const n=t.databaseId,s=e.firestore._databaseId;if(!s.isEqual(n))throw t.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:mi(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof $l)return n=e,s=t,{mapValue:{fields:{[zn]:{stringValue:$n},[Hn]:{arrayValue:{values:n.toArray().map(e=>{if("number"!=typeof e)throw s.Sc("VectorValues must only contain numeric values.");return lr(s.serializer,e)})}}}}};var n,s;throw t.Sc(`Unsupported field value: ${Yt(e)}`)}(e,t)}function ec(e,t){const n={};return wn(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):vn(e,(e,s)=>{const r=Zl(s,t.mc(e));null!=r&&(n[e]=r)}),{mapValue:{fields:n}}}function tc(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof nn||e instanceof ql||e instanceof jl||e instanceof Nl||e instanceof Gl||e instanceof $l)}function nc(e,t,n){if(!tc(n)||!Qt(n)){const s=Yt(n);throw"an object"===s?t.Sc(e+" a custom object"):t.Sc(e+" "+s)}}function sc(e,t,n){if((t=_(t))instanceof zl)return t._internalPath;if("string"==typeof t)return ic(e,t);throw oc("Field path arguments must be of type string or ",e,!1,void 0,n)}const rc=new RegExp("[~\\*/\\[\\]]");function ic(e,t,n){if(t.search(rc)>=0)throw oc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new zl(...t.split("."))._internalPath}catch(s){throw oc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function oc(e,t,n,s,r){const i=s&&!s.isEmpty(),o=void 0!==r;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${s}`),o&&(l+=` in document ${r}`),l+=")"),new Tt(St.INVALID_ARGUMENT,a+e+l)}function ac(e,t){return e.some(e=>e.isEqual(t))}class lc{constructor(e,t,n,s,r){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Nl(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new cc(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(uc("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class cc extends lc{data(){return super.data()}}function uc(e,t){return"string"==typeof t?ic(e,t):t instanceof zl?t._internalPath:t._delegate._internalPath}class hc{convertValue(e,t="none"){switch(Kn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Nn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw yt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return vn(e,(e,s)=>{n[e]=this.convertValue(s,t)}),n}convertVectorValue(e){const t=e.fields?.[Hn].arrayValue?.values?.map(e=>Dn(e.doubleValue));return new $l(t)}convertGeoPoint(e){return new ql(Dn(e.latitude),Dn(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Vn(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Fn(e));default:return null}}convertTimestamp(e){const t=kn(e);return new nn(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=zt.fromString(e);wt(Oi(n),9688,{name:e});const s=new jn(n.get(1),n.get(3)),r=new $t(n.popFirst(5));return s.isEqual(t)||pt(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),r}}class dc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fc extends lc{constructor(e,t,n,s,r,i){super(e,t,n,s,i),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new pc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(uc("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Tt(St.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=fc._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}fc._jsonSchemaVersion="firestore/documentSnapshot/1.0",fc._jsonSchema={type:Jt("string",fc._jsonSchemaVersion),bundleSource:Jt("string","DocumentSnapshot"),bundleName:Jt("string"),bundle:Jt("string")};class pc extends fc{data(e={}){return super.data(e)}}class mc{constructor(e,t,n,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new dc(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new pc(this._firestore,this._userDataWriter,n.key,n,new dc(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Tt(St.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const s=new pc(e._firestore,e._userDataWriter,n.doc.key,n.doc,new dc(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:s,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const s=new pc(e._firestore,e._userDataWriter,t.doc.key,t.doc,new dc(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let r=-1,i=-1;return 0!==t.type&&(r=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:gc(t.type),doc:s,oldIndex:r,newIndex:i}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Tt(St.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=mc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Lt.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],s=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),s.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function gc(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yt(61501,{type:e})}}mc._jsonSchemaVersion="firestore/querySnapshot/1.0",mc._jsonSchema={type:Jt("string",mc._jsonSchemaVersion),bundleSource:Jt("string","QuerySnapshot"),bundleName:Jt("string"),bundle:Jt("string")};class yc extends hc{constructor(e){super(),this.firestore=e}convertBytes(e){return new jl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Nl(this.firestore,null,t)}}function vc(e){e=Xt(e,Dl);const t=Xt(e.firestore,Fl),n=Ul(t),s=new yc(t);return function(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Tt(St.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(e._query),Tl(n,e._query).then(n=>new mc(t,s,e,n))}function wc(e,t,n){e=Xt(e,Nl);const s=Xt(e.firestore,Fl),r=function(e,t){let n;return n=e?e.toFirestore(t):t,n}(e.converter,t);return function(e,t){return function(e,t){const n=new Et;return e.asyncQueue.enqueueAndForget(async()=>Qa(await function(e){return bl(e).then(e=>e.syncEngine)}(e),t,n)),n.promise}(Ul(e),t)}(s,[Jl(Xl(s),"setDoc",e._key,r,null!==e.converter,n).toMutation(e._key,_r.none())])}!function(e,t=!0){ut="12.5.0",Pe(new C("firestore",(e,{instanceIdentifier:n,options:s})=>{const r=e.getProvider("app").getImmediate(),i=new Fl(new At(e.getProvider("auth-internal")),new Nt(r,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Tt(St.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jn(e.options.projectId,t)}(r,n),r);return s={useFetchStreams:t,...s},i._setSettings(s),i},"PUBLIC").setMultipleInstances(!0)),Fe(at,lt,e),Fe(at,lt,"esm2020")}();function bc(e){return null!==e&&"object"==typeof e&&"constructor"in e&&e.constructor===Object}function Sc(e,t){void 0===e&&(e={}),void 0===t&&(t={});const n=["__proto__","constructor","prototype"];Object.keys(t).filter(e=>n.indexOf(e)<0).forEach(n=>{void 0===e[n]?e[n]=t[n]:bc(t[n])&&bc(e[n])&&Object.keys(t[n]).length>0&&Sc(e[n],t[n])})}Fe("firebase","12.5.0","app");const Tc={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector:()=>null,querySelectorAll:()=>[],getElementById:()=>null,createEvent:()=>({initEvent(){}}),createElement:()=>({children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName:()=>[]}),createElementNS:()=>({}),importNode:()=>null,location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Ec(){const e="undefined"!=typeof document?document:{};return Sc(e,Tc),e}const _c={document:Tc,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle:()=>({getPropertyValue:()=>""}),Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia:()=>({}),requestAnimationFrame:e=>"undefined"==typeof setTimeout?(e(),null):setTimeout(e,0),cancelAnimationFrame(e){"undefined"!=typeof setTimeout&&clearTimeout(e)}};function Cc(){const e="undefined"!=typeof window?window:{};return Sc(e,_c),e}function Ic(e,t){return void 0===t&&(t=0),setTimeout(e,t)}function Ac(){return Date.now()}function xc(e,t){void 0===t&&(t="x");const n=Cc();let s,r,i;const o=function(e){const t=Cc();let n;return t.getComputedStyle&&(n=t.getComputedStyle(e,null)),!n&&e.currentStyle&&(n=e.currentStyle),n||(n=e.style),n}(e);return n.WebKitCSSMatrix?(r=o.transform||o.webkitTransform,r.split(",").length>6&&(r=r.split(", ").map(e=>e.replace(",",".")).join(", ")),i=new n.WebKitCSSMatrix("none"===r?"":r)):(i=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),s=i.toString().split(",")),"x"===t&&(r=n.WebKitCSSMatrix?i.m41:16===s.length?parseFloat(s[12]):parseFloat(s[4])),"y"===t&&(r=n.WebKitCSSMatrix?i.m42:16===s.length?parseFloat(s[13]):parseFloat(s[5])),r||0}function kc(e){return"object"==typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function Dc(e){return"undefined"!=typeof window&&void 0!==window.HTMLElement?e instanceof HTMLElement:e&&(1===e.nodeType||11===e.nodeType)}function Nc(){const e=Object(arguments.length<=0?void 0:arguments[0]),t=["__proto__","constructor","prototype"];for(let n=1;n<arguments.length;n+=1){const s=n<0||arguments.length<=n?void 0:arguments[n];if(null!=s&&!Dc(s)){const n=Object.keys(Object(s)).filter(e=>t.indexOf(e)<0);for(let t=0,r=n.length;t<r;t+=1){const r=n[t],i=Object.getOwnPropertyDescriptor(s,r);void 0!==i&&i.enumerable&&(kc(e[r])&&kc(s[r])?s[r].__swiper__?e[r]=s[r]:Nc(e[r],s[r]):!kc(e[r])&&kc(s[r])?(e[r]={},s[r].__swiper__?e[r]=s[r]:Nc(e[r],s[r])):e[r]=s[r])}}}return e}function Mc(e,t,n){e.style.setProperty(t,n)}function Lc(e){let{swiper:t,targetPosition:n,side:s}=e;const r=Cc(),i=-t.translate;let o,a=null;const l=t.params.speed;t.wrapperEl.style.scrollSnapType="none",r.cancelAnimationFrame(t.cssModeFrameID);const c=n>i?"next":"prev",u=(e,t)=>"next"===c&&e>=t||"prev"===c&&e<=t,h=()=>{o=(new Date).getTime(),null===a&&(a=o);const e=Math.max(Math.min((o-a)/l,1),0),c=.5-Math.cos(e*Math.PI)/2;let d=i+c*(n-i);if(u(d,n)&&(d=n),t.wrapperEl.scrollTo({[s]:d}),u(d,n))return t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.scrollSnapType="",setTimeout(()=>{t.wrapperEl.style.overflow="",t.wrapperEl.scrollTo({[s]:d})}),void r.cancelAnimationFrame(t.cssModeFrameID);t.cssModeFrameID=r.requestAnimationFrame(h)};h()}function Pc(e,t){void 0===t&&(t="");const n=Cc(),s=[...e.children];return n.HTMLSlotElement&&e instanceof HTMLSlotElement&&s.push(...e.assignedElements()),t?s.filter(e=>e.matches(t)):s}function Oc(e){try{return void console.warn(e)}catch(t){}}function Rc(e,t){void 0===t&&(t=[]);const n=document.createElement(e);return n.classList.add(...Array.isArray(t)?t:function(e){return void 0===e&&(e=""),e.trim().split(" ").filter(e=>!!e.trim())}(t)),n}function Vc(e,t){return Cc().getComputedStyle(e,null).getPropertyValue(t)}function Fc(e){let t,n=e;if(n){for(t=0;null!==(n=n.previousSibling);)1===n.nodeType&&(t+=1);return t}}function Bc(e,t,n){const s=Cc();return e["width"===t?"offsetWidth":"offsetHeight"]+parseFloat(s.getComputedStyle(e,null).getPropertyValue("width"===t?"margin-right":"margin-top"))+parseFloat(s.getComputedStyle(e,null).getPropertyValue("width"===t?"margin-left":"margin-bottom"))}function Uc(e){return(Array.isArray(e)?e:[e]).filter(e=>!!e)}let jc,zc,Gc;function qc(){return jc||(jc=function(){const e=Cc(),t=Ec();return{smoothScroll:t.documentElement&&t.documentElement.style&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch)}}()),jc}function $c(e){return void 0===e&&(e={}),zc||(zc=function(e){let{userAgent:t}=void 0===e?{}:e;const n=qc(),s=Cc(),r=s.navigator.platform,i=t||s.navigator.userAgent,o={ios:!1,android:!1},a=s.screen.width,l=s.screen.height,c=i.match(/(Android);?[\s\/]+([\d.]+)?/);let u=i.match(/(iPad).*OS\s([\d_]+)/);const h=i.match(/(iPod)(.*OS\s([\d_]+))?/),d=!u&&i.match(/(iPhone\sOS|iOS)\s([\d_]+)/),f="Win32"===r;let p="MacIntel"===r;return!u&&p&&n.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(`${a}x${l}`)>=0&&(u=i.match(/(Version)\/([\d.]+)/),u||(u=[0,1,"13_0_0"]),p=!1),c&&!f&&(o.os="android",o.android=!0),(u||d||h)&&(o.os="ios",o.ios=!0),o}(e)),zc}function Hc(){return Gc||(Gc=function(){const e=Cc(),t=$c();let n=!1;function s(){const t=e.navigator.userAgent.toLowerCase();return t.indexOf("safari")>=0&&t.indexOf("chrome")<0&&t.indexOf("android")<0}if(s()){const t=String(e.navigator.userAgent);if(t.includes("Version/")){const[e,s]=t.split("Version/")[1].split(" ")[0].split(".").map(e=>Number(e));n=e<16||16===e&&s<2}}const r=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent),i=s();return{isSafari:n||i,needPerspectiveFix:n,need3dFix:i||r&&t.ios,isWebView:r}}()),Gc}const Kc=(e,t,n)=>{t&&!e.classList.contains(n)?e.classList.add(n):!t&&e.classList.contains(n)&&e.classList.remove(n)};const Wc=(e,t,n)=>{t&&!e.classList.contains(n)?e.classList.add(n):!t&&e.classList.contains(n)&&e.classList.remove(n)};const Qc=(e,t)=>{if(!e||e.destroyed||!e.params)return;const n=t.closest(e.isElement?"swiper-slide":`.${e.params.slideClass}`);if(n){let t=n.querySelector(`.${e.params.lazyPreloaderClass}`);!t&&e.isElement&&(n.shadowRoot?t=n.shadowRoot.querySelector(`.${e.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{n.shadowRoot&&(t=n.shadowRoot.querySelector(`.${e.params.lazyPreloaderClass}`),t&&t.remove())})),t&&t.remove()}},Yc=(e,t)=>{if(!e.slides[t])return;const n=e.slides[t].querySelector('[loading="lazy"]');n&&n.removeAttribute("loading")},Xc=e=>{if(!e||e.destroyed||!e.params)return;let t=e.params.lazyPreloadPrevNext;const n=e.slides.length;if(!n||!t||t<0)return;t=Math.min(t,n);const s="auto"===e.params.slidesPerView?e.slidesPerViewDynamic():Math.ceil(e.params.slidesPerView),r=e.activeIndex;if(e.params.grid&&e.params.grid.rows>1){const n=r,i=[n-t];return i.push(...Array.from({length:t}).map((e,t)=>n+s+t)),void e.slides.forEach((t,n)=>{i.includes(t.column)&&Yc(e,n)})}const i=r+s-1;if(e.params.rewind||e.params.loop)for(let o=r-t;o<=i+t;o+=1){const t=(o%n+n)%n;(t<r||t>i)&&Yc(e,t)}else for(let o=Math.max(r-t,0);o<=Math.min(i+t,n-1);o+=1)o!==r&&(o>i||o<r)&&Yc(e,o)};function Jc(e){let{swiper:t,runCallbacks:n,direction:s,step:r}=e;const{activeIndex:i,previousIndex:o}=t;let a=s;a||(a=i>o?"next":i<o?"prev":"reset"),t.emit(`transition${r}`),n&&"reset"===a?t.emit(`slideResetTransition${r}`):n&&i!==o&&(t.emit(`slideChangeTransition${r}`),"next"===a?t.emit(`slideNextTransition${r}`):t.emit(`slidePrevTransition${r}`))}function Zc(e,t,n){const s=Cc(),{params:r}=e,i=r.edgeSwipeDetection,o=r.edgeSwipeThreshold;return!i||!(n<=o||n>=s.innerWidth-o)||"prevent"===i&&(t.preventDefault(),!0)}function eu(e){const t=this,n=Ec();let s=e;s.originalEvent&&(s=s.originalEvent);const r=t.touchEventsData;if("pointerdown"===s.type){if(null!==r.pointerId&&r.pointerId!==s.pointerId)return;r.pointerId=s.pointerId}else"touchstart"===s.type&&1===s.targetTouches.length&&(r.touchId=s.targetTouches[0].identifier);if("touchstart"===s.type)return void Zc(t,s,s.targetTouches[0].pageX);const{params:i,touches:o,enabled:a}=t;if(!a)return;if(!i.simulateTouch&&"mouse"===s.pointerType)return;if(t.animating&&i.preventInteractionOnTransition)return;!t.animating&&i.cssMode&&i.loop&&t.loopFix();let l=s.target;if("wrapper"===i.touchEventsTarget&&!function(e,t){const n=Cc();let s=t.contains(e);!s&&n.HTMLSlotElement&&t instanceof HTMLSlotElement&&(s=[...t.assignedElements()].includes(e),s||(s=function(e,t){const n=[t];for(;n.length>0;){const t=n.shift();if(e===t)return!0;n.push(...t.children,...t.shadowRoot?t.shadowRoot.children:[],...t.assignedElements?t.assignedElements():[])}}(e,t)));return s}(l,t.wrapperEl))return;if("which"in s&&3===s.which)return;if("button"in s&&s.button>0)return;if(r.isTouched&&r.isMoved)return;const c=!!i.noSwipingClass&&""!==i.noSwipingClass,u=s.composedPath?s.composedPath():s.path;c&&s.target&&s.target.shadowRoot&&u&&(l=u[0]);const h=i.noSwipingSelector?i.noSwipingSelector:`.${i.noSwipingClass}`,d=!(!s.target||!s.target.shadowRoot);if(i.noSwiping&&(d?function(e,t){return void 0===t&&(t=this),function t(n){if(!n||n===Ec()||n===Cc())return null;n.assignedSlot&&(n=n.assignedSlot);const s=n.closest(e);return s||n.getRootNode?s||t(n.getRootNode().host):null}(t)}(h,l):l.closest(h)))return void(t.allowClick=!0);if(i.swipeHandler&&!l.closest(i.swipeHandler))return;o.currentX=s.pageX,o.currentY=s.pageY;const f=o.currentX,p=o.currentY;if(!Zc(t,s,f))return;Object.assign(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=f,o.startY=p,r.touchStartTime=Ac(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,i.threshold>0&&(r.allowThresholdMove=!1);let m=!0;l.matches(r.focusableElements)&&(m=!1,"SELECT"===l.nodeName&&(r.isTouched=!1)),n.activeElement&&n.activeElement.matches(r.focusableElements)&&n.activeElement!==l&&("mouse"===s.pointerType||"mouse"!==s.pointerType&&!l.matches(r.focusableElements))&&n.activeElement.blur();const g=m&&t.allowTouchMove&&i.touchStartPreventDefault;!i.touchStartForcePreventDefault&&!g||l.isContentEditable||s.preventDefault(),i.freeMode&&i.freeMode.enabled&&t.freeMode&&t.animating&&!i.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",s)}function tu(e){const t=Ec(),n=this,s=n.touchEventsData,{params:r,touches:i,rtlTranslate:o,enabled:a}=n;if(!a)return;if(!r.simulateTouch&&"mouse"===e.pointerType)return;let l,c=e;if(c.originalEvent&&(c=c.originalEvent),"pointermove"===c.type){if(null!==s.touchId)return;if(c.pointerId!==s.pointerId)return}if("touchmove"===c.type){if(l=[...c.changedTouches].find(e=>e.identifier===s.touchId),!l||l.identifier!==s.touchId)return}else l=c;if(!s.isTouched)return void(s.startMoving&&s.isScrolling&&n.emit("touchMoveOpposite",c));const u=l.pageX,h=l.pageY;if(c.preventedByNestedSwiper)return i.startX=u,void(i.startY=h);if(!n.allowTouchMove)return c.target.matches(s.focusableElements)||(n.allowClick=!1),void(s.isTouched&&(Object.assign(i,{startX:u,startY:h,currentX:u,currentY:h}),s.touchStartTime=Ac()));if(r.touchReleaseOnEdges&&!r.loop)if(n.isVertical()){if(h<i.startY&&n.translate<=n.maxTranslate()||h>i.startY&&n.translate>=n.minTranslate())return s.isTouched=!1,void(s.isMoved=!1)}else{if(o&&(u>i.startX&&-n.translate<=n.maxTranslate()||u<i.startX&&-n.translate>=n.minTranslate()))return;if(!o&&(u<i.startX&&n.translate<=n.maxTranslate()||u>i.startX&&n.translate>=n.minTranslate()))return}if(t.activeElement&&t.activeElement.matches(s.focusableElements)&&t.activeElement!==c.target&&"mouse"!==c.pointerType&&t.activeElement.blur(),t.activeElement&&c.target===t.activeElement&&c.target.matches(s.focusableElements))return s.isMoved=!0,void(n.allowClick=!1);s.allowTouchCallbacks&&n.emit("touchMove",c),i.previousX=i.currentX,i.previousY=i.currentY,i.currentX=u,i.currentY=h;const d=i.currentX-i.startX,f=i.currentY-i.startY;if(n.params.threshold&&Math.sqrt(d**2+f**2)<n.params.threshold)return;if(void 0===s.isScrolling){let e;n.isHorizontal()&&i.currentY===i.startY||n.isVertical()&&i.currentX===i.startX?s.isScrolling=!1:d*d+f*f>=25&&(e=180*Math.atan2(Math.abs(f),Math.abs(d))/Math.PI,s.isScrolling=n.isHorizontal()?e>r.touchAngle:90-e>r.touchAngle)}if(s.isScrolling&&n.emit("touchMoveOpposite",c),void 0===s.startMoving&&(i.currentX===i.startX&&i.currentY===i.startY||(s.startMoving=!0)),s.isScrolling||"touchmove"===c.type&&s.preventTouchMoveFromPointerMove)return void(s.isTouched=!1);if(!s.startMoving)return;n.allowClick=!1,!r.cssMode&&c.cancelable&&c.preventDefault(),r.touchMoveStopPropagation&&!r.nested&&c.stopPropagation();let p=n.isHorizontal()?d:f,m=n.isHorizontal()?i.currentX-i.previousX:i.currentY-i.previousY;r.oneWayMovement&&(p=Math.abs(p)*(o?1:-1),m=Math.abs(m)*(o?1:-1)),i.diff=p,p*=r.touchRatio,o&&(p=-p,m=-m);const g=n.touchesDirection;n.swipeDirection=p>0?"prev":"next",n.touchesDirection=m>0?"prev":"next";const y=n.params.loop&&!r.cssMode,v="next"===n.touchesDirection&&n.allowSlideNext||"prev"===n.touchesDirection&&n.allowSlidePrev;if(!s.isMoved){if(y&&v&&n.loopFix({direction:n.swipeDirection}),s.startTranslate=n.getTranslate(),n.setTransition(0),n.animating){const e=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});n.wrapperEl.dispatchEvent(e)}s.allowMomentumBounce=!1,!r.grabCursor||!0!==n.allowSlideNext&&!0!==n.allowSlidePrev||n.setGrabCursor(!0),n.emit("sliderFirstMove",c)}if((new Date).getTime(),!1!==r._loopSwapReset&&s.isMoved&&s.allowThresholdMove&&g!==n.touchesDirection&&y&&v&&Math.abs(p)>=1)return Object.assign(i,{startX:u,startY:h,currentX:u,currentY:h,startTranslate:s.currentTranslate}),s.loopSwapReset=!0,void(s.startTranslate=s.currentTranslate);n.emit("sliderMove",c),s.isMoved=!0,s.currentTranslate=p+s.startTranslate;let w=!0,b=r.resistanceRatio;if(r.touchReleaseOnEdges&&(b=0),p>0?(y&&v&&s.allowThresholdMove&&s.currentTranslate>(r.centeredSlides?n.minTranslate()-n.slidesSizesGrid[n.activeIndex+1]-("auto"!==r.slidesPerView&&n.slides.length-r.slidesPerView>=2?n.slidesSizesGrid[n.activeIndex+1]+n.params.spaceBetween:0)-n.params.spaceBetween:n.minTranslate())&&n.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),s.currentTranslate>n.minTranslate()&&(w=!1,r.resistance&&(s.currentTranslate=n.minTranslate()-1+(-n.minTranslate()+s.startTranslate+p)**b))):p<0&&(y&&v&&s.allowThresholdMove&&s.currentTranslate<(r.centeredSlides?n.maxTranslate()+n.slidesSizesGrid[n.slidesSizesGrid.length-1]+n.params.spaceBetween+("auto"!==r.slidesPerView&&n.slides.length-r.slidesPerView>=2?n.slidesSizesGrid[n.slidesSizesGrid.length-1]+n.params.spaceBetween:0):n.maxTranslate())&&n.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:n.slides.length-("auto"===r.slidesPerView?n.slidesPerViewDynamic():Math.ceil(parseFloat(r.slidesPerView,10)))}),s.currentTranslate<n.maxTranslate()&&(w=!1,r.resistance&&(s.currentTranslate=n.maxTranslate()+1-(n.maxTranslate()-s.startTranslate-p)**b))),w&&(c.preventedByNestedSwiper=!0),!n.allowSlideNext&&"next"===n.swipeDirection&&s.currentTranslate<s.startTranslate&&(s.currentTranslate=s.startTranslate),!n.allowSlidePrev&&"prev"===n.swipeDirection&&s.currentTranslate>s.startTranslate&&(s.currentTranslate=s.startTranslate),n.allowSlidePrev||n.allowSlideNext||(s.currentTranslate=s.startTranslate),r.threshold>0){if(!(Math.abs(p)>r.threshold||s.allowThresholdMove))return void(s.currentTranslate=s.startTranslate);if(!s.allowThresholdMove)return s.allowThresholdMove=!0,i.startX=i.currentX,i.startY=i.currentY,s.currentTranslate=s.startTranslate,void(i.diff=n.isHorizontal()?i.currentX-i.startX:i.currentY-i.startY)}r.followFinger&&!r.cssMode&&((r.freeMode&&r.freeMode.enabled&&n.freeMode||r.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),r.freeMode&&r.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(s.currentTranslate),n.setTranslate(s.currentTranslate))}function nu(e){const t=this,n=t.touchEventsData;let s,r=e;r.originalEvent&&(r=r.originalEvent);if("touchend"===r.type||"touchcancel"===r.type){if(s=[...r.changedTouches].find(e=>e.identifier===n.touchId),!s||s.identifier!==n.touchId)return}else{if(null!==n.touchId)return;if(r.pointerId!==n.pointerId)return;s=r}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(r.type)){if(!(["pointercancel","contextmenu"].includes(r.type)&&(t.browser.isSafari||t.browser.isWebView)))return}n.pointerId=null,n.touchId=null;const{params:i,touches:o,rtlTranslate:a,slidesGrid:l,enabled:c}=t;if(!c)return;if(!i.simulateTouch&&"mouse"===r.pointerType)return;if(n.allowTouchCallbacks&&t.emit("touchEnd",r),n.allowTouchCallbacks=!1,!n.isTouched)return n.isMoved&&i.grabCursor&&t.setGrabCursor(!1),n.isMoved=!1,void(n.startMoving=!1);i.grabCursor&&n.isMoved&&n.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);const u=Ac(),h=u-n.touchStartTime;if(t.allowClick){const e=r.path||r.composedPath&&r.composedPath();t.updateClickedSlide(e&&e[0]||r.target,e),t.emit("tap click",r),h<300&&u-n.lastClickTime<300&&t.emit("doubleTap doubleClick",r)}if(n.lastClickTime=Ac(),Ic(()=>{t.destroyed||(t.allowClick=!0)}),!n.isTouched||!n.isMoved||!t.swipeDirection||0===o.diff&&!n.loopSwapReset||n.currentTranslate===n.startTranslate&&!n.loopSwapReset)return n.isTouched=!1,n.isMoved=!1,void(n.startMoving=!1);let d;if(n.isTouched=!1,n.isMoved=!1,n.startMoving=!1,d=i.followFinger?a?t.translate:-t.translate:-n.currentTranslate,i.cssMode)return;if(i.freeMode&&i.freeMode.enabled)return void t.freeMode.onTouchEnd({currentPos:d});const f=d>=-t.maxTranslate()&&!t.params.loop;let p=0,m=t.slidesSizesGrid[0];for(let b=0;b<l.length;b+=b<i.slidesPerGroupSkip?1:i.slidesPerGroup){const e=b<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;void 0!==l[b+e]?(f||d>=l[b]&&d<l[b+e])&&(p=b,m=l[b+e]-l[b]):(f||d>=l[b])&&(p=b,m=l[l.length-1]-l[l.length-2])}let g=null,y=null;i.rewind&&(t.isBeginning?y=i.virtual&&i.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(g=0));const v=(d-l[p])/m,w=p<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;if(h>i.longSwipesMs){if(!i.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(v>=i.longSwipesRatio?t.slideTo(i.rewind&&t.isEnd?g:p+w):t.slideTo(p)),"prev"===t.swipeDirection&&(v>1-i.longSwipesRatio?t.slideTo(p+w):null!==y&&v<0&&Math.abs(v)>i.longSwipesRatio?t.slideTo(y):t.slideTo(p))}else{if(!i.shortSwipes)return void t.slideTo(t.activeIndex);t.navigation&&(r.target===t.navigation.nextEl||r.target===t.navigation.prevEl)?r.target===t.navigation.nextEl?t.slideTo(p+w):t.slideTo(p):("next"===t.swipeDirection&&t.slideTo(null!==g?g:p+w),"prev"===t.swipeDirection&&t.slideTo(null!==y?y:p))}}function su(){const e=this,{params:t,el:n}=e;if(n&&0===n.offsetWidth)return;t.breakpoints&&e.setBreakpoint();const{allowSlideNext:s,allowSlidePrev:r,snapGrid:i}=e,o=e.virtual&&e.params.virtual.enabled;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses();const a=o&&t.loop;!("auto"===t.slidesPerView||t.slidesPerView>1)||!e.isEnd||e.isBeginning||e.params.centeredSlides||a?e.params.loop&&!o?e.slideToLoop(e.realIndex,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0):e.slideTo(e.slides.length-1,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&(clearTimeout(e.autoplay.resizeTimeout),e.autoplay.resizeTimeout=setTimeout(()=>{e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.resume()},500)),e.allowSlidePrev=r,e.allowSlideNext=s,e.params.watchOverflow&&i!==e.snapGrid&&e.checkOverflow()}function ru(e){const t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function iu(){const e=this,{wrapperEl:t,rtlTranslate:n,enabled:s}=e;if(!s)return;let r;e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,0===e.translate&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();const i=e.maxTranslate()-e.minTranslate();r=0===i?0:(e.translate-e.minTranslate())/i,r!==e.progress&&e.updateProgress(n?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}function ou(e){const t=this;Qc(t,e.target),t.params.cssMode||"auto"!==t.params.slidesPerView&&!t.params.autoHeight||t.update()}function au(){const e=this;e.documentTouchHandlerProceeded||(e.documentTouchHandlerProceeded=!0,e.params.touchReleaseOnEdges&&(e.el.style.touchAction="auto"))}const lu=(e,t)=>{const n=Ec(),{params:s,el:r,wrapperEl:i,device:o}=e,a=!!s.nested,l="on"===t?"addEventListener":"removeEventListener",c=t;r&&"string"!=typeof r&&(n[l]("touchstart",e.onDocumentTouchStart,{passive:!1,capture:a}),r[l]("touchstart",e.onTouchStart,{passive:!1}),r[l]("pointerdown",e.onTouchStart,{passive:!1}),n[l]("touchmove",e.onTouchMove,{passive:!1,capture:a}),n[l]("pointermove",e.onTouchMove,{passive:!1,capture:a}),n[l]("touchend",e.onTouchEnd,{passive:!0}),n[l]("pointerup",e.onTouchEnd,{passive:!0}),n[l]("pointercancel",e.onTouchEnd,{passive:!0}),n[l]("touchcancel",e.onTouchEnd,{passive:!0}),n[l]("pointerout",e.onTouchEnd,{passive:!0}),n[l]("pointerleave",e.onTouchEnd,{passive:!0}),n[l]("contextmenu",e.onTouchEnd,{passive:!0}),(s.preventClicks||s.preventClicksPropagation)&&r[l]("click",e.onClick,!0),s.cssMode&&i[l]("scroll",e.onScroll),s.updateOnWindowResize?e[c](o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",su,!0):e[c]("observerUpdate",su,!0),r[l]("load",e.onLoad,{capture:!0}))};const cu=(e,t)=>e.grid&&t.grid&&t.grid.rows>1;var uu={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function hu(e,t){return function(n){void 0===n&&(n={});const s=Object.keys(n)[0],r=n[s];"object"==typeof r&&null!==r?(!0===e[s]&&(e[s]={enabled:!0}),"navigation"===s&&e[s]&&e[s].enabled&&!e[s].prevEl&&!e[s].nextEl&&(e[s].auto=!0),["pagination","scrollbar"].indexOf(s)>=0&&e[s]&&e[s].enabled&&!e[s].el&&(e[s].auto=!0),s in e&&"enabled"in r?("object"!=typeof e[s]||"enabled"in e[s]||(e[s].enabled=!0),e[s]||(e[s]={enabled:!1}),Nc(t,n)):Nc(t,n)):Nc(t,n)}}const du={eventsEmitter:{on(e,t,n){const s=this;if(!s.eventsListeners||s.destroyed)return s;if("function"!=typeof t)return s;const r=n?"unshift":"push";return e.split(" ").forEach(e=>{s.eventsListeners[e]||(s.eventsListeners[e]=[]),s.eventsListeners[e][r](t)}),s},once(e,t,n){const s=this;if(!s.eventsListeners||s.destroyed)return s;if("function"!=typeof t)return s;function r(){s.off(e,r),r.__emitterProxy&&delete r.__emitterProxy;for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];t.apply(s,i)}return r.__emitterProxy=t,s.on(e,r,n)},onAny(e,t){const n=this;if(!n.eventsListeners||n.destroyed)return n;if("function"!=typeof e)return n;const s=t?"unshift":"push";return n.eventsAnyListeners.indexOf(e)<0&&n.eventsAnyListeners[s](e),n},offAny(e){const t=this;if(!t.eventsListeners||t.destroyed)return t;if(!t.eventsAnyListeners)return t;const n=t.eventsAnyListeners.indexOf(e);return n>=0&&t.eventsAnyListeners.splice(n,1),t},off(e,t){const n=this;return!n.eventsListeners||n.destroyed?n:n.eventsListeners?(e.split(" ").forEach(e=>{void 0===t?n.eventsListeners[e]=[]:n.eventsListeners[e]&&n.eventsListeners[e].forEach((s,r)=>{(s===t||s.__emitterProxy&&s.__emitterProxy===t)&&n.eventsListeners[e].splice(r,1)})}),n):n},emit(){const e=this;if(!e.eventsListeners||e.destroyed)return e;if(!e.eventsListeners)return e;let t,n,s;for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];"string"==typeof i[0]||Array.isArray(i[0])?(t=i[0],n=i.slice(1,i.length),s=e):(t=i[0].events,n=i[0].data,s=i[0].context||e),n.unshift(s);return(Array.isArray(t)?t:t.split(" ")).forEach(t=>{e.eventsAnyListeners&&e.eventsAnyListeners.length&&e.eventsAnyListeners.forEach(e=>{e.apply(s,[t,...n])}),e.eventsListeners&&e.eventsListeners[t]&&e.eventsListeners[t].forEach(e=>{e.apply(s,n)})}),e}},update:{updateSize:function(){const e=this;let t,n;const s=e.el;t=void 0!==e.params.width&&null!==e.params.width?e.params.width:s.clientWidth,n=void 0!==e.params.height&&null!==e.params.height?e.params.height:s.clientHeight,0===t&&e.isHorizontal()||0===n&&e.isVertical()||(t=t-parseInt(Vc(s,"padding-left")||0,10)-parseInt(Vc(s,"padding-right")||0,10),n=n-parseInt(Vc(s,"padding-top")||0,10)-parseInt(Vc(s,"padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(n)&&(n=0),Object.assign(e,{width:t,height:n,size:e.isHorizontal()?t:n}))},updateSlides:function(){const e=this;function t(t,n){return parseFloat(t.getPropertyValue(e.getDirectionLabel(n))||0)}const n=e.params,{wrapperEl:s,slidesEl:r,size:i,rtlTranslate:o,wrongRTL:a}=e,l=e.virtual&&n.virtual.enabled,c=l?e.virtual.slides.length:e.slides.length,u=Pc(r,`.${e.params.slideClass}, swiper-slide`),h=l?e.virtual.slides.length:u.length;let d=[];const f=[],p=[];let m=n.slidesOffsetBefore;"function"==typeof m&&(m=n.slidesOffsetBefore.call(e));let g=n.slidesOffsetAfter;"function"==typeof g&&(g=n.slidesOffsetAfter.call(e));const y=e.snapGrid.length,v=e.slidesGrid.length;let w=n.spaceBetween,b=-m,S=0,T=0;if(void 0===i)return;"string"==typeof w&&w.indexOf("%")>=0?w=parseFloat(w.replace("%",""))/100*i:"string"==typeof w&&(w=parseFloat(w)),e.virtualSize=-w,u.forEach(e=>{o?e.style.marginLeft="":e.style.marginRight="",e.style.marginBottom="",e.style.marginTop=""}),n.centeredSlides&&n.cssMode&&(Mc(s,"--swiper-centered-offset-before",""),Mc(s,"--swiper-centered-offset-after",""));const E=n.grid&&n.grid.rows>1&&e.grid;let _;E?e.grid.initSlides(u):e.grid&&e.grid.unsetSlides();const C="auto"===n.slidesPerView&&n.breakpoints&&Object.keys(n.breakpoints).filter(e=>void 0!==n.breakpoints[e].slidesPerView).length>0;for(let I=0;I<h;I+=1){let s;if(_=0,u[I]&&(s=u[I]),E&&e.grid.updateSlide(I,s,u),!u[I]||"none"!==Vc(s,"display")){if("auto"===n.slidesPerView){C&&(u[I].style[e.getDirectionLabel("width")]="");const r=getComputedStyle(s),i=s.style.transform,o=s.style.webkitTransform;if(i&&(s.style.transform="none"),o&&(s.style.webkitTransform="none"),n.roundLengths)_=e.isHorizontal()?Bc(s,"width"):Bc(s,"height");else{const e=t(r,"width"),n=t(r,"padding-left"),i=t(r,"padding-right"),o=t(r,"margin-left"),a=t(r,"margin-right"),l=r.getPropertyValue("box-sizing");if(l&&"border-box"===l)_=e+o+a;else{const{clientWidth:t,offsetWidth:r}=s;_=e+n+i+o+a+(r-t)}}i&&(s.style.transform=i),o&&(s.style.webkitTransform=o),n.roundLengths&&(_=Math.floor(_))}else _=(i-(n.slidesPerView-1)*w)/n.slidesPerView,n.roundLengths&&(_=Math.floor(_)),u[I]&&(u[I].style[e.getDirectionLabel("width")]=`${_}px`);u[I]&&(u[I].swiperSlideSize=_),p.push(_),n.centeredSlides?(b=b+_/2+S/2+w,0===S&&0!==I&&(b=b-i/2-w),0===I&&(b=b-i/2-w),Math.abs(b)<.001&&(b=0),n.roundLengths&&(b=Math.floor(b)),T%n.slidesPerGroup===0&&d.push(b),f.push(b)):(n.roundLengths&&(b=Math.floor(b)),(T-Math.min(e.params.slidesPerGroupSkip,T))%e.params.slidesPerGroup===0&&d.push(b),f.push(b),b=b+_+w),e.virtualSize+=_+w,S=_,T+=1}}if(e.virtualSize=Math.max(e.virtualSize,i)+g,o&&a&&("slide"===n.effect||"coverflow"===n.effect)&&(s.style.width=`${e.virtualSize+w}px`),n.setWrapperSize&&(s.style[e.getDirectionLabel("width")]=`${e.virtualSize+w}px`),E&&e.grid.updateWrapperSize(_,d),!n.centeredSlides){const t=[];for(let s=0;s<d.length;s+=1){let r=d[s];n.roundLengths&&(r=Math.floor(r)),d[s]<=e.virtualSize-i&&t.push(r)}d=t,Math.floor(e.virtualSize-i)-Math.floor(d[d.length-1])>1&&d.push(e.virtualSize-i)}if(l&&n.loop){const t=p[0]+w;if(n.slidesPerGroup>1){const s=Math.ceil((e.virtual.slidesBefore+e.virtual.slidesAfter)/n.slidesPerGroup),r=t*n.slidesPerGroup;for(let e=0;e<s;e+=1)d.push(d[d.length-1]+r)}for(let s=0;s<e.virtual.slidesBefore+e.virtual.slidesAfter;s+=1)1===n.slidesPerGroup&&d.push(d[d.length-1]+t),f.push(f[f.length-1]+t),e.virtualSize+=t}if(0===d.length&&(d=[0]),0!==w){const t=e.isHorizontal()&&o?"marginLeft":e.getDirectionLabel("marginRight");u.filter((e,t)=>!(n.cssMode&&!n.loop)||t!==u.length-1).forEach(e=>{e.style[t]=`${w}px`})}if(n.centeredSlides&&n.centeredSlidesBounds){let e=0;p.forEach(t=>{e+=t+(w||0)}),e-=w;const t=e>i?e-i:0;d=d.map(e=>e<=0?-m:e>t?t+g:e)}if(n.centerInsufficientSlides){let e=0;p.forEach(t=>{e+=t+(w||0)}),e-=w;const t=(n.slidesOffsetBefore||0)+(n.slidesOffsetAfter||0);if(e+t<i){const n=(i-e-t)/2;d.forEach((e,t)=>{d[t]=e-n}),f.forEach((e,t)=>{f[t]=e+n})}}if(Object.assign(e,{slides:u,snapGrid:d,slidesGrid:f,slidesSizesGrid:p}),n.centeredSlides&&n.cssMode&&!n.centeredSlidesBounds){Mc(s,"--swiper-centered-offset-before",-d[0]+"px"),Mc(s,"--swiper-centered-offset-after",e.size/2-p[p.length-1]/2+"px");const t=-e.snapGrid[0],n=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map(e=>e+t),e.slidesGrid=e.slidesGrid.map(e=>e+n)}if(h!==c&&e.emit("slidesLengthChange"),d.length!==y&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),f.length!==v&&e.emit("slidesGridLengthChange"),n.watchSlidesProgress&&e.updateSlidesOffset(),e.emit("slidesUpdated"),!(l||n.cssMode||"slide"!==n.effect&&"fade"!==n.effect)){const t=`${n.containerModifierClass}backface-hidden`,s=e.el.classList.contains(t);h<=n.maxBackfaceHiddenSlides?s||e.el.classList.add(t):s&&e.el.classList.remove(t)}},updateAutoHeight:function(e){const t=this,n=[],s=t.virtual&&t.params.virtual.enabled;let r,i=0;"number"==typeof e?t.setTransition(e):!0===e&&t.setTransition(t.params.speed);const o=e=>s?t.slides[t.getSlideIndexByData(e)]:t.slides[e];if("auto"!==t.params.slidesPerView&&t.params.slidesPerView>1)if(t.params.centeredSlides)(t.visibleSlides||[]).forEach(e=>{n.push(e)});else for(r=0;r<Math.ceil(t.params.slidesPerView);r+=1){const e=t.activeIndex+r;if(e>t.slides.length&&!s)break;n.push(o(e))}else n.push(o(t.activeIndex));for(r=0;r<n.length;r+=1)if(void 0!==n[r]){const e=n[r].offsetHeight;i=e>i?e:i}(i||0===i)&&(t.wrapperEl.style.height=`${i}px`)},updateSlidesOffset:function(){const e=this,t=e.slides,n=e.isElement?e.isHorizontal()?e.wrapperEl.offsetLeft:e.wrapperEl.offsetTop:0;for(let s=0;s<t.length;s+=1)t[s].swiperSlideOffset=(e.isHorizontal()?t[s].offsetLeft:t[s].offsetTop)-n-e.cssOverflowAdjustment()},updateSlidesProgress:function(e){void 0===e&&(e=this&&this.translate||0);const t=this,n=t.params,{slides:s,rtlTranslate:r,snapGrid:i}=t;if(0===s.length)return;void 0===s[0].swiperSlideOffset&&t.updateSlidesOffset();let o=-e;r&&(o=e),t.visibleSlidesIndexes=[],t.visibleSlides=[];let a=n.spaceBetween;"string"==typeof a&&a.indexOf("%")>=0?a=parseFloat(a.replace("%",""))/100*t.size:"string"==typeof a&&(a=parseFloat(a));for(let l=0;l<s.length;l+=1){const e=s[l];let c=e.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(c-=s[0].swiperSlideOffset);const u=(o+(n.centeredSlides?t.minTranslate():0)-c)/(e.swiperSlideSize+a),h=(o-i[0]+(n.centeredSlides?t.minTranslate():0)-c)/(e.swiperSlideSize+a),d=-(o-c),f=d+t.slidesSizesGrid[l],p=d>=0&&d<=t.size-t.slidesSizesGrid[l],m=d>=0&&d<t.size-1||f>1&&f<=t.size||d<=0&&f>=t.size;m&&(t.visibleSlides.push(e),t.visibleSlidesIndexes.push(l)),Kc(e,m,n.slideVisibleClass),Kc(e,p,n.slideFullyVisibleClass),e.progress=r?-u:u,e.originalProgress=r?-h:h}},updateProgress:function(e){const t=this;if(void 0===e){const n=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*n||0}const n=t.params,s=t.maxTranslate()-t.minTranslate();let{progress:r,isBeginning:i,isEnd:o,progressLoop:a}=t;const l=i,c=o;if(0===s)r=0,i=!0,o=!0;else{r=(e-t.minTranslate())/s;const n=Math.abs(e-t.minTranslate())<1,a=Math.abs(e-t.maxTranslate())<1;i=n||r<=0,o=a||r>=1,n&&(r=0),a&&(r=1)}if(n.loop){const n=t.getSlideIndexByData(0),s=t.getSlideIndexByData(t.slides.length-1),r=t.slidesGrid[n],i=t.slidesGrid[s],o=t.slidesGrid[t.slidesGrid.length-1],l=Math.abs(e);a=l>=r?(l-r)/o:(l+o-i)/o,a>1&&(a-=1)}Object.assign(t,{progress:r,progressLoop:a,isBeginning:i,isEnd:o}),(n.watchSlidesProgress||n.centeredSlides&&n.autoHeight)&&t.updateSlidesProgress(e),i&&!l&&t.emit("reachBeginning toEdge"),o&&!c&&t.emit("reachEnd toEdge"),(l&&!i||c&&!o)&&t.emit("fromEdge"),t.emit("progress",r)},updateSlidesClasses:function(){const e=this,{slides:t,params:n,slidesEl:s,activeIndex:r}=e,i=e.virtual&&n.virtual.enabled,o=e.grid&&n.grid&&n.grid.rows>1,a=e=>Pc(s,`.${n.slideClass}${e}, swiper-slide${e}`)[0];let l,c,u;if(i)if(n.loop){let t=r-e.virtual.slidesBefore;t<0&&(t=e.virtual.slides.length+t),t>=e.virtual.slides.length&&(t-=e.virtual.slides.length),l=a(`[data-swiper-slide-index="${t}"]`)}else l=a(`[data-swiper-slide-index="${r}"]`);else o?(l=t.find(e=>e.column===r),u=t.find(e=>e.column===r+1),c=t.find(e=>e.column===r-1)):l=t[r];l&&(o||(u=function(e,t){const n=[];for(;e.nextElementSibling;){const s=e.nextElementSibling;t?s.matches(t)&&n.push(s):n.push(s),e=s}return n}(l,`.${n.slideClass}, swiper-slide`)[0],n.loop&&!u&&(u=t[0]),c=function(e,t){const n=[];for(;e.previousElementSibling;){const s=e.previousElementSibling;t?s.matches(t)&&n.push(s):n.push(s),e=s}return n}(l,`.${n.slideClass}, swiper-slide`)[0],n.loop&&0===!c&&(c=t[t.length-1]))),t.forEach(e=>{Wc(e,e===l,n.slideActiveClass),Wc(e,e===u,n.slideNextClass),Wc(e,e===c,n.slidePrevClass)}),e.emitSlidesClasses()},updateActiveIndex:function(e){const t=this,n=t.rtlTranslate?t.translate:-t.translate,{snapGrid:s,params:r,activeIndex:i,realIndex:o,snapIndex:a}=t;let l,c=e;const u=e=>{let n=e-t.virtual.slidesBefore;return n<0&&(n=t.virtual.slides.length+n),n>=t.virtual.slides.length&&(n-=t.virtual.slides.length),n};if(void 0===c&&(c=function(e){const{slidesGrid:t,params:n}=e,s=e.rtlTranslate?e.translate:-e.translate;let r;for(let i=0;i<t.length;i+=1)void 0!==t[i+1]?s>=t[i]&&s<t[i+1]-(t[i+1]-t[i])/2?r=i:s>=t[i]&&s<t[i+1]&&(r=i+1):s>=t[i]&&(r=i);return n.normalizeSlideIndex&&(r<0||void 0===r)&&(r=0),r}(t)),s.indexOf(n)>=0)l=s.indexOf(n);else{const e=Math.min(r.slidesPerGroupSkip,c);l=e+Math.floor((c-e)/r.slidesPerGroup)}if(l>=s.length&&(l=s.length-1),c===i&&!t.params.loop)return void(l!==a&&(t.snapIndex=l,t.emit("snapIndexChange")));if(c===i&&t.params.loop&&t.virtual&&t.params.virtual.enabled)return void(t.realIndex=u(c));const h=t.grid&&r.grid&&r.grid.rows>1;let d;if(t.virtual&&r.virtual.enabled&&r.loop)d=u(c);else if(h){const e=t.slides.find(e=>e.column===c);let n=parseInt(e.getAttribute("data-swiper-slide-index"),10);Number.isNaN(n)&&(n=Math.max(t.slides.indexOf(e),0)),d=Math.floor(n/r.grid.rows)}else if(t.slides[c]){const e=t.slides[c].getAttribute("data-swiper-slide-index");d=e?parseInt(e,10):c}else d=c;Object.assign(t,{previousSnapIndex:a,snapIndex:l,previousRealIndex:o,realIndex:d,previousIndex:i,activeIndex:c}),t.initialized&&Xc(t),t.emit("activeIndexChange"),t.emit("snapIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&(o!==d&&t.emit("realIndexChange"),t.emit("slideChange"))},updateClickedSlide:function(e,t){const n=this,s=n.params;let r=e.closest(`.${s.slideClass}, swiper-slide`);!r&&n.isElement&&t&&t.length>1&&t.includes(e)&&[...t.slice(t.indexOf(e)+1,t.length)].forEach(e=>{!r&&e.matches&&e.matches(`.${s.slideClass}, swiper-slide`)&&(r=e)});let i,o=!1;if(r)for(let a=0;a<n.slides.length;a+=1)if(n.slides[a]===r){o=!0,i=a;break}if(!r||!o)return n.clickedSlide=void 0,void(n.clickedIndex=void 0);n.clickedSlide=r,n.virtual&&n.params.virtual.enabled?n.clickedIndex=parseInt(r.getAttribute("data-swiper-slide-index"),10):n.clickedIndex=i,s.slideToClickedSlide&&void 0!==n.clickedIndex&&n.clickedIndex!==n.activeIndex&&n.slideToClickedSlide()}},translate:{getTranslate:function(e){void 0===e&&(e=this.isHorizontal()?"x":"y");const{params:t,rtlTranslate:n,translate:s,wrapperEl:r}=this;if(t.virtualTranslate)return n?-s:s;if(t.cssMode)return s;let i=xc(r,e);return i+=this.cssOverflowAdjustment(),n&&(i=-i),i||0},setTranslate:function(e,t){const n=this,{rtlTranslate:s,params:r,wrapperEl:i,progress:o}=n;let a,l=0,c=0;n.isHorizontal()?l=s?-e:e:c=e,r.roundLengths&&(l=Math.floor(l),c=Math.floor(c)),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?l:c,r.cssMode?i[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-l:-c:r.virtualTranslate||(n.isHorizontal()?l-=n.cssOverflowAdjustment():c-=n.cssOverflowAdjustment(),i.style.transform=`translate3d(${l}px, ${c}px, 0px)`);const u=n.maxTranslate()-n.minTranslate();a=0===u?0:(e-n.minTranslate())/u,a!==o&&n.updateProgress(e),n.emit("setTranslate",n.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(e,t,n,s,r){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===n&&(n=!0),void 0===s&&(s=!0);const i=this,{params:o,wrapperEl:a}=i;if(i.animating&&o.preventInteractionOnTransition)return!1;const l=i.minTranslate(),c=i.maxTranslate();let u;if(u=s&&e>l?l:s&&e<c?c:e,i.updateProgress(u),o.cssMode){const e=i.isHorizontal();if(0===t)a[e?"scrollLeft":"scrollTop"]=-u;else{if(!i.support.smoothScroll)return Lc({swiper:i,targetPosition:-u,side:e?"left":"top"}),!0;a.scrollTo({[e?"left":"top"]:-u,behavior:"smooth"})}return!0}return 0===t?(i.setTransition(0),i.setTranslate(u),n&&(i.emit("beforeTransitionStart",t,r),i.emit("transitionEnd"))):(i.setTransition(t),i.setTranslate(u),n&&(i.emit("beforeTransitionStart",t,r),i.emit("transitionStart")),i.animating||(i.animating=!0,i.onTranslateToWrapperTransitionEnd||(i.onTranslateToWrapperTransitionEnd=function(e){i&&!i.destroyed&&e.target===this&&(i.wrapperEl.removeEventListener("transitionend",i.onTranslateToWrapperTransitionEnd),i.onTranslateToWrapperTransitionEnd=null,delete i.onTranslateToWrapperTransitionEnd,i.animating=!1,n&&i.emit("transitionEnd"))}),i.wrapperEl.addEventListener("transitionend",i.onTranslateToWrapperTransitionEnd))),!0}},transition:{setTransition:function(e,t){const n=this;n.params.cssMode||(n.wrapperEl.style.transitionDuration=`${e}ms`,n.wrapperEl.style.transitionDelay=0===e?"0ms":""),n.emit("setTransition",e,t)},transitionStart:function(e,t){void 0===e&&(e=!0);const n=this,{params:s}=n;s.cssMode||(s.autoHeight&&n.updateAutoHeight(),Jc({swiper:n,runCallbacks:e,direction:t,step:"Start"}))},transitionEnd:function(e,t){void 0===e&&(e=!0);const n=this,{params:s}=n;n.animating=!1,s.cssMode||(n.setTransition(0),Jc({swiper:n,runCallbacks:e,direction:t,step:"End"}))}},slide:{slideTo:function(e,t,n,s,r){void 0===e&&(e=0),void 0===n&&(n=!0),"string"==typeof e&&(e=parseInt(e,10));const i=this;let o=e;o<0&&(o=0);const{params:a,snapGrid:l,slidesGrid:c,previousIndex:u,activeIndex:h,rtlTranslate:d,wrapperEl:f,enabled:p}=i;if(!p&&!s&&!r||i.destroyed||i.animating&&a.preventInteractionOnTransition)return!1;void 0===t&&(t=i.params.speed);const m=Math.min(i.params.slidesPerGroupSkip,o);let g=m+Math.floor((o-m)/i.params.slidesPerGroup);g>=l.length&&(g=l.length-1);const y=-l[g];if(a.normalizeSlideIndex)for(let S=0;S<c.length;S+=1){const e=-Math.floor(100*y),t=Math.floor(100*c[S]),n=Math.floor(100*c[S+1]);void 0!==c[S+1]?e>=t&&e<n-(n-t)/2?o=S:e>=t&&e<n&&(o=S+1):e>=t&&(o=S)}if(i.initialized&&o!==h){if(!i.allowSlideNext&&(d?y>i.translate&&y>i.minTranslate():y<i.translate&&y<i.minTranslate()))return!1;if(!i.allowSlidePrev&&y>i.translate&&y>i.maxTranslate()&&(h||0)!==o)return!1}let v;o!==(u||0)&&n&&i.emit("beforeSlideChangeStart"),i.updateProgress(y),v=o>h?"next":o<h?"prev":"reset";const w=i.virtual&&i.params.virtual.enabled;if(!(w&&r)&&(d&&-y===i.translate||!d&&y===i.translate))return i.updateActiveIndex(o),a.autoHeight&&i.updateAutoHeight(),i.updateSlidesClasses(),"slide"!==a.effect&&i.setTranslate(y),"reset"!==v&&(i.transitionStart(n,v),i.transitionEnd(n,v)),!1;if(a.cssMode){const e=i.isHorizontal(),n=d?y:-y;if(0===t)w&&(i.wrapperEl.style.scrollSnapType="none",i._immediateVirtual=!0),w&&!i._cssModeVirtualInitialSet&&i.params.initialSlide>0?(i._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{f[e?"scrollLeft":"scrollTop"]=n})):f[e?"scrollLeft":"scrollTop"]=n,w&&requestAnimationFrame(()=>{i.wrapperEl.style.scrollSnapType="",i._immediateVirtual=!1});else{if(!i.support.smoothScroll)return Lc({swiper:i,targetPosition:n,side:e?"left":"top"}),!0;f.scrollTo({[e?"left":"top"]:n,behavior:"smooth"})}return!0}const b=Hc().isSafari;return w&&!r&&b&&i.isElement&&i.virtual.update(!1,!1,o),i.setTransition(t),i.setTranslate(y),i.updateActiveIndex(o),i.updateSlidesClasses(),i.emit("beforeTransitionStart",t,s),i.transitionStart(n,v),0===t?i.transitionEnd(n,v):i.animating||(i.animating=!0,i.onSlideToWrapperTransitionEnd||(i.onSlideToWrapperTransitionEnd=function(e){i&&!i.destroyed&&e.target===this&&(i.wrapperEl.removeEventListener("transitionend",i.onSlideToWrapperTransitionEnd),i.onSlideToWrapperTransitionEnd=null,delete i.onSlideToWrapperTransitionEnd,i.transitionEnd(n,v))}),i.wrapperEl.addEventListener("transitionend",i.onSlideToWrapperTransitionEnd)),!0},slideToLoop:function(e,t,n,s){if(void 0===e&&(e=0),void 0===n&&(n=!0),"string"==typeof e){e=parseInt(e,10)}const r=this;if(r.destroyed)return;void 0===t&&(t=r.params.speed);const i=r.grid&&r.params.grid&&r.params.grid.rows>1;let o=e;if(r.params.loop)if(r.virtual&&r.params.virtual.enabled)o+=r.virtual.slidesBefore;else{let e;if(i){const t=o*r.params.grid.rows;e=r.slides.find(e=>1*e.getAttribute("data-swiper-slide-index")===t).column}else e=r.getSlideIndexByData(o);const t=i?Math.ceil(r.slides.length/r.params.grid.rows):r.slides.length,{centeredSlides:n}=r.params;let a=r.params.slidesPerView;"auto"===a?a=r.slidesPerViewDynamic():(a=Math.ceil(parseFloat(r.params.slidesPerView,10)),n&&a%2==0&&(a+=1));let l=t-e<a;if(n&&(l=l||e<Math.ceil(a/2)),s&&n&&"auto"!==r.params.slidesPerView&&!i&&(l=!1),l){const s=n?e<r.activeIndex?"prev":"next":e-r.activeIndex-1<r.params.slidesPerView?"next":"prev";r.loopFix({direction:s,slideTo:!0,activeSlideIndex:"next"===s?e+1:e-t+1,slideRealIndex:"next"===s?r.realIndex:void 0})}if(i){const e=o*r.params.grid.rows;o=r.slides.find(t=>1*t.getAttribute("data-swiper-slide-index")===e).column}else o=r.getSlideIndexByData(o)}return requestAnimationFrame(()=>{r.slideTo(o,t,n,s)}),r},slideNext:function(e,t,n){void 0===t&&(t=!0);const s=this,{enabled:r,params:i,animating:o}=s;if(!r||s.destroyed)return s;void 0===e&&(e=s.params.speed);let a=i.slidesPerGroup;"auto"===i.slidesPerView&&1===i.slidesPerGroup&&i.slidesPerGroupAuto&&(a=Math.max(s.slidesPerViewDynamic("current",!0),1));const l=s.activeIndex<i.slidesPerGroupSkip?1:a,c=s.virtual&&i.virtual.enabled;if(i.loop){if(o&&!c&&i.loopPreventsSliding)return!1;if(s.loopFix({direction:"next"}),s._clientLeft=s.wrapperEl.clientLeft,s.activeIndex===s.slides.length-1&&i.cssMode)return requestAnimationFrame(()=>{s.slideTo(s.activeIndex+l,e,t,n)}),!0}return i.rewind&&s.isEnd?s.slideTo(0,e,t,n):s.slideTo(s.activeIndex+l,e,t,n)},slidePrev:function(e,t,n){void 0===t&&(t=!0);const s=this,{params:r,snapGrid:i,slidesGrid:o,rtlTranslate:a,enabled:l,animating:c}=s;if(!l||s.destroyed)return s;void 0===e&&(e=s.params.speed);const u=s.virtual&&r.virtual.enabled;if(r.loop){if(c&&!u&&r.loopPreventsSliding)return!1;s.loopFix({direction:"prev"}),s._clientLeft=s.wrapperEl.clientLeft}function h(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}const d=h(a?s.translate:-s.translate),f=i.map(e=>h(e)),p=r.freeMode&&r.freeMode.enabled;let m=i[f.indexOf(d)-1];if(void 0===m&&(r.cssMode||p)){let e;i.forEach((t,n)=>{d>=t&&(e=n)}),void 0!==e&&(m=p?i[e]:i[e>0?e-1:e])}let g=0;if(void 0!==m&&(g=o.indexOf(m),g<0&&(g=s.activeIndex-1),"auto"===r.slidesPerView&&1===r.slidesPerGroup&&r.slidesPerGroupAuto&&(g=g-s.slidesPerViewDynamic("previous",!0)+1,g=Math.max(g,0))),r.rewind&&s.isBeginning){const r=s.params.virtual&&s.params.virtual.enabled&&s.virtual?s.virtual.slides.length-1:s.slides.length-1;return s.slideTo(r,e,t,n)}return r.loop&&0===s.activeIndex&&r.cssMode?(requestAnimationFrame(()=>{s.slideTo(g,e,t,n)}),!0):s.slideTo(g,e,t,n)},slideReset:function(e,t,n){void 0===t&&(t=!0);const s=this;if(!s.destroyed)return void 0===e&&(e=s.params.speed),s.slideTo(s.activeIndex,e,t,n)},slideToClosest:function(e,t,n,s){void 0===t&&(t=!0),void 0===s&&(s=.5);const r=this;if(r.destroyed)return;void 0===e&&(e=r.params.speed);let i=r.activeIndex;const o=Math.min(r.params.slidesPerGroupSkip,i),a=o+Math.floor((i-o)/r.params.slidesPerGroup),l=r.rtlTranslate?r.translate:-r.translate;if(l>=r.snapGrid[a]){const e=r.snapGrid[a];l-e>(r.snapGrid[a+1]-e)*s&&(i+=r.params.slidesPerGroup)}else{const e=r.snapGrid[a-1];l-e<=(r.snapGrid[a]-e)*s&&(i-=r.params.slidesPerGroup)}return i=Math.max(i,0),i=Math.min(i,r.slidesGrid.length-1),r.slideTo(i,e,t,n)},slideToClickedSlide:function(){const e=this;if(e.destroyed)return;const{params:t,slidesEl:n}=e,s="auto"===t.slidesPerView?e.slidesPerViewDynamic():t.slidesPerView;let r,i=e.getSlideIndexWhenGrid(e.clickedIndex);const o=e.isElement?"swiper-slide":`.${t.slideClass}`,a=e.grid&&e.params.grid&&e.params.grid.rows>1;if(t.loop){if(e.animating)return;r=parseInt(e.clickedSlide.getAttribute("data-swiper-slide-index"),10),t.centeredSlides?e.slideToLoop(r):i>(a?(e.slides.length-s)/2-(e.params.grid.rows-1):e.slides.length-s)?(e.loopFix(),i=e.getSlideIndex(Pc(n,`${o}[data-swiper-slide-index="${r}"]`)[0]),Ic(()=>{e.slideTo(i)})):e.slideTo(i)}else e.slideTo(i)}},loop:{loopCreate:function(e,t){const n=this,{params:s,slidesEl:r}=n;if(!s.loop||n.virtual&&n.params.virtual.enabled)return;const i=()=>{Pc(r,`.${s.slideClass}, swiper-slide`).forEach((e,t)=>{e.setAttribute("data-swiper-slide-index",t)})},o=n.grid&&s.grid&&s.grid.rows>1;s.loopAddBlankSlides&&(s.slidesPerGroup>1||o)&&(()=>{const e=Pc(r,`.${s.slideBlankClass}`);e.forEach(e=>{e.remove()}),e.length>0&&(n.recalcSlides(),n.updateSlides())})();const a=s.slidesPerGroup*(o?s.grid.rows:1),l=n.slides.length%a!==0,c=o&&n.slides.length%s.grid.rows!==0,u=e=>{for(let t=0;t<e;t+=1){const e=n.isElement?Rc("swiper-slide",[s.slideBlankClass]):Rc("div",[s.slideClass,s.slideBlankClass]);n.slidesEl.append(e)}};if(l){if(s.loopAddBlankSlides){u(a-n.slides.length%a),n.recalcSlides(),n.updateSlides()}else Oc("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");i()}else if(c){if(s.loopAddBlankSlides){u(s.grid.rows-n.slides.length%s.grid.rows),n.recalcSlides(),n.updateSlides()}else Oc("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");i()}else i();n.loopFix({slideRealIndex:e,direction:s.centeredSlides?void 0:"next",initial:t})},loopFix:function(e){let{slideRealIndex:t,slideTo:n=!0,direction:s,setTranslate:r,activeSlideIndex:i,initial:o,byController:a,byMousewheel:l}=void 0===e?{}:e;const c=this;if(!c.params.loop)return;c.emit("beforeLoopFix");const{slides:u,allowSlidePrev:h,allowSlideNext:d,slidesEl:f,params:p}=c,{centeredSlides:m,initialSlide:g}=p;if(c.allowSlidePrev=!0,c.allowSlideNext=!0,c.virtual&&p.virtual.enabled)return n&&(p.centeredSlides||0!==c.snapIndex?p.centeredSlides&&c.snapIndex<p.slidesPerView?c.slideTo(c.virtual.slides.length+c.snapIndex,0,!1,!0):c.snapIndex===c.snapGrid.length-1&&c.slideTo(c.virtual.slidesBefore,0,!1,!0):c.slideTo(c.virtual.slides.length,0,!1,!0)),c.allowSlidePrev=h,c.allowSlideNext=d,void c.emit("loopFix");let y=p.slidesPerView;"auto"===y?y=c.slidesPerViewDynamic():(y=Math.ceil(parseFloat(p.slidesPerView,10)),m&&y%2==0&&(y+=1));const v=p.slidesPerGroupAuto?y:p.slidesPerGroup;let w=m?Math.max(v,Math.ceil(y/2)):v;w%v!==0&&(w+=v-w%v),w+=p.loopAdditionalSlides,c.loopedSlides=w;const b=c.grid&&p.grid&&p.grid.rows>1;u.length<y+w||"cards"===c.params.effect&&u.length<y+2*w?Oc("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled or not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):b&&"row"===p.grid.fill&&Oc("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const S=[],T=[],E=b?Math.ceil(u.length/p.grid.rows):u.length,_=o&&E-g<y&&!m;let C=_?g:c.activeIndex;void 0===i?i=c.getSlideIndex(u.find(e=>e.classList.contains(p.slideActiveClass))):C=i;const I="next"===s||!s,A="prev"===s||!s;let x=0,k=0;const D=(b?u[i].column:i)+(m&&void 0===r?-y/2+.5:0);if(D<w){x=Math.max(w-D,v);for(let e=0;e<w-D;e+=1){const t=e-Math.floor(e/E)*E;if(b){const e=E-t-1;for(let t=u.length-1;t>=0;t-=1)u[t].column===e&&S.push(t)}else S.push(E-t-1)}}else if(D+y>E-w){k=Math.max(D-(E-2*w),v),_&&(k=Math.max(k,y-E+g+1));for(let e=0;e<k;e+=1){const t=e-Math.floor(e/E)*E;b?u.forEach((e,n)=>{e.column===t&&T.push(n)}):T.push(t)}}if(c.__preventObserver__=!0,requestAnimationFrame(()=>{c.__preventObserver__=!1}),"cards"===c.params.effect&&u.length<y+2*w&&(T.includes(i)&&T.splice(T.indexOf(i),1),S.includes(i)&&S.splice(S.indexOf(i),1)),A&&S.forEach(e=>{u[e].swiperLoopMoveDOM=!0,f.prepend(u[e]),u[e].swiperLoopMoveDOM=!1}),I&&T.forEach(e=>{u[e].swiperLoopMoveDOM=!0,f.append(u[e]),u[e].swiperLoopMoveDOM=!1}),c.recalcSlides(),"auto"===p.slidesPerView?c.updateSlides():b&&(S.length>0&&A||T.length>0&&I)&&c.slides.forEach((e,t)=>{c.grid.updateSlide(t,e,c.slides)}),p.watchSlidesProgress&&c.updateSlidesOffset(),n)if(S.length>0&&A){if(void 0===t){const e=c.slidesGrid[C],t=c.slidesGrid[C+x]-e;l?c.setTranslate(c.translate-t):(c.slideTo(C+Math.ceil(x),0,!1,!0),r&&(c.touchEventsData.startTranslate=c.touchEventsData.startTranslate-t,c.touchEventsData.currentTranslate=c.touchEventsData.currentTranslate-t))}else if(r){const e=b?S.length/p.grid.rows:S.length;c.slideTo(c.activeIndex+e,0,!1,!0),c.touchEventsData.currentTranslate=c.translate}}else if(T.length>0&&I)if(void 0===t){const e=c.slidesGrid[C],t=c.slidesGrid[C-k]-e;l?c.setTranslate(c.translate-t):(c.slideTo(C-k,0,!1,!0),r&&(c.touchEventsData.startTranslate=c.touchEventsData.startTranslate-t,c.touchEventsData.currentTranslate=c.touchEventsData.currentTranslate-t))}else{const e=b?T.length/p.grid.rows:T.length;c.slideTo(c.activeIndex-e,0,!1,!0)}if(c.allowSlidePrev=h,c.allowSlideNext=d,c.controller&&c.controller.control&&!a){const e={slideRealIndex:t,direction:s,setTranslate:r,activeSlideIndex:i,byController:!0};Array.isArray(c.controller.control)?c.controller.control.forEach(t=>{!t.destroyed&&t.params.loop&&t.loopFix({...e,slideTo:t.params.slidesPerView===p.slidesPerView&&n})}):c.controller.control instanceof c.constructor&&c.controller.control.params.loop&&c.controller.control.loopFix({...e,slideTo:c.controller.control.params.slidesPerView===p.slidesPerView&&n})}c.emit("loopFix")},loopDestroy:function(){const e=this,{params:t,slidesEl:n}=e;if(!t.loop||!n||e.virtual&&e.params.virtual.enabled)return;e.recalcSlides();const s=[];e.slides.forEach(e=>{const t=void 0===e.swiperSlideIndex?1*e.getAttribute("data-swiper-slide-index"):e.swiperSlideIndex;s[t]=e}),e.slides.forEach(e=>{e.removeAttribute("data-swiper-slide-index")}),s.forEach(e=>{n.append(e)}),e.recalcSlides(),e.slideTo(e.realIndex,0)}},grabCursor:{setGrabCursor:function(e){const t=this;if(!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)return;const n="container"===t.params.touchEventsTarget?t.el:t.wrapperEl;t.isElement&&(t.__preventObserver__=!0),n.style.cursor="move",n.style.cursor=e?"grabbing":"grab",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1})},unsetGrabCursor:function(){const e=this;e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e.isElement&&(e.__preventObserver__=!0),e["container"===e.params.touchEventsTarget?"el":"wrapperEl"].style.cursor="",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1}))}},events:{attachEvents:function(){const e=this,{params:t}=e;e.onTouchStart=eu.bind(e),e.onTouchMove=tu.bind(e),e.onTouchEnd=nu.bind(e),e.onDocumentTouchStart=au.bind(e),t.cssMode&&(e.onScroll=iu.bind(e)),e.onClick=ru.bind(e),e.onLoad=ou.bind(e),lu(e,"on")},detachEvents:function(){lu(this,"off")}},breakpoints:{setBreakpoint:function(){const e=this,{realIndex:t,initialized:n,params:s,el:r}=e,i=s.breakpoints;if(!i||i&&0===Object.keys(i).length)return;const o=Ec(),a="window"!==s.breakpointsBase&&s.breakpointsBase?"container":s.breakpointsBase,l=["window","container"].includes(s.breakpointsBase)||!s.breakpointsBase?e.el:o.querySelector(s.breakpointsBase),c=e.getBreakpoint(i,a,l);if(!c||e.currentBreakpoint===c)return;const u=(c in i?i[c]:void 0)||e.originalParams,h=cu(e,s),d=cu(e,u),f=e.params.grabCursor,p=u.grabCursor,m=s.enabled;h&&!d?(r.classList.remove(`${s.containerModifierClass}grid`,`${s.containerModifierClass}grid-column`),e.emitContainerClasses()):!h&&d&&(r.classList.add(`${s.containerModifierClass}grid`),(u.grid.fill&&"column"===u.grid.fill||!u.grid.fill&&"column"===s.grid.fill)&&r.classList.add(`${s.containerModifierClass}grid-column`),e.emitContainerClasses()),f&&!p?e.unsetGrabCursor():!f&&p&&e.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(t=>{if(void 0===u[t])return;const n=s[t]&&s[t].enabled,r=u[t]&&u[t].enabled;n&&!r&&e[t].disable(),!n&&r&&e[t].enable()});const g=u.direction&&u.direction!==s.direction,y=s.loop&&(u.slidesPerView!==s.slidesPerView||g),v=s.loop;g&&n&&e.changeDirection(),Nc(e.params,u);const w=e.params.enabled,b=e.params.loop;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),m&&!w?e.disable():!m&&w&&e.enable(),e.currentBreakpoint=c,e.emit("_beforeBreakpoint",u),n&&(y?(e.loopDestroy(),e.loopCreate(t),e.updateSlides()):!v&&b?(e.loopCreate(t),e.updateSlides()):v&&!b&&e.loopDestroy()),e.emit("breakpoint",u)},getBreakpoint:function(e,t,n){if(void 0===t&&(t="window"),!e||"container"===t&&!n)return;let s=!1;const r=Cc(),i="window"===t?r.innerHeight:n.clientHeight,o=Object.keys(e).map(e=>{if("string"==typeof e&&0===e.indexOf("@")){const t=parseFloat(e.substr(1));return{value:i*t,point:e}}return{value:e,point:e}});o.sort((e,t)=>parseInt(e.value,10)-parseInt(t.value,10));for(let a=0;a<o.length;a+=1){const{point:e,value:i}=o[a];"window"===t?r.matchMedia(`(min-width: ${i}px)`).matches&&(s=e):i<=n.clientWidth&&(s=e)}return s||"max"}},checkOverflow:{checkOverflow:function(){const e=this,{isLocked:t,params:n}=e,{slidesOffsetBefore:s}=n;if(s){const t=e.slides.length-1,n=e.slidesGrid[t]+e.slidesSizesGrid[t]+2*s;e.isLocked=e.size>n}else e.isLocked=1===e.snapGrid.length;!0===n.allowSlideNext&&(e.allowSlideNext=!e.isLocked),!0===n.allowSlidePrev&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}},classes:{addClasses:function(){const e=this,{classNames:t,params:n,rtl:s,el:r,device:i}=e,o=function(e,t){const n=[];return e.forEach(e=>{"object"==typeof e?Object.keys(e).forEach(s=>{e[s]&&n.push(t+s)}):"string"==typeof e&&n.push(t+e)}),n}(["initialized",n.direction,{"free-mode":e.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:s},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&"column"===n.grid.fill},{android:i.android},{ios:i.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides},{"watch-progress":n.watchSlidesProgress}],n.containerModifierClass);t.push(...o),r.classList.add(...t),e.emitContainerClasses()},removeClasses:function(){const{el:e,classNames:t}=this;e&&"string"!=typeof e&&(e.classList.remove(...t),this.emitContainerClasses())}}},fu={};class pu{constructor(){let e,t;for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];1===s.length&&s[0].constructor&&"Object"===Object.prototype.toString.call(s[0]).slice(8,-1)?t=s[0]:[e,t]=s,t||(t={}),t=Nc({},t),e&&!t.el&&(t.el=e);const i=Ec();if(t.el&&"string"==typeof t.el&&i.querySelectorAll(t.el).length>1){const e=[];return i.querySelectorAll(t.el).forEach(n=>{const s=Nc({},t,{el:n});e.push(new pu(s))}),e}const o=this;o.__swiper__=!0,o.support=qc(),o.device=$c({userAgent:t.userAgent}),o.browser=Hc(),o.eventsListeners={},o.eventsAnyListeners=[],o.modules=[...o.__modules__],t.modules&&Array.isArray(t.modules)&&o.modules.push(...t.modules);const a={};o.modules.forEach(e=>{e({params:t,swiper:o,extendParams:hu(t,a),on:o.on.bind(o),once:o.once.bind(o),off:o.off.bind(o),emit:o.emit.bind(o)})});const l=Nc({},uu,a);return o.params=Nc({},l,fu,t),o.originalParams=Nc({},o.params),o.passedParams=Nc({},t),o.params&&o.params.on&&Object.keys(o.params.on).forEach(e=>{o.on(e,o.params.on[e])}),o.params&&o.params.onAny&&o.onAny(o.params.onAny),Object.assign(o,{enabled:o.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:()=>"horizontal"===o.params.direction,isVertical:()=>"vertical"===o.params.direction,activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:o.params.allowSlideNext,allowSlidePrev:o.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:o.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:o.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),o.emit("_swiper"),o.params.init&&o.init(),o}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:t,params:n}=this,s=Fc(Pc(t,`.${n.slideClass}, swiper-slide`)[0]);return Fc(e)-s}getSlideIndexByData(e){return this.getSlideIndex(this.slides.find(t=>1*t.getAttribute("data-swiper-slide-index")===e))}getSlideIndexWhenGrid(e){return this.grid&&this.params.grid&&this.params.grid.rows>1&&("column"===this.params.grid.fill?e=Math.floor(e/this.params.grid.rows):"row"===this.params.grid.fill&&(e%=Math.ceil(this.slides.length/this.params.grid.rows))),e}recalcSlides(){const{slidesEl:e,params:t}=this;this.slides=Pc(e,`.${t.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const n=this;e=Math.min(Math.max(e,0),1);const s=n.minTranslate(),r=(n.maxTranslate()-s)*e+s;n.translateTo(r,void 0===t?0:t),n.updateActiveIndex(),n.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter(t=>0===t.indexOf("swiper")||0===t.indexOf(e.params.containerModifierClass));e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter(e=>0===e.indexOf("swiper-slide")||0===e.indexOf(t.params.slideClass)).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach(n=>{const s=e.getSlideClasses(n);t.push({slideEl:n,classNames:s}),e.emit("_slideClass",n,s)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){void 0===e&&(e="current"),void 0===t&&(t=!1);const{params:n,slides:s,slidesGrid:r,slidesSizesGrid:i,size:o,activeIndex:a}=this;let l=1;if("number"==typeof n.slidesPerView)return n.slidesPerView;if(n.centeredSlides){let e,t=s[a]?Math.ceil(s[a].swiperSlideSize):0;for(let n=a+1;n<s.length;n+=1)s[n]&&!e&&(t+=Math.ceil(s[n].swiperSlideSize),l+=1,t>o&&(e=!0));for(let n=a-1;n>=0;n-=1)s[n]&&!e&&(t+=s[n].swiperSlideSize,l+=1,t>o&&(e=!0))}else if("current"===e)for(let c=a+1;c<s.length;c+=1){(t?r[c]+i[c]-r[a]<o:r[c]-r[a]<o)&&(l+=1)}else for(let c=a-1;c>=0;c-=1){r[a]-r[c]<o&&(l+=1)}return l}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:n}=e;function s(){const t=e.rtlTranslate?-1*e.translate:e.translate,n=Math.min(Math.max(t,e.maxTranslate()),e.minTranslate());e.setTranslate(n),e.updateActiveIndex(),e.updateSlidesClasses()}let r;if(n.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(t=>{t.complete&&Qc(e,t)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),n.freeMode&&n.freeMode.enabled&&!n.cssMode)s(),n.autoHeight&&e.updateAutoHeight();else{if(("auto"===n.slidesPerView||n.slidesPerView>1)&&e.isEnd&&!n.centeredSlides){const t=e.virtual&&n.virtual.enabled?e.virtual.slides:e.slides;r=e.slideTo(t.length-1,0,!1,!0)}else r=e.slideTo(e.activeIndex,0,!1,!0);r||s()}n.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){void 0===t&&(t=!0);const n=this,s=n.params.direction;return e||(e="horizontal"===s?"vertical":"horizontal"),e===s||"horizontal"!==e&&"vertical"!==e||(n.el.classList.remove(`${n.params.containerModifierClass}${s}`),n.el.classList.add(`${n.params.containerModifierClass}${e}`),n.emitContainerClasses(),n.params.direction=e,n.slides.forEach(t=>{"vertical"===e?t.style.width="":t.style.height=""}),n.emit("changeDirection"),t&&n.update()),n}changeLanguageDirection(e){const t=this;t.rtl&&"rtl"===e||!t.rtl&&"ltr"===e||(t.rtl="rtl"===e,t.rtlTranslate="horizontal"===t.params.direction&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let n=e||t.params.el;if("string"==typeof n&&(n=document.querySelector(n)),!n)return!1;n.swiper=t,n.parentNode&&n.parentNode.host&&n.parentNode.host.nodeName===t.params.swiperElementNodeName.toUpperCase()&&(t.isElement=!0);const s=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let r=(()=>{if(n&&n.shadowRoot&&n.shadowRoot.querySelector){return n.shadowRoot.querySelector(s())}return Pc(n,s())[0]})();return!r&&t.params.createElements&&(r=Rc("div",t.params.wrapperClass),n.append(r),Pc(n,`.${t.params.slideClass}`).forEach(e=>{r.append(e)})),Object.assign(t,{el:n,wrapperEl:r,slidesEl:t.isElement&&!n.parentNode.host.slideSlots?n.parentNode.host:r,hostEl:t.isElement?n.parentNode.host:n,mounted:!0,rtl:"rtl"===n.dir.toLowerCase()||"rtl"===Vc(n,"direction"),rtlTranslate:"horizontal"===t.params.direction&&("rtl"===n.dir.toLowerCase()||"rtl"===Vc(n,"direction")),wrongRTL:"-webkit-box"===Vc(r,"display")}),!0}init(e){const t=this;if(t.initialized)return t;if(!1===t.mount(e))return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(void 0,!0),t.attachEvents();const n=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&n.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),n.forEach(e=>{e.complete?Qc(t,e):e.addEventListener("load",e=>{Qc(t,e.target)})}),Xc(t),t.initialized=!0,Xc(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);const n=this,{params:s,el:r,wrapperEl:i,slides:o}=n;return void 0===n.params||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),s.loop&&n.loopDestroy(),t&&(n.removeClasses(),r&&"string"!=typeof r&&r.removeAttribute("style"),i&&i.removeAttribute("style"),o&&o.length&&o.forEach(e=>{e.classList.remove(s.slideVisibleClass,s.slideFullyVisibleClass,s.slideActiveClass,s.slideNextClass,s.slidePrevClass),e.removeAttribute("style"),e.removeAttribute("data-swiper-slide-index")})),n.emit("destroy"),Object.keys(n.eventsListeners).forEach(e=>{n.off(e)}),!1!==e&&(n.el&&"string"!=typeof n.el&&(n.el.swiper=null),function(e){const t=e;Object.keys(t).forEach(e=>{try{t[e]=null}catch(n){}try{delete t[e]}catch(n){}})}(n)),n.destroyed=!0),null}static extendDefaults(e){Nc(fu,e)}static get extendedDefaults(){return fu}static get defaults(){return uu}static installModule(e){pu.prototype.__modules__||(pu.prototype.__modules__=[]);const t=pu.prototype.__modules__;"function"==typeof e&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(e=>pu.installModule(e)),pu):(pu.installModule(e),pu)}}function mu(e){let{swiper:t,extendParams:n,on:s,emit:r}=e;function i(e){let n;return e&&"string"==typeof e&&t.isElement&&(n=t.el.querySelector(e)||t.hostEl.querySelector(e),n)?n:(e&&("string"==typeof e&&(n=[...document.querySelectorAll(e)]),t.params.uniqueNavElements&&"string"==typeof e&&n&&n.length>1&&1===t.el.querySelectorAll(e).length?n=t.el.querySelector(e):n&&1===n.length&&(n=n[0])),e&&!n?e:n)}function o(e,n){const s=t.params.navigation;(e=Uc(e)).forEach(e=>{e&&(e.classList[n?"add":"remove"](...s.disabledClass.split(" ")),"BUTTON"===e.tagName&&(e.disabled=n),t.params.watchOverflow&&t.enabled&&e.classList[t.isLocked?"add":"remove"](s.lockClass))})}function a(){const{nextEl:e,prevEl:n}=t.navigation;if(t.params.loop)return o(n,!1),void o(e,!1);o(n,t.isBeginning&&!t.params.rewind),o(e,t.isEnd&&!t.params.rewind)}function l(e){e.preventDefault(),(!t.isBeginning||t.params.loop||t.params.rewind)&&(t.slidePrev(),r("navigationPrev"))}function c(e){e.preventDefault(),(!t.isEnd||t.params.loop||t.params.rewind)&&(t.slideNext(),r("navigationNext"))}function u(){const e=t.params.navigation;if(t.params.navigation=function(e,t,n,s){return e.params.createElements&&Object.keys(s).forEach(r=>{if(!n[r]&&!0===n.auto){let i=Pc(e.el,`.${s[r]}`)[0];i||(i=Rc("div",s[r]),i.className=s[r],e.el.append(i)),n[r]=i,t[r]=i}}),n}(t,t.originalParams.navigation,t.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!e.nextEl&&!e.prevEl)return;let n=i(e.nextEl),s=i(e.prevEl);Object.assign(t.navigation,{nextEl:n,prevEl:s}),n=Uc(n),s=Uc(s);const r=(n,s)=>{n&&n.addEventListener("click","next"===s?c:l),!t.enabled&&n&&n.classList.add(...e.lockClass.split(" "))};n.forEach(e=>r(e,"next")),s.forEach(e=>r(e,"prev"))}function h(){let{nextEl:e,prevEl:n}=t.navigation;e=Uc(e),n=Uc(n);const s=(e,n)=>{e.removeEventListener("click","next"===n?c:l),e.classList.remove(...t.params.navigation.disabledClass.split(" "))};e.forEach(e=>s(e,"next")),n.forEach(e=>s(e,"prev"))}n({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),t.navigation={nextEl:null,prevEl:null},s("init",()=>{!1===t.params.navigation.enabled?d():(u(),a())}),s("toEdge fromEdge lock unlock",()=>{a()}),s("destroy",()=>{h()}),s("enable disable",()=>{let{nextEl:e,prevEl:n}=t.navigation;e=Uc(e),n=Uc(n),t.enabled?a():[...e,...n].filter(e=>!!e).forEach(e=>e.classList.add(t.params.navigation.lockClass))}),s("click",(e,n)=>{let{nextEl:s,prevEl:i}=t.navigation;s=Uc(s),i=Uc(i);const o=n.target;let a=i.includes(o)||s.includes(o);if(t.isElement&&!a){const e=n.path||n.composedPath&&n.composedPath();e&&(a=e.find(e=>s.includes(e)||i.includes(e)))}if(t.params.navigation.hideOnClick&&!a){if(t.pagination&&t.params.pagination&&t.params.pagination.clickable&&(t.pagination.el===o||t.pagination.el.contains(o)))return;let e;s.length?e=s[0].classList.contains(t.params.navigation.hiddenClass):i.length&&(e=i[0].classList.contains(t.params.navigation.hiddenClass)),r(!0===e?"navigationShow":"navigationHide"),[...s,...i].filter(e=>!!e).forEach(e=>e.classList.toggle(t.params.navigation.hiddenClass))}});const d=()=>{t.el.classList.add(...t.params.navigation.navigationDisabledClass.split(" ")),h()};Object.assign(t.navigation,{enable:()=>{t.el.classList.remove(...t.params.navigation.navigationDisabledClass.split(" ")),u(),a()},disable:d,update:a,init:u,destroy:h})}Object.keys(du).forEach(e=>{Object.keys(du[e]).forEach(t=>{pu.prototype[t]=du[e][t]})}),pu.use([function(e){let{swiper:t,on:n,emit:s}=e;const r=Cc();let i=null,o=null;const a=()=>{t&&!t.destroyed&&t.initialized&&(s("beforeResize"),s("resize"))},l=()=>{t&&!t.destroyed&&t.initialized&&s("orientationchange")};n("init",()=>{t.params.resizeObserver&&void 0!==r.ResizeObserver?t&&!t.destroyed&&t.initialized&&(i=new ResizeObserver(e=>{o=r.requestAnimationFrame(()=>{const{width:n,height:s}=t;let r=n,i=s;e.forEach(e=>{let{contentBoxSize:n,contentRect:s,target:o}=e;o&&o!==t.el||(r=s?s.width:(n[0]||n).inlineSize,i=s?s.height:(n[0]||n).blockSize)}),r===n&&i===s||a()})}),i.observe(t.el)):(r.addEventListener("resize",a),r.addEventListener("orientationchange",l))}),n("destroy",()=>{o&&r.cancelAnimationFrame(o),i&&i.unobserve&&t.el&&(i.unobserve(t.el),i=null),r.removeEventListener("resize",a),r.removeEventListener("orientationchange",l)})},function(e){let{swiper:t,extendParams:n,on:s,emit:r}=e;const i=[],o=Cc(),a=function(e,n){void 0===n&&(n={});const s=new(o.MutationObserver||o.WebkitMutationObserver)(e=>{if(t.__preventObserver__)return;if(1===e.length)return void r("observerUpdate",e[0]);const n=function(){r("observerUpdate",e[0])};o.requestAnimationFrame?o.requestAnimationFrame(n):o.setTimeout(n,0)});s.observe(e,{attributes:void 0===n.attributes||n.attributes,childList:t.isElement||(void 0===n.childList||n).childList,characterData:void 0===n.characterData||n.characterData}),i.push(s)};n({observer:!1,observeParents:!1,observeSlideChildren:!1}),s("init",()=>{if(t.params.observer){if(t.params.observeParents){const e=function(e){const t=[];let n=e.parentElement;for(;n;)t.push(n),n=n.parentElement;return t}(t.hostEl);for(let t=0;t<e.length;t+=1)a(e[t])}a(t.hostEl,{childList:t.params.observeSlideChildren}),a(t.wrapperEl,{attributes:!1})}}),s("destroy",()=>{i.forEach(e=>{e.disconnect()}),i.splice(0,i.length)})}]);export{mu as N,pu as S,vc as a,wc as b,Ll as c,Pl as d,Bl as g,Ve as i,n as s};
//# sourceMappingURL=vendor-CORffxZO.js.map
